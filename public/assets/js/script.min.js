$html=false;executeFunc(bindBootstrapCarousel);function bindBootstrapCarousel(){if(typeof bootstrap!=="object"){return false}var carouselElList=[].slice.call(document.querySelectorAll(".carousel"));carouselElList.map(function(carouselEl){return new bootstrap.Carousel(carouselEl)});return true}executeFunc(bindBootstrapTooltip);function bindBootstrapTooltip(){if(typeof bootstrap!=="object"){return false}var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));tooltipTriggerList.map(function(tooltipTriggerEl){const tooltipInstance=new bootstrap.Tooltip(tooltipTriggerEl);tooltipTriggerEl.addEventListener("click",event=>{tooltipInstance.hide()});return tooltipInstance});return true}executeFunc(bindBootstrapToast);function bindBootstrapToast(){if(typeof bootstrap!=="object"){return false}var toastElList=[].slice.call(document.querySelectorAll(".toast"));toastElList.map(function(toastEl){return new bootstrap.Toast(toastEl,{delay:15e3}).show()});return true}executeFunc(bindBootstrapTab);function bindBootstrapTab(){if(typeof bootstrap!=="object"){return false}const triggerTabList=document.querySelectorAll(".nav-mouse li");triggerTabList.forEach(triggerEl=>{const tabTrigger=new bootstrap.Tab(triggerEl);triggerEl.addEventListener("mouseover",event=>{event.preventDefault();tabTrigger.show()})});return true}executeFunc(bindBootstrapPopover);function bindBootstrapPopover(){if(typeof bootstrap!=="object"){return false}var popoverTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));popoverTriggerList.map(function(popoverTriggerEl){popoverTriggerEl.addEventListener("shown.bs.popover",function(event){let describedby=this.getAttribute("aria-describedby");if(describedby){let elementDescribedby=document.getElementById(describedby);document.addEventListener("click",HidePopover);function HidePopover(e){const withinBoundaries=e.composedPath().includes(elementDescribedby);if(!withinBoundaries){document.removeEventListener("click",HidePopover);pops.toggle()}}elementDescribedby.querySelectorAll(".modal-link").forEach(function(item,i,arr){item.dataset.bsTarget="#modal";item.dataset.bsToggle="modal";modalLink(item)});elementDescribedby.querySelectorAll(".dropdown-toggle").forEach(function(item,i,arr){item.dataset.bsToggle="dropdown";new bootstrap.Dropdown(item)})}});const pops=new bootstrap.Popover(popoverTriggerEl,{html:true,sanitize:false,content:function(){if(popoverTriggerEl.id){let content=document.getElementById(popoverTriggerEl.id+"-content");if(content){return content.innerHTML}}if(popoverTriggerEl.dataset.id){let content=document.getElementById(popoverTriggerEl.dataset.id+"-content");if(content){return content.innerHTML}}},title:function(){if(popoverTriggerEl.id){let title=document.getElementById(popoverTriggerEl.id+"-title");if(title){return title.innerHTML}}if(popoverTriggerEl.dataset.id){let title=document.getElementById(popoverTriggerEl.dataset.id+"-title");if(title){return title.innerHTML}}}});return pops});return true}executeFunc(function uQnFyjnB(){if(typeof formDebounce!=="function"){return false}const form=document.forms.search_form;if(typeof form==="undefined"){return true}if(form.action.includes("search")){return true}const search=form.querySelector("#search_form_query");search.addEventListener("input",formDebounce(()=>{form.submit()},1500));return true});function modaHidden(){let ModalElement=document.getElementById("modal");bootstrap.Modal.getInstance(ModalElement).hide()}document.querySelectorAll('[data-bs-toggle="modal"]').forEach(function(item,i,arr){modalLink(item)});document.querySelectorAll(".offcanvas-link").forEach(function(item,i,arr){item.addEventListener("click",function(){offcanvasLink(item)})});async function offcanvasLink(offcanvas){await fetch(offcanvas.dataset.href,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},redirect:"follow",referrerPolicy:"no-referrer"}).then(response=>{if(response.status!==200){return false}return response.text()}).then(data=>{if(data){var myOffcanvas=document.getElementById("offcanvas");if(myOffcanvas===null){console.log('Элемент с идентификатором id="offcanvas" не найден');return}var bsOffcanvas=new bootstrap.Offcanvas(myOffcanvas);myOffcanvas.innerHTML=data;bsOffcanvas.show();let lazy=document.createElement("script");lazy.src="/assets/js/lazyload.min.js?v="+Date.now();document.head.appendChild(lazy)}});return false}function modalLink(item){if(item.classList.contains("prnt")===true||item.classList.contains("print")===true){return}item.addEventListener("click",function(event){document.querySelector("#modal .spinner-border")?.classList.remove("d-none");event.preventDefault();const request=new XMLHttpRequest;let url=null;if(this.href){url=item.href}else{url=item.dataset.href}if(!url){return}request.open("GET",url);request.setRequestHeader("X-Requested-With","XMLHttpRequest");request.addEventListener("readystatechange",function(evemnt){if(request.readyState===4&&request.status===200){const modal=document.getElementById("modal");modal.innerHTML=request.responseText;modal.addEventListener("hidden.bs.modal",function(event){this.innerHTML='<div class="modal-dialog modal-dialog-centered"><div class="d-flex justify-content-center w-100"><div class="spinner-border text-light" role="status"><span class="visually-hidden">Loading...</span></div></div></div>'});modal.addEventListener("shown.bs.modal",function(event){var tooltipTriggerList=[].slice.call(modal.querySelectorAll('[data-bs-toggle="tooltip"]'));tooltipTriggerList.map(function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl)})});modal.querySelectorAll('[data-select="select2"]').forEach(function(item){new NiceSelect(item,{searchable:true})});modal.querySelectorAll('[data-bs-target="#modal"]').forEach(function(item,i,arr){modalLink(item)});modal.querySelectorAll("form").forEach(function(forms){forms.addEventListener("submit",function(event){event.preventDefault();submitModalForm(forms);return false})});var tooltipTriggerList=[].slice.call(modal.querySelectorAll('[data-bs-toggle="tooltip"]'));tooltipTriggerList.map(function(tooltipTriggerEl){const tooltipInstance=new bootstrap.Tooltip(tooltipTriggerEl);tooltipTriggerEl.addEventListener("click",event=>{tooltipInstance.hide()});return tooltipInstance});if($html){$html=request.responseText}let lazy=document.createElement("script");lazy.src="/assets/js/lazyload.min.js?v="+Date.now();document.head.appendChild(lazy)}else{if(request.status===302){let requestJson=JSON.parse(request.response);if(requestJson.redirect){window.location.href=requestJson.redirect}}}});request.send();return false})}async function submitModalForm(forms){if(typeof ClassicEditor==="function"){for(editors in ckeditors){ckeditors[editors].updateSourceElement()}}let indicator=forms.querySelector(".spinner-border");if(indicator){btn=indicator.closest("button");indicator.classList.remove("d-none");btn.disabled=true;btn.type="button"}else{forms.submit();modaHidden();return true}const data=new FormData(forms);let resolved=100;await fetch(forms.action,{method:forms.method,cache:"no-cache",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},redirect:"follow",referrerPolicy:"no-referrer",body:data}).then(response=>{closeProgress();typeof btn==="undefined"?"":btn.type="submit";const contentType=response.headers.get("content-type");const modalElement=document.getElementById("modal");bootstrap.Modal.getOrCreateInstance(modalElement).hide();if(!contentType||!contentType.includes("application/json")){$errorFormHandler='{ "type":"danger" , '+'"header":"Ошибка"  , '+'"message" : "Возникла ошибка при заполнении" }';createToast(JSON.parse($errorFormHandler));throw new TypeError("Oops, we haven't got JSON!")}return response.json()}).then(data=>{if(data===undefined){return false}if(data.status===302||data.status===307){if(data.redirect===undefined||data.redirect===null){window.location.href=data.status===307?"/refresh":"/referer";return}window.location.href=data.redirect;return false}createToast(data);if(data.status!==200){return}setTimeout(function initResolve(){if(typeof resolve=="function"){resolve(data);return}console.log("resolve not found");if(resolved>1e3){return}resolved=resolved*2;setTimeout(initResolve,resolved)},100)});return false}async function submitLink(href,id=null){let resolved=100;await fetch(href,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},redirect:"follow",referrerPolicy:"no-referrer"}).then(response=>{const contentType=response.headers.get("content-type");if(!contentType||!contentType.includes("application/json")){$errorFormHandler='{ "type":"danger" , '+'"header":"Ошибка"  , '+'"message" : "Возникла ошибка при заполнении" }';createToast(JSON.parse($errorFormHandler));throw new TypeError("Oops, we haven't got JSON!")}return response.json()}).then(data=>{if(data===undefined){return false}if(data.status===302||data.status===307){if(data.redirect===undefined||data.redirect===null){window.location.href=data.status===307?"/refresh":"/referer";return}window.location.href=data.redirect;return false}executeFunc(function HunLIOPGlZ(){if(typeof resolve=="function"){resolve(data);return true}});createToast(data);if(data.status!==200){return true}if(typeof success!==undefined&&id!==null){success(id)}});return false}checked_item=document.querySelectorAll(".checked-item");all_usecase=document.getElementById("all_usecase");function checkedAll($this){all_usecase.classList.add("d-none");if($this.checked){all_usecase.classList.remove("d-none")}if($this.dataset.id!==undefined){document.querySelectorAll(".checked-item-all").forEach(function(item,i,arr){item.checked=$this.dataset.id===item.dataset.id})}checked_item.forEach(function(item,i,arr){if($this.dataset.id!==undefined){if($this.dataset.id!==item.dataset.id){item.checked=false;return}}item.checked=$this.checked})}function checkedItem(checkedItem=null){all_usecase.classList.add("d-none");checked_item.forEach(function(item,i,arr){if(item.checked){all_usecase.classList.remove("d-none")}if(item.dataset.id!==undefined){document.querySelectorAll(".checked-item-all").forEach(function(itemAll,i,arr){if(itemAll.dataset.id!==item.dataset.id){itemAll.checked=false}})}});if(checkedItem&&checkedItem.dataset.id!==undefined){document.querySelectorAll(".checked-item").forEach(function(itemOther,i,arr){if(itemOther.dataset.id!=checkedItem.dataset.id){itemOther.checked=false}})}}(function(Function_prototype){Function_prototype.debounce=function(delay,ctx){var fn=this,timer;return function(){var args=arguments,that=this;clearTimeout(timer);timer=setTimeout(function(){fn.apply(ctx||that,args)},delay)}}})(Function.prototype);function backToTop(){const scrollingElement=document.scrollingElement||document.body;window.scrollBy({top:scrollingElement.scrollTop*-1,behavior:"smooth"});return false}function backToEnd(){const scrollingElement=document.scrollingElement||document.body;window.scrollBy({top:scrollingElement.scrollHeight,behavior:"smooth"})}function scrollFunction(){const scrollingElement=document.scrollingElement.scrollHeight;backButtonTop.style.display="none";if(document.body.scrollTop>60||document.documentElement.scrollTop>60){backButtonTop.style.display="block"}let clientHeight=document.documentElement.clientHeight*1.1+document.documentElement.scrollTop;backButtonEnd.style.display="block";if(clientHeight>scrollingElement){backButtonEnd.style.display="none"}}backButtonTop=document.getElementById("btn-back-to-top");backButtonEnd=document.getElementById("btn-back-to-end");if(backButtonTop||backButtonEnd){window.onscroll=function(){scrollFunction()};scrollFunction();backButtonTop?.addEventListener("click",backToTop);backButtonEnd?.addEventListener("click",backToEnd)}document.querySelectorAll(".spinner-border").forEach(function(indicator){bindSpinner(indicator)});function bindSpinner(indicator){let btn=indicator.closest(".btn");if(btn===null){closeProgress(indicator);return false}btn.addEventListener("click",function(){indicator.classList.remove("d-none");this.disabled=true;let spinnerForm=this.closest("form");if(spinnerForm===null){closeProgress(indicator);return true}let frm=document.forms[spinnerForm.name];frm.addEventListener("submit",function(event){event.preventDefault();return false});if(frm){let formSubmit=true;Array.from(frm.elements).forEach(input=>{let $errorFormHandler=false;if(input.validity.valid===false){formSubmit=false;let $placeholderText=false;setTimeout(closeProgress,1e3);$label=document.querySelector('label[for="'+input.id+'"]');$placeholderText=$label?$label.innerHTML:false;if(!$placeholderText){$placeholderInput=document.querySelector("#"+input.id+"");if($placeholderInput.tagName==="SELECT"){const firstOption=$placeholderInput.options[0];$placeholderText=firstOption.value===""?firstOption.textContent:false}else{$placeholder=$placeholderInput.getAttribute("placeholder");$placeholderText=$placeholder?$placeholder:false}}if(!$placeholderText){$placeholderText=input.id}if($placeholderText){$errorFormHandler='{ "type":"danger" , '+'"header":"Ошибка заполнения"   , '+'"message" : "'+$placeholderText+'"}';if($errorFormHandler!==false){createToast(JSON.parse($errorFormHandler))}}}});if(frm.classList.contains("order-basket")){return true}if(formSubmit){frm.submit()}}setTimeout(closeProgress,3e3)});return true}function closeProgress(indicator=null){const indicators=indicator?[indicator]:document.querySelectorAll(".spinner-border");indicators.forEach(item=>{item.classList.add("d-none");const btn=item.closest(".btn");if(btn){btn.disabled=false;btn.removeAttribute("disabled")}})}document.getElementById("select-pagination")?.addEventListener("change",function(event){this.form.submit()});function createToast(data){let $type=data.type;let $header=data.header;let $message=data.message;let $href=data.href;let $name=data.name;var toastDiv=document.getElementById("toast");if(toastDiv){var toastEl=document.createElement("div");toastEl.className="toast";toastEl.setAttribute("role","alert");toastEl.setAttribute("aria-live","assertive");toastEl.setAttribute("aria-atomic","true");var tostHeader=document.createElement("div");tostHeader.className="toast-header";toastEl.append(tostHeader);var tostStrong=document.createElement("strong");tostStrong.classList.add("me-auto");tostStrong.classList.add("mt-1");if($type=="danger"||$type=="error"){tostStrong.classList.add("text-danger")}tostStrong.textContent=$header;tostHeader.append(tostStrong);var tostClosed=document.createElement("button");tostClosed.type="button";tostClosed.className="btn-close";tostClosed.setAttribute("data-bs-dismiss","toast");tostClosed.setAttribute("aria-label","Close");tostHeader.append(tostClosed);var toastBody=document.createElement("div");toastBody.className="toast-body";toastEl.append(toastBody);var toastText=document.createElement("p");toastText.className="p-0";toastText.className="m-0";toastText.textContent=$message;toastBody.append(toastText);if($href){var toastHref=document.createElement("a");toastHref.classList.add("text-decoration-none");toastHref.classList.add("ms-3");toastHref.href=$href;toastHref.textContent=$name;toastText.append(toastHref)}document.getElementById("toast").appendChild(toastEl);setTimeout(function showToast(){if(bootstrap){new bootstrap.Toast(toastEl,{delay:15e3}).show();return}setTimeout(showToast,500)},500)}}idFormDebounce=false;lastFormDebounce=false;function formDebounce(func,delay){let timeoutId;return function(...args){clearTimeout(timeoutId);timeoutId=setTimeout(()=>func.apply(this,args),delay);idFormDebounce=timeoutId}}function disabledElementsForm(ChangeForm){Array.from(ChangeForm.elements).forEach(input=>{if(input.disabled){return}if(input.tagName==="SELECT"){input.classList.add("disabled");document.getElementById(input.id+"_select2")?.classList.add("disabled")}if(input.tagName==="BUTTON"){input.classList.add("disabled");input.querySelector(".spinner-border")?.classList.remove("d-none")}})}function enableElementsForm(ChangeForm){Array.from(ChangeForm.elements).forEach(input=>{if(input.disabled){return}if(input.tagName==="SELECT"){input.classList.remove("disabled");document.getElementById(input.id+"_select2")?.classList.remove("disabled")}if(input.tagName==="BUTTON"){input.classList.remove("disabled");input.querySelector(".spinner-border")?.classList.add("d-none")}})}