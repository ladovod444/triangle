function addToFavorite(e){let button=e.currentTarget;let svgButton=button.querySelector("svg");if(!svgButton){return}let invariable=svgButton.dataset.invariable;fetch("/favorite/new/"+invariable,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:new FormData(button.closest("form"))}).then(response=>response.json()).then(()=>{toggleFavorite(svgButton);if(button.classList.contains("favorite-delete")){let card=button.closest("form")?.closest(".card")?.closest(".col");if(card){card.classList.add("fade-delete");setTimeout(()=>card.remove(),500)}}}).catch(error=>console.error("Ошибка запроса:",error))}function toggleFavorite(svgButton){if(!svgButton){return}svgButton.classList.toggle("text-secondary");svgButton.classList.toggle("text-primary")}allFavorites=document.querySelectorAll(".favorite, .favorite-delete");allFavorites.forEach(favorite=>{favorite.addEventListener("click",function(e){e.preventDefault();addToFavorite(e)},true)});