let $addButtonCall=document.getElementById("callAddCollection");if($addButtonCall){let $blockCollectionCall=document.getElementById("collection-call");if($blockCollectionCall){$addButtonCall.addEventListener("click",function(){let $addButtonCall=this;let newForm=$addButtonCall.dataset.prototype;let index=$addButtonCall.dataset.index*1;newForm=newForm.replace(/__call__/g,index);let div=document.createElement("div");div.id="item_contacts_region_form_call_"+index;div.innerHTML=newForm;$blockCollectionCall.append(div);div.querySelector("#contacts_region_add_phone")?.addEventListener("click",addPhone);div.querySelector(".del-item-phone")?.addEventListener("click",deletePhone);div.querySelector(".del-item-call")?.addEventListener("click",deleteCall);$addButtonCall.dataset.index=(index+1).toString();div.scrollIntoView({block:"center",inline:"center",behavior:"smooth"});let inputElement=div.querySelector('input[type="file"]');inputElement.addEventListener("change",function(e){var file=inputElement.files[0];var reader=new FileReader;let image=div.querySelector(".image-input");reader.onloadend=function(){image.style.setProperty("background-image","url("+reader.result+")","important")};if(file){reader.readAsDataURL(file)}else{image.style.setProperty("background-image","url(/img/blank.svg)","important")}})})}}document.querySelectorAll("#contacts_region_add_phone").forEach(function(item){item.addEventListener("click",addPhone)});function addPhone(){let newForm=this.dataset.prototype;let index=this.dataset.index*1;let call=this.dataset.call*1;let collection=this.dataset.collection;newForm=newForm.replace(/__call_phone__/g,index);let div=document.createElement("div");div.innerHTML=newForm;div.id="item_contacts_region_form_calls_phone_"+index;div.classList.add("mb-3");let $collection=document.getElementById(collection);$collection.append(div);div.querySelector(".del-item-phone")?.addEventListener("click",deletePhone);this.dataset.index=(index+1).toString();var inputs=document.querySelectorAll('input[type="tel"]');Array.prototype.forEach.call(inputs,function(input){if(input.classList.contains("loaded")===false){new InputMask(input)}})}document.querySelectorAll(".del-item-phone").forEach(function(item){item.addEventListener("click",deletePhone)});function deletePhone(){document.getElementById(this.dataset.delete).remove()}