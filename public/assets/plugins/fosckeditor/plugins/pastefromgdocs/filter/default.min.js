(function(){function f(c){return""===c?!1:c}function b(c){if(!/(o|u)l/i.test(c.parent.name)){return c}j.elements.replaceWithChildren(c);return !1}function a(e){function h(m,n){var d,o;if(m&&"tr"===m.name){d=m.children;for(o=0;o<n.length&&d[o];o++){d[o].attributes.width=n[o]}h(m.next,n)}}var k=e.parent;e=function(c){return CKEDITOR.tools.array.map(c,function(d){return Number(d.attributes.width)})}(e.children);var g=function(c){return CKEDITOR.tools.array.reduce(c,function(m,d){return m+d},0)}(e);k.attributes.width=g;h(function(c){return(c=CKEDITOR.tools.array.find(c.children,function(d){return d.name&&("tr"===d.name||"tbody"===d.name)}))&&c.name&&"tbody"===c.name?c.children[0]:c}(k),e)}var i=CKEDITOR.plugins.pastetools,j=i.filters.common,l=j.styles;CKEDITOR.plugins.pastetools.filters.gdocs={rules:function(c,g,d){return{elementNames:[[/^meta/,""]],comment:function(){return !1},attributes:{id:function(e){return !/^docs\-internal\-guid\-/.test(e)},dir:function(e){return"ltr"===e?!1:e},style:function(h,e){return f(l.normalizedStyles(e,g))},"class":function(e){return f(e.replace(/kix-line-break/ig,""))}},elements:{div:function(h){var e=1===h.children.length,k="table"===h.children[0].name;"div"===h.name&&e&&k&&delete h.attributes.align},colgroup:a,span:function(h){l.createStyleStack(h,d,g,/vertical-align|white-space|font-variant/);var e=/vertical-align:\s*sub/,k=h.attributes.style;/vertical-align:\s*super/.test(k)?h.name="sup":e.test(k)&&(h.name="sub");h.attributes.style=k.replace(/vertical-align\s*.+?;?/,"")},b:function(e){j.elements.replaceWithChildren(e);return !1},p:function(e){if(e.parent&&"li"===e.parent.name){return j.elements.replaceWithChildren(e),!1}},ul:function(e){l.pushStylesLower(e);return b(e)},ol:function(e){l.pushStylesLower(e);return b(e)},li:function(k){l.pushStylesLower(k);var h=k.children,m=/(o|u)l/i;1===h.length&&m.test(h[0].name)&&(j.elements.replaceWithChildren(k),k=!1);return k}}}}};CKEDITOR.pasteFilters.gdocs=i.createFilter({rules:[j.rules,CKEDITOR.plugins.pastetools.filters.gdocs.rules]})})();