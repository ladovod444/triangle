(function(c,d){typeof exports==="object"&&typeof module!=="undefined"?module.exports=d():typeof define==="function"&&define.amd?define("codemirror.js",d):(c=c||self,c.CodeMirror=d())}(this,(function(){var iV=navigator.userAgent;var kA=navigator.platform;var mX=/gecko\/\d/i.test(iV);var ih=/MSIE \d/.test(iV);var oW=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(iV);var n5=/Edge\/(\d+)/.exec(iV);var jI=ih||oW||n5;var lG=jI&&(ih?document.documentMode||6:+(n5||oW)[1]);var j9=!n5&&/WebKit\//.test(iV);var jC=j9&&/Qt\/\d+\.\d+/.test(iV);var lS=!n5&&/Chrome\//.test(iV);var kR=/Opera\//.test(iV);var o5=/Apple Computer/.test(navigator.vendor);var mf=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(iV);var hX=/PhantomJS/.test(iV);var jx=o5&&(/Mobile\/\w+/.test(iV)||navigator.maxTouchPoints>2);var oL=/Android/.test(iV);var km=jx||oL||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(iV);var lg=jx||/Mac/.test(kA);var hE=/\bCrOS\b/.test(iV);var hr=/win/i.test(kA);var nE=kR&&iV.match(/Version\/(\d*\.\d*)/);if(nE){nE=Number(nE[1])}if(nE&&nE>=15){kR=false;j9=true}var md=lg&&(jC||kR&&(nE==null||nE<12.11));var i1=mX||(jI&&lG>=9);function mv(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}var lY=function(a,c){var e=a.className;var b=mv(c).exec(e);if(b){var d=e.slice(b.index+b[0].length);a.className=e.slice(0,b.index)+(d?b[1]+d:"")}};function kT(a){for(var b=a.childNodes.length;b>0;--b){a.removeChild(a.firstChild)}return a}function l7(b,a){return kT(b).appendChild(a)}function jr(b,d,e,f){var c=document.createElement(b);if(e){c.className=e}if(f){c.style.cssText=f}if(typeof d=="string"){c.appendChild(document.createTextNode(d))}else{if(d){for(var a=0;a<d.length;++a){c.appendChild(d[a])}}}return c}function i9(c,e,a,b){var d=jr(c,e,a,b);d.setAttribute("role","presentation");return d}var m7;if(document.createRange){m7=function(e,d,b,c){var a=document.createRange();a.setEnd(c||e,b);a.setStart(e,d);return a}}else{m7=function(a,d,c){var b=document.body.createTextRange();try{b.moveToElementText(a.parentNode)}catch(e){return b}b.collapse(true);b.moveEnd("character",c);b.moveStart("character",d);return b}}function hB(b,a){if(a.nodeType==3){a=a.parentNode}if(b.contains){return b.contains(a)}do{if(a.nodeType==11){a=a.host}if(a==b){return true}}while(a=a.parentNode)}function jB(){var b;try{b=document.activeElement}catch(a){b=document.body||null}while(b&&b.shadowRoot&&b.shadowRoot.activeElement){b=b.shadowRoot.activeElement}return b}function hO(b,c){var a=b.className;if(!mv(c).test(a)){b.className+=(a?" ":"")+c}}function iv(d,b){var a=d.split(" ");for(var c=0;c<a.length;c++){if(a[c]&&!mv(a[c]).test(b)){b+=" "+a[c]}}return b}var jH=function(a){a.select()};if(jx){jH=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}}else{if(jI){jH=function(a){try{a.select()}catch(b){}}}}function mw(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function oJ(a,b,c){if(!b){b={}}for(var d in a){if(a.hasOwnProperty(d)&&(c!==false||!b.hasOwnProperty(d))){b[d]=a[d]}}return b}function ma(g,a,e,d,h){if(a==null){a=g.search(/[^\s\u00a0]/);if(a==-1){a=g.length}}for(var f=d||0,c=h||0;;){var b=g.indexOf("\t",f);if(b<0||b>=a){return c+(a-f)}c+=b-f;c+=e-(c%e);f=b+1}}var hs=function(){this.id=null;this.f=null;this.time=0;this.handler=mw(this.onTimeout,this)};hs.prototype.onTimeout=function(a){a.id=0;if(a.time<=+new Date){a.f()}else{setTimeout(a.handler,a.time-+new Date)}};hs.prototype.set=function(c,b){this.f=b;var a=+new Date+c;if(!this.id||a<this.time){clearTimeout(this.id);this.id=setTimeout(this.handler,c);this.time=a}};function lz(c,b){for(var a=0;a<c.length;++a){if(c[a]==b){return a}}return -1}var jM=50;var kX={toString:function(){return"CodeMirror.Pass"}};var ot={scroll:false},mT={origin:"*mouse"},kn={origin:"+move"};function lw(f,g,e){for(var d=0,a=0;;){var b=f.indexOf("\t",d);if(b==-1){b=f.length}var c=b-d;if(b==f.length||a+c>=g){return d+Math.min(c,g-a)}a+=b-d;a+=e-(a%e);d=b+1;if(a>=g){return d}}}var nB=[""];function mU(a){while(nB.length<=a){nB.push(hI(nB)+" ")}return nB[a]}function hI(a){return a[a.length-1]}function l4(c,d){var b=[];for(var a=0;a<c.length;a++){b[a]=d(c[a],a)}return b}function k3(d,b,a){var e=0,c=a(b);while(e<d.length&&a(d[e])<=c){e++}d.splice(e,0,b)}function it(){}function ne(a,c){var b;if(Object.create){b=Object.create(a)}else{it.prototype=a;b=new it()}if(c){oJ(c,b)}return b}var mY=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function hL(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||mY.test(a))}function oc(b,a){if(!a){return hL(b)}if(a.source.indexOf("\\w")>-1&&hL(b)){return true}return a.test(b)}function jN(b){for(var a in b){if(b.hasOwnProperty(a)&&b[a]){return false}}return true}var ij=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function j1(a){return a.charCodeAt(0)>=768&&ij.test(a)}function ka(b,a,c){while((c<0?a>0:a<b.length)&&j1(b.charAt(a))){a+=c}return a}function m5(c,d,e){var a=d>e?-1:1;for(;;){if(d==e){return d}var f=(d+e)/2,b=a<0?Math.ceil(f):Math.floor(f);if(b==d){return c(b)?d:e}if(c(b)){e=b}else{d=b+a}}}function kM(b,c,d,e){if(!b){return e(c,d,"ltr",0)}var f=false;for(var g=0;g<b.length;++g){var a=b[g];if(a.from<d&&a.to>c||c==d&&a.to==c){e(Math.max(a.from,c),Math.min(a.to,d),a.level==1?"rtl":"ltr",g);f=true}}if(!f){e(c,d,"ltr")}}var js=null;function oX(b,f,d){var e;js=null;for(var a=0;a<b.length;++a){var c=b[a];if(c.from<f&&c.to>f){return a}if(c.to==f){if(c.from!=c.to&&d=="before"){e=a}else{js=a}}if(c.from==f){if(c.from!=c.to&&d!="before"){e=a}else{js=a}}}return e!=null?e:js}var my=(function(){var h="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var a="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function b(k){if(k<=247){return h.charAt(k)}else{if(1424<=k&&k<=1524){return"R"}else{if(1536<=k&&k<=1785){return a.charAt(k-1536)}else{if(1774<=k&&k<=2220){return"r"}else{if(8192<=k&&k<=8203){return"w"}else{if(k==8204){return"b"}else{return"L"}}}}}}}var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var f=/[stwN]/,c=/[LRr]/,d=/[Lb1n]/,j=/[1n]/;function g(k,l,m){this.level=k;this.from=l;this.to=m}return function(u,S){var F=S=="ltr"?"L":"R";if(u.length==0||S=="ltr"&&!e.test(u)){return false}var P=u.length,k=[];for(var L=0;L<P;++L){k.push(b(u.charCodeAt(L)))}for(var x=0,y=F;x<P;++x){var K=k[x];if(K=="m"){k[x]=y}else{y=K}}for(var z=0,T=F;z<P;++z){var l=k[z];if(l=="1"&&T=="r"){k[z]="n"}else{if(c.test(l)){T=l;if(l=="r"){k[z]="R"}}}}for(var A=1,U=k[0];A<P-1;++A){var n=k[A];if(n=="+"&&U=="1"&&k[A+1]=="1"){k[A]="1"}else{if(n==","&&U==k[A+1]&&(U=="1"||U=="n")){k[A]=U}}U=n}for(var B=0;B<P;++B){var o=k[B];if(o==","){k[B]="N"}else{if(o=="%"){var Q=(void 0);for(Q=B+1;Q<P&&k[Q]=="%";++Q){}var H=(B&&k[B-1]=="!")||(Q<P&&k[Q]=="1")?"1":"N";for(var M=B;M<Q;++M){k[M]=H}B=Q-1}}}for(var C=0,I=F;C<P;++C){var q=k[C];if(I=="L"&&q=="1"){k[C]="L"}else{if(c.test(q)){I=q}}}for(var D=0;D<P;++D){if(f.test(k[D])){var t=(void 0);for(t=D+1;t<P&&f.test(k[t]);++t){}var r=(D?k[D-1]:F)=="L";var p=(t<P?k[t]:F)=="L";var v=r==p?(r?"L":"R"):F;for(var J=D;J<t;++J){k[J]=v}D=t-1}}var s=[],N;for(var E=0;E<P;){if(d.test(k[E])){var G=E;for(++E;E<P&&d.test(k[E]);++E){}s.push(new g(0,G,E))}else{var w=E,V=s.length,m=S=="rtl"?1:0;for(++E;E<P&&k[E]!="L";++E){}for(var O=w;O<E;){if(j.test(k[O])){if(w<O){s.splice(V,0,new g(1,w,O));V+=m}var R=O;for(++O;O<E&&j.test(k[O]);++O){}s.splice(V,0,new g(2,R,O));V+=m;w=O}else{++O}}if(w<E){s.splice(V,0,new g(1,w,E))}}}if(S=="ltr"){if(s[0].level==1&&(N=u.match(/^\s+/))){s[0].from=N[0].length;s.unshift(new g(0,0,N[0].length))}if(hI(s).level==1&&(N=u.match(/\s+$/))){hI(s).to-=N[0].length;s.push(new g(0,P-N[0].length,P))}}return S=="rtl"?s.reverse():s}})();function mi(b,a){var c=b.order;if(c==null){c=b.order=my(b.text,a)}return c}var jj=[];var lT=function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}else{var d=a._handlers||(a._handlers={});d[c]=(d[c]||jj).concat(b)}}};function j4(a,b){return a._handlers&&a._handlers[b]||jj}function kp(e,a,f){if(e.removeEventListener){e.removeEventListener(a,f,false)}else{if(e.detachEvent){e.detachEvent("on"+a,f)}else{var d=e._handlers,c=d&&d[a];if(c){var b=lz(c,f);if(b>-1){d[a]=c.slice(0,b).concat(c.slice(b+1))}}}}}function o4(c,d){var b=j4(c,d);if(!b.length){return}var a=Array.prototype.slice.call(arguments,2);for(var e=0;e<b.length;++e){b[e].apply(null,a)}}function hp(c,a,b){if(typeof a=="string"){a={type:a,preventDefault:function(){this.defaultPrevented=true}}}o4(c,b||a.type,c,a);return oT(a)||a.codemirrorIgnore}function oG(a){var b=a._handlers&&a._handlers.cursorActivity;if(!b){return}var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var d=0;d<b.length;++d){if(lz(c,b[d])==-1){c.push(b[d])}}}function kd(a,b){return j4(a,b).length>0}function n3(a){a.prototype.on=function(c,b){lT(this,c,b)};a.prototype.off=function(c,b){kp(this,c,b)}}function nV(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}}function k2(a){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}}function oT(a){return a.defaultPrevented!=null?a.defaultPrevented:a.returnValue==false}function lr(a){nV(a);k2(a)}function mW(a){return a.target||a.srcElement}function iN(a){var b=a.which;if(b==null){if(a.button&1){b=1}else{if(a.button&2){b=3}else{if(a.button&4){b=2}}}}if(lg&&a.ctrlKey&&b==1){b=3}return b}var ie=function(){if(jI&&lG<9){return false}var a=jr("div");return"draggable" in a||"dragDrop" in a}();var iR;function oA(c){if(iR==null){var a=jr("span","\u200b");l7(c,jr("span",[a,document.createTextNode("x")]));if(c.firstChild.offsetHeight!=0){iR=a.offsetWidth<=1&&a.offsetHeight>2&&!(jI&&lG<8)}}var b=iR?jr("span","\u200b"):jr("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");b.setAttribute("cm-text","");return b}var iO;function oM(d){if(iO!=null){return iO}var c=l7(d,document.createTextNode("A\u062eA"));var a=m7(c,0,1).getBoundingClientRect();var b=m7(c,1,2).getBoundingClientRect();kT(d);if(!a||a.left==a.right){return false}return iO=(b.right-a.right<3)}var iD="\n\nb".split(/\n/).length!=3?function(e){var d=0,c=[],f=e.length;while(d<=f){var g=e.indexOf("\n",d);if(g==-1){g=e.length}var a=e.slice(d,e.charAt(g-1)=="\r"?g-1:g);var b=a.indexOf("\r");if(b!=-1){c.push(a.slice(0,b));d+=b+1}else{c.push(a);d=g+1}}return c}:function(a){return a.split(/\r\n?|\n/)};var oo=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return false}}:function(a){var c;try{c=a.ownerDocument.selection.createRange()}catch(b){}if(!c||c.parentElement()!=a){return false}return c.compareEndPoints("StartToEnd",c)!=0};var l1=(function(){var a=jr("div");if("oncopy" in a){return true}a.setAttribute("oncopy","return;");return typeof a.oncopy=="function"})();var jf=null;function oP(b){if(jf!=null){return jf}var a=l7(b,jr("span","x"));var d=a.getBoundingClientRect();var c=m7(a,0,1).getBoundingClientRect();return jf=Math.abs(d.left-c.left)>1}var kW={},ho={};function lf(b,a){if(arguments.length>2){a.dependencies=Array.prototype.slice.call(arguments,2)}kW[b]=a}function oC(a,b){ho[a]=b}function hA(b){if(typeof b=="string"&&ho.hasOwnProperty(b)){b=ho[b]}else{if(b&&typeof b.name=="string"&&ho.hasOwnProperty(b.name)){var a=ho[b.name];if(typeof a=="string"){a={name:a}}b=ne(a,b);b.name=a.name}else{if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b)){return hA("application/xml")}else{if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(b)){return hA("application/json")}}}}if(typeof b=="string"){return{name:b}}else{return b||{name:"null"}}}function hP(a,b){b=hA(b);var f=kW[b.name];if(!f){return hP(a,"text/plain")}var e=f(a,b);if(k7.hasOwnProperty(b.name)){var g=k7[b.name];for(var d in g){if(!g.hasOwnProperty(d)){continue}if(e.hasOwnProperty(d)){e["_"+d]=e[d]}e[d]=g[d]}}e.name=b.name;if(b.helperType){e.helperType=b.helperType}if(b.modeProps){for(var c in b.modeProps){e[c]=b.modeProps[c]}}return e}var k7={};function iB(a,b){var c=k7.hasOwnProperty(a)?k7[a]:(k7[a]={});oJ(b,c)}function lv(e,c){if(c===true){return c}if(e.copyState){return e.copyState(c)}var a={};for(var d in c){var b=c[d];if(b instanceof Array){b=b.concat([])}a[d]=b}return a}function i8(a,c){var b;while(a.innerMode){b=a.innerMode(c);if(!b||b.mode==a){break}c=b.state;a=b.mode}return b||{mode:a,state:c}}function lH(a,b,c){return a.startState?a.startState(b,c):true}var jP=function(c,a,b){this.pos=this.start=0;this.string=c;this.tabSize=a||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=b};jP.prototype.eol=function(){return this.pos>=this.string.length};jP.prototype.sol=function(){return this.pos==this.lineStart};jP.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};jP.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};jP.prototype.eat=function(c){var a=this.string.charAt(this.pos);var b;if(typeof c=="string"){b=a==c}else{b=a&&(c.test?c.test(a):c(a))}if(b){++this.pos;return a}};jP.prototype.eatWhile=function(b){var a=this.pos;while(this.eat(b)){}return this.pos>a};jP.prototype.eatSpace=function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>a};jP.prototype.skipToEnd=function(){this.pos=this.string.length};jP.prototype.skipTo=function(b){var a=this.string.indexOf(b,this.pos);if(a>-1){this.pos=a;return true}};jP.prototype.backUp=function(a){this.pos-=a};jP.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=ma(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?ma(this.string,this.lineStart,this.tabSize):0)};jP.prototype.indentation=function(){return ma(this.string,null,this.tabSize)-(this.lineStart?ma(this.string,this.lineStart,this.tabSize):0)};jP.prototype.match=function(e,b,c){if(typeof e=="string"){var d=function(g){return c?g.toLowerCase():g};var f=this.string.substr(this.pos,e.length);if(d(f)==d(e)){if(b!==false){this.pos+=e.length}return true}}else{var a=this.string.slice(this.pos).match(e);if(a&&a.index>0){return null}if(a&&b!==false){this.pos+=a[0].length}return a}};jP.prototype.current=function(){return this.string.slice(this.start,this.pos)};jP.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}};jP.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)};jP.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};function kr(e,c){c-=e.first;if(c<0||c>=e.size){throw new Error("There is no line "+(c+e.first)+" in the document.")}var b=e;while(!b.lines){for(var a=0;;++a){var d=b.children[a],f=d.chunkSize();if(c<f){b=d;break}c-=f}}return b.lines[c]}function jm(a,d,c){var b=[],e=d.line;a.iter(d.line,c.line+1,function(g){var f=g.text;if(e==c.line){f=f.slice(0,c.ch)}if(e==d.line){f=f.slice(d.ch)}b.push(f);++e});return b}function ns(b,d,a){var c=[];b.iter(d,a,function(e){c.push(e.text)});return c}function jd(b,c){var a=c-b.height;if(a){for(var d=b;d;d=d.parent){d.height+=a}}}function oO(b){if(b.parent==null){return null}var c=b.parent,d=lz(c.lines,b);for(var a=c.parent;a;c=a,a=a.parent){for(var e=0;;++e){if(a.children[e]==c){break}d+=a.children[e].chunkSize()}}return d+c.first}function o2(g,h){var a=g.first;outer:do{for(var b=0;b<g.children.length;++b){var c=g.children[b],d=c.height;if(h<d){g=c;continue outer}h-=d;a+=c.chunkSize()}return a}while(!g.lines);var j=0;for(;j<g.lines.length;++j){var e=g.lines[j],f=e.height;if(h<f){break}h-=f}return a+j}function k6(a,b){return b>=a.first&&b<a.first+a.size}function lj(b,a){return String(b.lineNumberFormatter(a+b.firstLineNumber))}function oD(c,b,a){if(a===void 0){a=null}if(!(this instanceof oD)){return new oD(c,b,a)}this.line=c;this.ch=b;this.sticky=a}function nz(a,b){return a.line-b.line||a.ch-b.ch}function oB(a,b){return a.sticky==b.sticky&&nz(a,b)==0}function nq(a){return oD(a.line,a.ch)}function n9(a,b){return nz(a,b)<0?b:a}function ph(a,b){return nz(a,b)<0?a:b}function jW(b,a){return Math.max(b.first,Math.min(a,b.first+b.size-1))}function hD(b,a){if(a.line<b.first){return oD(b.first,0)}var c=b.first+b.size-1;if(a.line>c){return oD(c,kr(b,c).text.length)}return hZ(a,kr(b,a.line).text.length)}function hZ(a,b){var c=a.ch;if(c==null||c>b){return oD(a.line,b)}else{if(c<0){return oD(a.line,0)}else{return a}}}function iW(d,c){var b=[];for(var a=0;a<c.length;a++){b[a]=hD(d,c[a])}return b}var o0=function(a,b){this.state=a;this.lookAhead=b};var ow=function(d,a,c,b){this.state=a;this.doc=d;this.line=c;this.maxLookAhead=b||0;this.baseTokens=null;this.baseTokenPos=1};ow.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);if(b!=null&&a>this.maxLookAhead){this.maxLookAhead=a}return b};ow.prototype.baseToken=function(a){if(!this.baseTokens){return null}while(this.baseTokens[this.baseTokenPos]<=a){this.baseTokenPos+=2}var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}};ow.prototype.nextLine=function(){this.line++;if(this.maxLookAhead>0){this.maxLookAhead--}};ow.fromSaved=function(a,b,c){if(b instanceof o0){return new ow(a,lv(a.mode,b.state),c,b.lookAhead)}else{return new ow(a,lv(a.mode,b),c)}};ow.prototype.save=function(a){var b=a!==false?lv(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new o0(b,this.maxLookAhead):b};function hR(h,f,d,a){var g=[h.state.modeGen],b={};kY(h,f.text,h.doc.mode,d,function(l,k){return g.push(l,k)},b,a);var e=d.state;var j=function(k){d.baseTokens=g;var m=h.state.overlays[k],l=1,n=0;d.state=true;kY(h,f.text,m.mode,d,function(o,q){var s=l;while(n<o){var r=g[l];if(r>o){g.splice(l,1,o,g[l+1],r)}l+=2;n=Math.min(o,r)}if(!q){return}if(m.opaque){g.splice(s,l-s,o,"overlay "+q);l=s+2}else{for(;s<l;s+=2){var p=g[s+1];g[s+1]=(p?p+" ":"")+"overlay "+q}}},b);d.state=e;d.baseTokens=null;d.baseTokenPos=1};for(var c=0;c<h.state.overlays.length;++c){j(c)}return{styles:g,classes:b.bgClass||b.textClass?b:null}}function mc(b,f,d){if(!f.styles||f.styles[0]!=b.state.modeGen){var e=jG(b,oO(f));var a=f.text.length>b.options.maxHighlightLength&&lv(b.doc.mode,e.state);var c=hR(b,f,e);if(a){e.state=a}f.stateAfter=e.save(!a);f.styles=c.styles;if(c.classes){f.styleClasses=c.classes}else{if(f.styleClasses){f.styleClasses=null}}if(d===b.doc.highlightFrontier){b.doc.modeFrontier=Math.max(b.doc.modeFrontier,++b.doc.highlightFrontier)}}return f.styles}function jG(c,d,b){var f=c.doc,g=c.display;if(!f.mode.startState){return new ow(f,true,d)}var e=ml(c,d,b);var h=e>f.first&&kr(f,e-1).stateAfter;var a=h?ow.fromSaved(f,h,e):new ow(f,lH(f.mode),e);f.iter(e,d,function(k){mP(c,k.text,a);var j=a.line;k.stateAfter=j==d-1||j%5==0||j>=g.viewFrom&&j<g.viewTo?a.save():null;a.nextLine()});if(b){f.modeFrontier=a.line}return a}function mP(c,d,a,b){var e=c.doc.mode;var f=new jP(d,c.options.tabSize,a);f.start=f.pos=b||0;if(d==""){h1(e,a.state)}while(!f.eol()){iF(e,f,a.state);f.start=f.pos}}function h1(a,b){if(a.blankLine){return a.blankLine(b)}if(!a.innerMode){return}var c=i8(a,b);if(c.mode.blankLine){return c.mode.blankLine(c.state)}}function iF(c,d,e,b){for(var a=0;a<10;a++){if(b){b[0]=i8(c,e).mode}var f=c.token(d,e);if(d.pos>d.start){return f}}throw new Error("Mode "+c.name+" failed to advance stream.")}var l3=function(a,c,b){this.start=a.start;this.end=a.pos;this.string=a.current();this.type=c||null;this.state=b};function mO(h,k,b,c){var j=h.doc,a=j.mode,e;k=hD(j,k);var f=kr(j,k.line),d=jG(h,k.line,b);var g=new jP(f.text,h.options.tabSize,d),l;if(c){l=[]}while((c||g.pos<k.ch)&&!g.eol()){g.start=g.pos;e=iF(a,g,d.state);if(c){l.push(new l3(g,e,lv(j.mode,d.state)))}}return c?l:new l3(g,e,d.state)}function lu(a,b){if(a){for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c){break}a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";if(b[d]==null){b[d]=c[2]}else{if(!(new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)")).test(b[d])){b[d]+=" "+c[2]}}}}return a}function kY(k,h,p,c,o,b,a){var d=p.flattenSpans;if(d==null){d=k.options.flattenSpans}var m=0,n=null;var j=new jP(h,k.options.tabSize,c),e;var f=k.options.addModeClass&&[null];if(h==""){lu(h1(p,c.state),b)}while(!j.eol()){if(j.pos>k.options.maxHighlightLength){d=false;if(a){mP(k,h,c,j.pos)}j.pos=h.length;e=null}else{e=lu(iF(p,j,c.state,f),b)}if(f){var g=f[0].name;if(g){e="m-"+(e?g+" "+e:g)}}if(!d||n!=e){while(m<j.start){m=Math.min(j.start,m+5000);o(m,n)}n=e}j.start=j.pos}while(m<j.pos){var l=Math.min(j.pos,m+5000);o(l,n);m=l}}function ml(j,d,a){var c,l,k=j.doc;var b=a?-1:d-(j.doc.mode.innerMode?1000:100);for(var f=d;f>b;--f){if(f<=k.first){return k.first}var g=kr(k,f-1),e=g.stateAfter;if(e&&(!a||f+(e instanceof o0?e.lookAhead:0)<=k.modeFrontier)){return f}var h=ma(g.text,null,j.options.tabSize);if(l==null||c>h){l=f-1;c=h}}return l}function hy(a,d){a.modeFrontier=Math.min(a.modeFrontier,d);if(a.highlightFrontier<d-10){return}var e=a.first;for(var c=d-1;c>e;c--){var b=kr(a,c).stateAfter;if(b&&(!(b instanceof o0)||c+b.lookAhead<d)){e=c+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,e)}var hx=false,nd=false;function hQ(){hx=true}function ob(){nd=true}function kc(c,a,b){this.marker=c;this.from=a;this.to=b}function i7(d,b){if(d){for(var a=0;a<d.length;++a){var c=d[a];if(c.marker==b){return c}}}}function im(a,d){var c;for(var b=0;b<a.length;++b){if(a[b]!=d){(c||(c=[])).push(a[b])}}return c}function nF(b,a){b.markedSpans=b.markedSpans?b.markedSpans.concat([a]):[a];a.marker.attachLine(b)}function hq(c,b,g){var f;if(c){for(var j=0;j<c.length;++j){var e=c[j],h=e.marker;var d=e.from==null||(h.inclusiveLeft?e.from<=b:e.from<b);if(d||e.from==b&&h.type=="bookmark"&&(!g||!e.marker.insertLeft)){var a=e.to==null||(h.inclusiveRight?e.to>=b:e.to>b);(f||(f=[])).push(new kc(h,e.from,a?null:e.to))}}}return f}function o7(c,a,g){var f;if(c){for(var j=0;j<c.length;++j){var e=c[j],h=e.marker;var b=e.to==null||(h.inclusiveRight?e.to>=a:e.to>a);if(b||e.from==a&&h.type=="bookmark"&&(!g||e.marker.insertLeft)){var d=e.from==null||(h.inclusiveLeft?e.from<=a:e.from<a);(f||(f=[])).push(new kc(h,d?null:e.from-a,e.to==null?null:e.to-a))}}}return f}function j8(n,m){if(m.full){return null}var e=k6(n,m.from.line)&&kr(n,m.from.line).markedSpans;var q=k6(n,m.to.line)&&kr(n,m.to.line).markedSpans;if(!e&&!q){return null}var s=m.from.ch,a=m.to.ch,k=nz(m.from,m.to)==0;var u=hq(e,s,k);var o=o7(q,a,k);var j=m.text.length==1,b=hI(m.text).length+(j?s:0);if(u){for(var r=0;r<u.length;++r){var t=u[r];if(t.to==null){var l=i7(o,t.marker);if(!l){t.to=s}else{if(j){t.to=l.to==null?null:l.to+b}}}}}if(o){for(var w=0;w<o.length;++w){var v=o[w];if(v.to!=null){v.to+=b}if(v.from==null){var f=i7(u,v.marker);if(!f){v.from=b;if(j){(u||(u=[])).push(v)}}}else{v.from+=b;if(j){(u||(u=[])).push(v)}}}}if(u){u=li(u)}if(o&&o!=u){o=li(o)}var p=[u];if(!j){var h=m.text.length-2,g;if(h>0&&u){for(var c=0;c<u.length;++c){if(u[c].to==null){(g||(g=[])).push(new kc(u[c].marker,null,null))}}}for(var d=0;d<h;++d){p.push(g)}p.push(o)}return p}function li(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.from!=null&&c.from==c.to&&c.marker.clearWhenEmpty!==false){a.splice(b--,1)}}if(!a.length){return null}return a}function kS(e,g,f){var n=null;e.iter(g.line,f.line+1,function(q){if(q.markedSpans){for(var p=0;p<q.markedSpans.length;++p){var o=q.markedSpans[p].marker;if(o.readOnly&&(!n||lz(n,o)==-1)){(n||(n=[])).push(o)}}}});if(!n){return null}var m=[{from:g,to:f}];for(var l=0;l<n.length;++l){var k=n[l],b=k.find(0);for(var a=0;a<m.length;++a){var c=m[a];if(nz(c.to,b.from)<0||nz(c.from,b.to)>0){continue}var h=[a,1],d=nz(c.from,b.from),j=nz(c.to,b.to);if(d<0||!k.inclusiveLeft&&!d){h.push({from:c.from,to:b.from})}if(j>0||!k.inclusiveRight&&!j){h.push({from:b.to,to:c.to})}m.splice.apply(m,h);a+=h.length-3}}return m}function i4(b){var c=b.markedSpans;if(!c){return}for(var a=0;a<c.length;++a){c[a].marker.detachLine(b)}b.markedSpans=null}function j2(b,c){if(!c){return}for(var a=0;a<c.length;++a){c[a].marker.attachLine(b)}b.markedSpans=c}function k1(a){return a.inclusiveLeft?-1:0}function lU(a){return a.inclusiveRight?1:0}function jt(g,b){var e=g.lines.length-b.lines.length;if(e!=0){return e}var a=g.find(),d=b.find();var c=nz(a.from,d.from)||k1(g)-k1(b);if(c){return -c}var f=nz(a.to,d.to)||lU(g)-lU(b);if(f){return f}return b.id-g.id}function ng(a,c){var b=nd&&a.markedSpans,d;if(b){for(var e=(void 0),f=0;f<b.length;++f){e=b[f];if(e.marker.collapsed&&(c?e.from:e.to)==null&&(!d||jt(d,e.marker)<0)){d=e.marker}}}return d}function h4(a){return ng(a,true)}function k4(a){return ng(a,false)}function nC(a,e){var b=nd&&a.markedSpans,c;if(b){for(var f=0;f<b.length;++f){var d=b[f];if(d.marker.collapsed&&(d.from==null||d.from<e)&&(d.to==null||d.to>e)&&(!c||jt(c,d.marker)<0)){c=d.marker}}}return c}function nG(h,b,k,j,m){var e=kr(h,b);var d=nd&&e.markedSpans;if(d){for(var a=0;a<d.length;++a){var c=d[a];if(!c.marker.collapsed){continue}var f=c.marker.find(0);var g=nz(f.from,k)||k1(c.marker)-k1(m);var l=nz(f.to,j)||lU(c.marker)-lU(m);if(g>=0&&l<=0||g<=0&&l>=0){continue}if(g<=0&&(c.marker.inclusiveRight&&m.inclusiveLeft?nz(f.to,k)>=0:nz(f.to,k)>0)||g>=0&&(c.marker.inclusiveRight&&m.inclusiveLeft?nz(f.from,j)<=0:nz(f.from,j)<0)){return true}}}}function nI(a){var b;while(b=h4(a)){a=b.find(-1,true).line}return a}function nh(a){var b;while(b=k4(a)){a=b.find(1,true).line}return a}function l0(a){var c,b;while(c=k4(a)){a=c.find(1,true).line;(b||(b=[])).push(a)}return b}function hk(d,b){var c=kr(d,b),a=nI(c);if(c==a){return b}return oO(a)}function kQ(d,a){if(a>d.lastLine()){return a}var b=kr(d,a),c;if(!hV(d,b)){return a}while(c=k4(b)){b=c.find(1,true).line}return oO(b)+1}function hV(c,a){var b=nd&&a.markedSpans;if(b){for(var d=(void 0),e=0;e<b.length;++e){d=b[e];if(!d.marker.collapsed){continue}if(d.from==null){return true}if(d.marker.widgetNode){continue}if(d.from==0&&d.marker.inclusiveLeft&&ms(c,a,d)){return true}}}}function ms(c,a,e){if(e.to==null){var b=e.marker.find(1,true);return ms(c,b.line,i7(b.line.markedSpans,e.marker))}if(e.marker.inclusiveRight&&e.to==a.text.length){return true}for(var d=(void 0),f=0;f<a.markedSpans.length;++f){d=a.markedSpans[f];if(d.marker.collapsed&&!d.marker.widgetNode&&d.from==e.to&&(d.to==null||d.to!=e.from)&&(d.marker.inclusiveLeft||e.marker.inclusiveRight)&&ms(c,a,d)){return true}}}function oQ(h){h=nI(h);var f=0,a=h.parent;for(var g=0;g<a.lines.length;++g){var b=a.lines[g];if(b==h){break}else{f+=b.height}}for(var e=a.parent;e;a=e,e=a.parent){for(var c=0;c<e.children.length;++c){var d=e.children[c];if(d==a){break}else{f+=d.height}}}return f}function jZ(a){if(a.height==0){return 0}var b=a.text.length,c,d=a;while(c=h4(d)){var f=c.find(0,true);d=f.from.line;b+=f.from.ch-f.to.ch}d=a;while(c=k4(d)){var e=c.find(0,true);b-=d.text.length-e.from.ch;d=e.to.line;b+=d.text.length-e.to.ch}return b}function l2(c){var a=c.display,b=c.doc;a.maxLine=kr(b,b.first);a.maxLineLength=jZ(a.maxLine);a.maxLineChanged=true;b.iter(function(d){var e=jZ(d);if(e>a.maxLineLength){a.maxLineLength=e;a.maxLine=d}})}var jg=function(a,b,c){this.text=a;j2(this,b);this.height=c?c(this):1};jg.prototype.lineNo=function(){return oO(this)};n3(jg);function jX(b,d,a,c){b.text=d;if(b.stateAfter){b.stateAfter=null}if(b.styles){b.styles=null}if(b.order!=null){b.order=null}i4(b);j2(b,a);var e=c?c(b):1;if(e!=b.height){jd(b,e)}}function nY(a){a.parent=null;i4(a)}var ja={},lA={};function jJ(a,b){if(!a||/^\s*$/.test(a)){return null}var c=b.addModeClass?lA:ja;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function jS(g,h){var j=i9("span",null,null,j9?"padding-right: .1px":null);var a={pre:i9("pre",[j],"CodeMirror-line"),content:j,col:0,pos:0,cm:g,trailingSpace:false,splitSpaces:g.getOption("lineWrapping")};h.measure={};for(var b=0;b<=(h.rest?h.rest.length:0);b++){var e=b?h.rest[b-1]:h.line,c=(void 0);a.pos=0;a.addToken=lc;if(oM(g.display.measure)&&(c=mi(e,g.doc.direction))){a.addToken=mo(a.addToken,c)}a.map=[];var d=h!=g.display.externalMeasured&&oO(e);ox(e,a,mc(g,e,d));if(e.styleClasses){if(e.styleClasses.bgClass){a.bgClass=iv(e.styleClasses.bgClass,a.bgClass||"")}if(e.styleClasses.textClass){a.textClass=iv(e.styleClasses.textClass,a.textClass||"")}}if(a.map.length==0){a.map.push(0,0,a.content.appendChild(oA(g.display.measure)))}if(b==0){h.measure.map=a.map;h.measure.cache={}}else{(h.measure.maps||(h.measure.maps=[])).push(a.map);(h.measure.caches||(h.measure.caches=[])).push({})}}if(j9){var f=a.content.lastChild;if(/\bcm-tab\b/.test(f.className)||(f.querySelector&&f.querySelector(".cm-tab"))){a.content.className="cm-tab-wrap-hack"}}o4(g,"renderLine",g,h.line,a.pre);if(a.pre.className){a.textClass=iv(a.pre.className,a.textClass||"")}return a}function iX(a){var b=jr("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b}function lc(m,v,u,k,p,b,c){if(!v){return}var a=m.splitSpaces?nZ(v,m.trailingSpace):v;var h=m.cm.state.specialChars,g=false;var j;if(!h.test(v)){m.col+=v.length;j=document.createTextNode(a);m.map.push(m.pos,m.pos+v.length,j);if(jI&&lG<9){g=true}m.pos+=v.length}else{j=document.createDocumentFragment();var e=0;while(true){h.lastIndex=e;var l=h.exec(v);var q=l?l.index-e:v.length-e;if(q){var r=document.createTextNode(a.slice(e,e+q));if(jI&&lG<9){j.appendChild(jr("span",[r]))}else{j.appendChild(r)}m.map.push(m.pos,m.pos+q,r);m.col+=q;m.pos+=q}if(!l){break}e+=q+1;var t=(void 0);if(l[0]=="\t"){var o=m.cm.options.tabSize,s=o-m.col%o;t=j.appendChild(jr("span",mU(s),"cm-tab"));t.setAttribute("role","presentation");t.setAttribute("cm-text","\t");m.col+=s}else{if(l[0]=="\r"||l[0]=="\n"){t=j.appendChild(jr("span",l[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));t.setAttribute("cm-text",l[0]);m.col+=1}else{t=m.cm.options.specialCharPlaceholder(l[0]);t.setAttribute("cm-text",l[0]);if(jI&&lG<9){j.appendChild(jr("span",[t]))}else{j.appendChild(t)}m.col+=1}}m.map.push(m.pos,m.pos+1,t);m.pos++}}m.trailingSpace=a.charCodeAt(v.length-1)==32;if(u||k||p||g||b||c){var f=u||"";if(k){f+=k}if(p){f+=p}var d=jr("span",[j],f,b);if(c){for(var n in c){if(c.hasOwnProperty(n)&&n!="style"&&n!="class"){d.setAttribute(n,c[n])}}}return m.content.appendChild(d)}m.content.appendChild(j)}function nZ(c,d){if(c.length>1&&!/  /.test(c)){return c}var a=d,b="";for(var f=0;f<c.length;f++){var e=c.charAt(f);if(e==" "&&a&&(f==c.length-1||c.charCodeAt(f+1)==32)){e="\u00a0"}b+=e;a=e==" "}return b}function mo(a,b){return function(h,g,e,l,f,j,m){e=e?e+" cm-force-border":"cm-force-border";var d=h.pos,n=d+g.length;for(;;){var c=(void 0);for(var k=0;k<b.length;k++){c=b[k];if(c.to>d&&c.from<=d){break}}if(c.to>=n){return a(h,g,e,l,f,j,m)}a(h,g.slice(0,c.to-d),e,l,null,j,m);l=null;g=g.slice(c.to-d);d=c.to}}}function om(b,e,c,a){var d=!a&&c.widgetNode;if(d){b.map.push(b.pos,b.pos+e,d)}if(!a&&b.cm.display.input.needsContentAttribute){if(!d){d=b.content.appendChild(document.createElement("span"))}d.setAttribute("cm-marker",c.id)}if(d){b.cm.display.input.setUneditable(d);b.content.appendChild(d)}b.pos+=e;b.trailingSpace=false}function ox(s,x,u){var b=s.markedSpans,y=s.text,D=0;if(!b){for(var E=1;E<u.length;E+=2){x.addToken(x,y.slice(D,D=u[E]),jJ(u[E+1],x.cm.options))}return}var p=y.length,c=0,r=1,m="",o,q;var h=0,g,j,a,e,A;for(;;){if(h==c){g=j=a=q="";A=null;e=null;h=Infinity;var C=[],w=(void 0);for(var v=0;v<b.length;++v){var t=b[v],z=t.marker;if(z.type=="bookmark"&&t.from==c&&z.widgetNode){C.push(z)}else{if(t.from<=c&&(t.to==null||t.to>c||z.collapsed&&t.to==c&&t.from==c)){if(t.to!=null&&t.to!=c&&h>t.to){h=t.to;j=""}if(z.className){g+=" "+z.className}if(z.css){q=(q?q+";":"")+z.css}if(z.startStyle&&t.from==c){a+=" "+z.startStyle}if(z.endStyle&&t.to==h){(w||(w=[])).push(z.endStyle,t.to)}if(z.title){(A||(A={})).title=z.title}if(z.attributes){for(var B in z.attributes){(A||(A={}))[B]=z.attributes[B]}}if(z.collapsed&&(!e||jt(e.marker,z)<0)){e=t}}else{if(t.from>c&&h>t.from){h=t.from}}}}if(w){for(var k=0;k<w.length;k+=2){if(w[k+1]==h){j+=" "+w[k]}}}if(!e||e.from==c){for(var l=0;l<C.length;++l){om(x,0,C[l])}}if(e&&(e.from||0)==c){om(x,(e.to==null?p+1:e.to)-c,e.marker,e.from==null);if(e.to==null){return}if(e.to==c){e=false}}}if(c>=p){break}var n=Math.min(p,h);while(true){if(m){var f=c+m.length;if(!e){var d=f>n?m.slice(0,n-c):m;x.addToken(x,d,o?o+g:g,a,c+d.length==h?j:"",q,A)}if(f>=n){m=m.slice(n-c);c=n;break}c=f;a=""}m=y.slice(D,D=u[r++]);o=jJ(u[r++],x.cm.options)}}}function oi(a,c,b){this.line=c;this.rest=l0(c);this.size=this.rest?oO(hI(this.rest))-b+1:1;this.node=this.text=null;this.hidden=hV(a,c)}function jK(c,d,e){var f=[],a;for(var g=d;g<e;g=a){var b=new oi(c.doc,kr(c.doc,g),g);a=g+b.size;f.push(b)}return f}var ou=null;function iP(a){if(ou){ou.ops.push(a)}else{a.ownsGroup=ou={ops:[a],delayedCallbacks:[]}}}function ku(d){var e=d.delayedCallbacks,a=0;do{for(;a<e.length;a++){e[a].call(null)}for(var b=0;b<d.ops.length;b++){var c=d.ops[b];if(c.cursorActivityHandlers){while(c.cursorActivityCalled<c.cursorActivityHandlers.length){c.cursorActivityHandlers[c.cursorActivityCalled++].call(null,c.cm)}}}}while(a<e.length)}function lQ(a,b){var c=a.ownsGroup;if(!c){return}try{ku(c)}finally{ou=null;b(c)}}var n6=null;function ok(c,e){var b=j4(c,e);if(!b.length){return}var g=Array.prototype.slice.call(arguments,2),d;if(ou){d=ou.delayedCallbacks}else{if(n6){d=n6}else{d=n6=[];setTimeout(oN,0)}}var a=function(h){d.push(function(){return b[h].apply(null,g)})};for(var f=0;f<b.length;++f){a(f)}}function oN(){var b=n6;n6=null;for(var a=0;a<b.length;++a){b[a]()}}function oq(c,a,e,d){for(var b=0;b<a.changes.length;b++){var f=a.changes[b];if(f=="text"){kb(c,a)}else{if(f=="gutter"){lK(c,a,e,d)}else{if(f=="class"){jT(c,a)}else{if(f=="widget"){nO(c,a,d)}}}}}a.changes=null}function hG(a){if(a.node==a.text){a.node=jr("div",null,null,"position: relative");if(a.text.parentNode){a.text.parentNode.replaceChild(a.node,a.text)}a.node.appendChild(a.text);if(jI&&lG<8){a.node.style.zIndex=2}}return a.node}function k8(c,a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b){b+=" CodeMirror-linebackground"}if(a.background){if(b){a.background.className=b}else{a.background.parentNode.removeChild(a.background);a.background=null}}else{if(b){var d=hG(a);a.background=d.insertBefore(jr("div",null,b),d.firstChild);c.display.input.setUneditable(a.background)}}}function je(c,b){var a=c.display.externalMeasured;if(a&&a.line==b.line){c.display.externalMeasured=null;b.measure=a.measure;return a.built}return jS(c,b)}function kb(c,d){var b=d.text.className;var a=je(c,d);if(d.text==d.node){d.node=a.pre}d.text.parentNode.replaceChild(a.pre,d.text);d.text=a.pre;if(a.bgClass!=d.bgClass||a.textClass!=d.textClass){d.bgClass=a.bgClass;d.textClass=a.textClass;jT(c,d)}else{if(b){d.text.className=b}}}function jT(b,a){k8(b,a);if(a.line.wrapClass){hG(a).className=a.line.wrapClass}else{if(a.node!=a.text){a.node.className=""}}var c=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=c||""}function lK(h,k,l,j){if(k.gutter){k.node.removeChild(k.gutter);k.gutter=null}if(k.gutterBackground){k.node.removeChild(k.gutterBackground);k.gutterBackground=null}if(k.line.gutterClass){var d=hG(k);k.gutterBackground=jr("div",null,"CodeMirror-gutter-background "+k.line.gutterClass,("left: "+(h.options.fixedGutter?j.fixedPos:-j.gutterTotalWidth)+"px; width: "+(j.gutterTotalWidth)+"px"));h.display.input.setUneditable(k.gutterBackground);d.insertBefore(k.gutterBackground,k.text)}var b=k.line.gutterMarkers;if(h.options.lineNumbers||b){var g=hG(k);var a=k.gutter=jr("div",null,"CodeMirror-gutter-wrapper",("left: "+(h.options.fixedGutter?j.fixedPos:-j.gutterTotalWidth)+"px"));h.display.input.setUneditable(a);g.insertBefore(a,k.text);if(k.line.gutterClass){a.className+=" "+k.line.gutterClass}if(h.options.lineNumbers&&(!b||!b["CodeMirror-linenumbers"])){k.lineNumber=a.appendChild(jr("div",lj(h.options,l),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(j.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(h.display.lineNumInnerWidth)+"px")))}if(b){for(var c=0;c<h.display.gutterSpecs.length;++c){var e=h.display.gutterSpecs[c].className,f=b.hasOwnProperty(e)&&b[e];if(f){a.appendChild(jr("div",[f],"CodeMirror-gutter-elt",("left: "+(j.gutterLeft[e])+"px; width: "+(j.gutterWidth[e])+"px")))}}}}}function nO(c,a,d){if(a.alignable){a.alignable=null}var b=mv("CodeMirror-linewidget");for(var e=a.node.firstChild,f=(void 0);e;e=f){f=e.nextSibling;if(b.test(e.className)){a.node.removeChild(e)}}hY(c,a,d)}function o3(c,a,e,d){var b=je(c,a);a.text=a.node=b.pre;if(b.bgClass){a.bgClass=b.bgClass}if(b.textClass){a.textClass=b.textClass}jT(c,a);lK(c,a,e,d);hY(c,a,d);return a.node}function hY(b,d,c){jk(b,d.line,d,c,true);if(d.rest){for(var a=0;a<d.rest.length;a++){jk(b,d.rest[a],d,c,false)}}}function jk(f,e,j,g,a){if(!e.widgets){return}var d=hG(j);for(var b=0,h=e.widgets;b<h.length;++b){var k=h[b],c=jr("div",[k.node],"CodeMirror-linewidget"+(k.className?" "+k.className:""));if(!k.handleMouseEvents){c.setAttribute("cm-ignore-events","true")}nN(k,c,j,g);f.display.input.setUneditable(c);if(a&&k.above){d.insertBefore(c,j.gutter||j.text)}else{d.appendChild(c)}ok(k,"redraw")}}function nN(e,a,c,d){if(e.noHScroll){(c.alignable||(c.alignable=[])).push(a);var b=d.wrapperWidth;a.style.left=d.fixedPos+"px";if(!e.coverGutter){b-=d.gutterTotalWidth;a.style.paddingLeft=d.gutterTotalWidth+"px"}a.style.width=b+"px"}if(e.coverGutter){a.style.zIndex=5;a.style.position="relative";if(!e.noHScroll){a.style.marginLeft=-d.gutterTotalWidth+"px"}}}function kh(a){if(a.height!=null){return a.height}var c=a.doc.cm;if(!c){return 0}if(!hB(document.body,a.node)){var b="position: relative;";if(a.coverGutter){b+="margin-left: -"+c.display.gutters.offsetWidth+"px;"}if(a.noHScroll){b+="width: "+c.display.wrapper.clientWidth+"px;"}l7(c.display.measure,jr("div",[a.node],null,b))}return a.height=a.node.parentNode.offsetHeight}function m1(b,c){for(var a=mW(c);a!=b.wrapper;a=a.parentNode){if(!a||(a.nodeType==1&&a.getAttribute("cm-ignore-events")=="true")||(a.parentNode==b.sizer&&a!=b.mover)){return true}}}function jb(a){return a.lineSpace.offsetTop}function o1(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function jn(d){if(d.cachedPaddingH){return d.cachedPaddingH}var a=l7(d.measure,jr("pre","x","CodeMirror-line-like"));var c=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle;var b={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};if(!isNaN(b.left)&&!isNaN(b.right)){d.cachedPaddingH=b}return b}function kw(a){return jM-a.display.nativeBarWidth}function lo(a){return a.display.scroller.clientWidth-kw(a)-a.display.barWidth}function ks(a){return a.display.scroller.clientHeight-kw(a)-a.display.barHeight}function nt(g,a,h){var b=g.options.lineWrapping;var k=b&&lo(g);if(!a.measure.heights||b&&a.measure.width!=k){var j=a.measure.heights=[];if(b){a.measure.width=k;var e=a.text.firstChild.getClientRects();for(var d=0;d<e.length-1;d++){var f=e[d],c=e[d+1];if(Math.abs(f.bottom-c.bottom)>2){j.push((f.bottom+c.top)/2-h.top)}}}j.push(h.bottom-h.top)}}function mE(e,b,d){if(e.line==b){return{map:e.measure.map,cache:e.measure.cache}}for(var a=0;a<e.rest.length;a++){if(e.rest[a]==b){return{map:e.measure.maps[a],cache:e.measure.caches[a]}}}for(var c=0;c<e.rest.length;c++){if(oO(e.rest[c])>d){return{map:e.measure.maps[c],cache:e.measure.caches[c],before:true}}}}function j5(c,a){a=nI(a);var d=oO(a);var b=c.display.externalMeasured=new oi(c.doc,a,d);b.lineN=d;var e=b.built=jS(c,b);b.text=e.pre;l7(c.display.lineMeasure,e.pre);return b}function kk(c,b,d,a){return nr(c,nk(c,b),d,a)}function i2(c,a){if(a>=c.display.viewFrom&&a<c.display.viewTo){return c.display.view[kZ(c,a)]}var b=c.display.externalMeasured;if(b&&a>=b.lineN&&a<b.lineN+b.size){return b}}function nk(c,a){var e=oO(a);var b=i2(c,e);if(b&&!b.text){b=null}else{if(b&&b.changes){oq(c,b,e,iZ(c));c.curOp.forceUpdate=true}}if(!b){b=j5(c,a)}var d=mE(b,a,e);return{line:a,view:b,rect:null,map:d.map,cache:d.cache,before:d.before,hasHeights:false}}function nr(c,d,f,b,g){if(d.before){f=-1}var a=f+(b||""),e;if(d.cache.hasOwnProperty(a)){e=d.cache[a]}else{if(!d.rect){d.rect=d.view.text.getBoundingClientRect()}if(!d.hasHeights){nt(c,d.view,d.rect);d.hasHeights=true}e=lM(c,d,f,b);if(!e.bogus){d.cache[a]=e}}return{left:e.left,right:e.right,top:g?e.rtop:e.top,bottom:g?e.rbottom:e.bottom}}var iH={left:0,right:0,top:0,bottom:0};function oR(c,d,g){var a,b,j,f,k,e;for(var h=0;h<c.length;h+=3){k=c[h];e=c[h+1];if(d<k){b=0;j=1;f="left"}else{if(d<e){b=d-k;j=b+1}else{if(h==c.length-3||d==e&&c[h+3]>d){j=e-k;b=j-1;if(d>=e){f="right"}}}}if(b!=null){a=c[h+2];if(k==e&&g==(a.insertLeft?"left":"right")){f=g}if(g=="left"&&b==0){while(h&&c[h-2]==c[h-3]&&c[h-1].insertLeft){a=c[(h-=3)+2];f="left"}}if(g=="right"&&b==e-k){while(h<c.length-3&&c[h+3]==c[h+4]&&!c[h+5].insertLeft){a=c[(h+=3)+2];f="right"}}break}}return{node:a,start:b,end:j,collapse:f,coverStart:k,coverEnd:e}}function jQ(a,b){var d=iH;if(b=="left"){for(var e=0;e<a.length;e++){if((d=a[e]).left!=d.right){break}}}else{for(var c=a.length-1;c>=0;c--){if((d=a[c]).left!=d.right){break}}}return d}function lM(r,s,m,b){var p=oR(s.map,m,b);var a=p.node,c=p.start,d=p.end,g=p.collapse;var f;if(a.nodeType==3){for(var v=0;v<4;v++){while(c&&j1(s.line.text.charAt(p.coverStart+c))){--c}while(p.coverStart+d<p.coverEnd&&j1(s.line.text.charAt(p.coverStart+d))){++d}if(jI&&lG<9&&c==0&&d==p.coverEnd-p.coverStart){f=a.parentNode.getBoundingClientRect()}else{f=jQ(m7(a,c,d).getClientRects(),b)}if(f.left||f.right||c==0){break}d=c;c=c-1;g="right"}if(jI&&lG<11){f=h8(r.display.measure,f)}}else{if(c>0){g=b="right"}var e;if(r.options.lineWrapping&&(e=a.getClientRects()).length>1){f=e[b=="right"?e.length-1:0]}else{f=a.getBoundingClientRect()}}if(jI&&lG<9&&!c&&(!f||!f.left&&!f.right)){var t=a.parentNode.getClientRects()[0];if(t){f={left:t.left,right:t.left+mA(r.display),top:t.top,bottom:t.bottom}}else{f=iH}}var j=f.top-s.rect.top,l=f.bottom-s.rect.top;var o=(j+l)/2;var q=s.view.measure.heights;var u=0;for(;u<q.length-1;u++){if(o<q[u]){break}}var h=u?q[u-1]:0,k=q[u];var n={left:(g=="right"?f.right:f.left)-s.rect.left,right:(g=="left"?f.left:f.right)-s.rect.left,top:h,bottom:k};if(!f.left&&!f.right){n.bogus=true}if(!r.options.singleCursorHeightPerLine){n.rtop=j;n.rbottom=l}return n}function h8(a,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!oP(a)){return d}var b=screen.logicalXDPI/screen.deviceXDPI;var c=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*b,right:d.right*b,top:d.top*c,bottom:d.bottom*c}}function pe(a){if(a.measure){a.measure.cache={};a.measure.heights=null;if(a.rest){for(var b=0;b<a.rest.length;b++){a.measure.caches[b]={}}}}}function oI(b){b.display.externalMeasure=null;kT(b.display.lineMeasure);for(var a=0;a<b.display.view.length;a++){pe(b.display.view[a])}}function n7(a){oI(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;if(!a.options.lineWrapping){a.display.maxLineChanged=true}a.display.lineNumChars=null}function mz(){if(lS&&oL){return -(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))}return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function mH(){if(lS&&oL){return -(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))}return window.pageYOffset||(document.documentElement||document.body).scrollTop}function jL(a){var b=0;if(a.widgets){for(var c=0;c<a.widgets.length;++c){if(a.widgets[c].above){b+=kh(a.widgets[c])}}}return b}function h2(h,b,j,d,c){if(!c){var g=jL(b);j.top+=g;j.bottom+=g}if(d=="line"){return j}if(!d){d="local"}var a=oQ(b);if(d=="local"){a+=jb(h.display)}else{a-=h.display.viewOffset}if(d=="page"||d=="window"){var e=h.display.lineSpace.getBoundingClientRect();a+=e.top+(d=="window"?0:mH());var f=e.left+(d=="window"?0:mz());j.left+=f;j.right+=f}j.top+=a;j.bottom+=a;return j}function hw(b,f,a){if(a=="div"){return f}var d=f.left,e=f.top;if(a=="page"){d-=mz();e-=mH()}else{if(a=="local"||!a){var g=b.display.sizer.getBoundingClientRect();d+=g.left;e+=g.top}}var c=b.display.lineSpace.getBoundingClientRect();return{left:d-c.left,top:e-c.top}}function kO(c,d,e,a,b){if(!a){a=kr(c.doc,d.line)}return h2(c,a,kk(c,a,d.ch,b),e)}function jh(h,k,c,n,f,m){n=n||kr(h.doc,k.line);if(!f){f=nk(h,n)}function a(p,q){var r=nr(h,f,p,q?"right":"left",m);if(q){r.left=r.right}else{r.right=r.left}return h2(h,n,r,c)}var o=mi(n,h.doc.direction),e=k.ch,j=k.sticky;if(e>=n.text.length){e=n.text.length;j="before"}else{if(e<=0){e=0;j="after"}}if(!o){return a(j=="before"?e-1:e,j=="before")}function g(t,s,r){var q=o[s],p=q.level==1;return a(r?t-1:t,p!=r)}var d=oX(o,e,j);var l=js;var b=g(e,d,j=="before");if(l!=null){b.other=g(e,l,j!="before")}return b}function jR(c,d){var e=0;d=hD(c.doc,d);if(!c.options.lineWrapping){e=mA(c.display)*d.ch}var b=kr(c.doc,d.line);var a=oQ(b)+jb(c.display);return{left:e,right:e,top:a,bottom:a+b.height}}function h6(c,b,f,a,d){var e=oD(c,b,f);e.xRel=d;if(a){e.outside=a}return e}function iJ(h,k,a){var j=h.doc;a+=h.display.viewOffset;if(a<0){return h6(j.first,0,null,-1,-1)}var b=o2(j,a),g=j.first+j.size-1;if(b>g){return h6(j.first+j.size-1,kr(j,g).text.length,null,1,1)}if(k<0){k=0}var c=kr(j,b);for(;;){var f=ke(h,c,b,k,a);var d=nC(c,f.ch+(f.xRel>0||f.outside>0?1:0));if(!d){return f}var e=d.find(1);if(e.line==b){return e}c=kr(j,b=e.line)}}function oE(c,a,e,d){d-=jL(a);var b=a.text.length;var f=m5(function(g){return nr(c,e,g-1).bottom<=d},b,0);b=m5(function(g){return nr(c,e,g).top>d},f,b);return{begin:f,end:b}}function oH(c,b,e,d){if(!e){e=nk(c,b)}var a=h2(c,b,nr(c,e,d),"line").top;return oE(c,b,e,a)}function nJ(b,c,d,a){return b.bottom<=d?false:b.top>d?true:(a?b.left:b.right)>c}function ke(e,g,v,b,c){c-=oQ(g);var o=nk(e,g);var q=jL(g);var u=0,f=g.text.length,k=true;var m=mi(g,e.doc.direction);if(m){var n=(e.options.lineWrapping?ib:iU)(e,g,v,o,m,b,c);k=n.level!=1;u=k?n.from:n.to-1;f=k?n.to:n.from-1}var d=null,r=null;var p=m5(function(x){var w=nr(e,o,x);w.top+=q;w.bottom+=q;if(!nJ(w,b,c,false)){return false}if(w.top<=c&&w.left<=b){d=x;r=w}return true},u,f);var h,t,a=false;if(r){var j=b-r.left<r.right-b,s=j==k;p=d+(s?0:1);t=s?"after":"before";h=j?r.left:r.right}else{if(!k&&(p==f||p==u)){p++}t=p==0?"after":p==g.text.length?"before":(nr(e,o,p-(k?1:0)).bottom+q<=c)==k?"after":"before";var l=jh(e,oD(v,p,t),"line",g,o);h=l.left;a=c<l.top?-1:c>=l.bottom?1:0}p=ka(g.text,p,1);return h6(v,p,t,a,b-h)}function iU(g,l,a,f,b,h,j){var k=m5(function(m){var o=b[m],n=o.level!=1;return nJ(jh(g,oD(a,n?o.to:o.from,n?"before":"after"),"line",l,f),h,j,true)},0,b.length-1);var c=b[k];if(k>0){var d=c.level!=1;var e=jh(g,oD(a,d?c.from:c.to,d?"after":"before"),"line",l,f);if(nJ(e,h,j,true)&&e.top>j){c=b[k-1]}}return c}function ib(g,m,j,q,p,h,k){var r=oE(g,m,q,k);var a=r.begin;var o=r.end;if(/\s/.test(m.text.charAt(o-1))){o--}var b=null,f=null;for(var n=0;n<p.length;n++){var d=p[n];if(d.from>=o||d.to<=a){continue}var c=d.level!=1;var e=nr(g,q,c?Math.min(o,d.to)-1:Math.max(a,d.from)).right;var l=e<h?h-e+1000000000:e-h;if(!b||f>l){b=d;f=l}}if(!b){b=p[p.length-1]}if(b.from<a){b={from:a,to:b.to,level:b.level}}if(b.to>o){b={from:b.from,to:o,level:b.level}}return b}var oZ;function i(c){if(c.cachedTextHeight!=null){return c.cachedTextHeight}if(oZ==null){oZ=jr("pre",null,"CodeMirror-line-like");for(var a=0;a<49;++a){oZ.appendChild(document.createTextNode("x"));oZ.appendChild(jr("br"))}oZ.appendChild(document.createTextNode("x"))}l7(c.measure,oZ);var b=oZ.offsetHeight/50;if(b>3){c.cachedTextHeight=b}kT(c.measure);return b||1}function mA(d){if(d.cachedCharWidth!=null){return d.cachedCharWidth}var c=jr("span","xxxxxxxxxx");var e=jr("pre",[c],"CodeMirror-line-like");l7(d.measure,e);var a=c.getBoundingClientRect(),b=(a.right-a.left)/10;if(b>2){d.cachedCharWidth=b}return b||10}function iZ(b){var e=b.display,g={},h={};var f=e.gutters.clientLeft;for(var c=e.gutters.firstChild,a=0;c;c=c.nextSibling,++a){var d=b.display.gutterSpecs[a].className;g[d]=c.offsetLeft+c.clientLeft+f;h[d]=c.clientWidth}return{fixedPos:i5(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:g,gutterWidth:h,wrapperWidth:e.wrapper.clientWidth}}function i5(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function mQ(c){var a=i(c.display),b=c.options.lineWrapping;var d=b&&Math.max(5,c.display.scroller.clientWidth/mA(c.display)-3);return function(f){if(hV(c.doc,f)){return 0}var g=0;if(f.widgets){for(var e=0;e<f.widgets.length;e++){if(f.widgets[e].height){g+=f.widgets[e].height}}}if(b){return g+(Math.ceil(f.text.length/d)||1)*a}else{return g+a}}}function oy(c){var a=c.doc,b=mQ(c);a.iter(function(e){var d=b(e);if(d!=e.height){jd(e,d)}})}function m2(g,m,c,b){var l=g.display;if(!c&&mW(m).getAttribute("cm-not-content")=="true"){return null}var h,k,e=l.lineSpace.getBoundingClientRect();try{h=m.clientX-e.left;k=m.clientY-e.top}catch(d){return null}var j=iJ(g,h,k),f;if(b&&j.xRel>0&&(f=kr(g.doc,j.line).text).length==j.ch){var a=ma(f,f.length,g.options.tabSize)-f.length;j=oD(j.line,Math.max(0,Math.round((h-jn(g.display).left)/mA(g.display))-a))}return j}function kZ(b,c){if(c>=b.display.viewTo){return null}c-=b.display.viewFrom;if(c<0){return null}var a=b.display.view;for(var d=0;d<a.length;d++){c-=a[d].size;if(c<0){return d}}}function od(g,j,h,f){if(j==null){j=g.doc.first}if(h==null){h=g.doc.first+g.doc.size}if(!f){f=0}var b=g.display;if(f&&h<b.viewTo&&(b.updateLineNumbers==null||b.updateLineNumbers>j)){b.updateLineNumbers=j}g.curOp.viewChanged=true;if(j>=b.viewTo){if(nd&&hk(g.doc,j)<b.viewTo){iT(g)}}else{if(h<=b.viewFrom){if(nd&&kQ(g.doc,h+f)>b.viewFrom){iT(g)}else{b.viewFrom+=f;b.viewTo+=f}}else{if(j<=b.viewFrom&&h>=b.viewTo){iT(g)}else{if(j<=b.viewFrom){var k=lN(g,h,h+f,1);if(k){b.view=b.view.slice(k.index);b.viewFrom=k.lineN;b.viewTo+=f}else{iT(g)}}else{if(h>=b.viewTo){var d=lN(g,j,j,-1);if(d){b.view=b.view.slice(0,d.index);b.viewTo=d.lineN}else{iT(g)}}else{var a=lN(g,j,j,-1);var c=lN(g,h,h+f,1);if(a&&c){b.view=b.view.slice(0,a.index).concat(jK(g,a.lineN,c.lineN)).concat(b.view.slice(c.index));b.viewTo+=f}else{iT(g)}}}}}}var e=b.externalMeasured;if(e){if(h<e.lineN){e.lineN+=f}else{if(j<e.lineN+e.size){b.externalMeasured=null}}}}function mx(b,a,e){b.curOp.viewChanged=true;var d=b.display,f=b.display.externalMeasured;if(f&&a>=f.lineN&&a<f.lineN+f.size){d.externalMeasured=null}if(a<d.viewFrom||a>=d.viewTo){return}var g=d.view[kZ(b,a)];if(g.node==null){return}var c=g.changes||(g.changes=[]);if(lz(c,e)==-1){c.push(e)}}function iT(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function lN(e,b,j,c){var h=kZ(e,b),f,g=e.display.view;if(!nd||j==e.doc.first+e.doc.size){return{index:h,lineN:j}}var d=e.display.viewFrom;for(var a=0;a<h;a++){d+=g[a].size}if(d!=b){if(c>0){if(h==g.length-1){return null}f=(d+g[h].size)-b;h++}else{f=d-b}b+=f;j+=f}while(hk(e.doc,j)!=j){if(h==(c<0?0:g.length-1)){return null}j+=c*g[h-(c<0?1:0)].size;h+=c}return{index:h,lineN:j}}function ky(c,d,e){var a=c.display,b=a.view;if(b.length==0||d>=a.viewTo||e<=a.viewFrom){a.view=jK(c,d,e);a.viewFrom=d}else{if(a.viewFrom>d){a.view=jK(c,d,a.viewFrom).concat(a.view)}else{if(a.viewFrom<d){a.view=a.view.slice(kZ(c,d))}}a.viewFrom=d;if(a.viewTo<e){a.view=a.view.concat(jK(c,a.viewTo,e))}else{if(a.viewTo>e){a.view=a.view.slice(0,kZ(c,e))}}}a.viewTo=e}function lV(b){var a=b.display.view,c=0;for(var d=0;d<a.length;d++){var e=a[d];if(!e.hidden&&(!e.node||e.changes)){++c}}return c}function nW(a){a.display.input.showSelection(a.display.input.prepareSelection())}function hF(f,d){if(d===void 0){d=true}var g=f.doc,e={};var h=e.cursors=document.createDocumentFragment();var c=e.selection=document.createDocumentFragment();for(var a=0;a<g.sel.ranges.length;a++){if(!d&&a==g.sel.primIndex){continue}var j=g.sel.ranges[a];if(j.from().line>=f.display.viewTo||j.to().line<f.display.viewFrom){continue}var b=j.empty();if(b||f.options.showCursorWhenSelecting){nA(f,j.head,h)}if(!b){nT(f,j,c)}}return e}function nA(c,f,a){var d=jh(c,f,"div",null,null,!c.options.singleCursorHeightPerLine);var e=a.appendChild(jr("div","\u00a0","CodeMirror-cursor"));e.style.left=d.left+"px";e.style.top=d.top+"px";e.style.height=Math.max(0,d.bottom-d.top)*c.options.cursorHeight+"px";if(d.other){var b=a.appendChild(jr("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));b.style.display="";b.style.left=d.other.left+"px";b.style.top=d.other.top+"px";b.style.height=(d.other.bottom-d.other.top)*0.85+"px"}}function io(a,b){return a.top-b.top||a.left-b.left}function nT(c,o,b){var l=c.display,s=c.doc;var h=document.createDocumentFragment();var p=jn(c.display),e=p.left;var k=Math.max(l.sizerWidth,lo(c)-l.sizer.offsetLeft)-p.right;var d=s.direction=="ltr";function n(u,v,w,x){if(v<0){v=0}v=Math.round(v);x=Math.round(x);h.appendChild(jr("div",null,"CodeMirror-selected",("position: absolute; left: "+u+"px;\n                             top: "+v+"px; width: "+(w==null?k-u:w)+"px;\n                             height: "+(x-v)+"px")))}function g(u,C,v){var y=kr(s,u);var x=y.text.length;var D,z;function w(E,F){return kO(c,oD(u,E),"div",y,F)}function B(E,J,I){var G=oH(c,y,null,E);var F=(J=="ltr")==(I=="after")?"left":"right";var H=I=="after"?G.begin:G.end-(/\s/.test(y.text.charAt(G.end-1))?2:1);return w(H,F)[F]}var A=mi(y,s.direction);kM(A,C||0,v==null?x:v,function(L,W,Q,I){var F=Q=="ltr";var K=w(L,F?"left":"right");var M=w(W-1,F?"right":"left");var G=C==null&&L==0,J=v==null&&W==x;var U=I==0,S=!A||I==A.length-1;if(M.top-K.top<=3){var T=(d?G:J)&&U;var R=(d?J:G)&&S;var V=T?e:(F?K:M).left;var E=R?k:(F?M:K).right;n(V,K.top,E-V,K.bottom)}else{var O,P,H,N;if(F){O=d&&G&&U?e:K.left;P=d?k:B(L,Q,"before");H=d?e:B(W,Q,"after");N=d&&J&&S?k:M.right}else{O=!d?e:B(L,Q,"before");P=!d&&G&&U?k:K.right;H=!d&&J&&S?e:M.left;N=!d?k:B(W,Q,"after")}n(O,K.top,P-O,K.bottom);if(K.bottom<M.top){n(e,K.bottom,null,M.top)}n(H,M.top,N-H,M.bottom)}if(!D||io(K,D)<0){D=K}if(io(M,D)<0){D=M}if(!z||io(K,z)<0){z=K}if(io(M,z)<0){z=M}});return{start:D,end:z}}var a=o.from(),j=o.to();if(a.line==j.line){g(a.line,a.ch,j.ch)}else{var f=kr(s,a.line),r=kr(s,j.line);var t=nI(f)==nI(r);var q=g(a.line,a.ch,t?f.text.length+1:null).end;var m=g(j.line,t?0:null,j.ch).start;if(t){if(q.top<m.top-2){n(q.right,q.top,null,q.bottom);n(e,m.top,m.left,m.bottom)}else{n(q.right,q.top,m.left-q.right,q.bottom)}}if(q.bottom<m.top){n(e,q.bottom,null,m.top)}}b.appendChild(h)}function lq(c){if(!c.state.focused){return}var a=c.display;clearInterval(a.blinker);var b=true;a.cursorDiv.style.visibility="";if(c.options.cursorBlinkRate>0){a.blinker=setInterval(function(){if(!c.hasFocus()){hl(c)}a.cursorDiv.style.visibility=(b=!b)?"":"hidden"},c.options.cursorBlinkRate)}else{if(c.options.cursorBlinkRate<0){a.cursorDiv.style.visibility="hidden"}}}function le(a){if(!a.hasFocus()){a.display.input.focus();if(!a.state.focused){oa(a)}}}function n4(a){a.state.delayingBlurEvent=true;setTimeout(function(){if(a.state.delayingBlurEvent){a.state.delayingBlurEvent=false;if(a.state.focused){hl(a)}}},100)}function oa(b,a){if(b.state.delayingBlurEvent&&!b.state.draggingText){b.state.delayingBlurEvent=false}if(b.options.readOnly=="nocursor"){return}if(!b.state.focused){o4(b,"focus",b,a);b.state.focused=true;hO(b.display.wrapper,"CodeMirror-focused");if(!b.curOp&&b.display.selForContextMenu!=b.doc.sel){b.display.input.reset();if(j9){setTimeout(function(){return b.display.input.reset(true)},20)}}b.display.input.receivedFocus()}lq(b)}function hl(b,a){if(b.state.delayingBlurEvent){return}if(b.state.focused){o4(b,"blur",b,a);b.state.focused=false;lY(b.display.wrapper,"CodeMirror-focused")}clearInterval(b.display.blinker);setTimeout(function(){if(!b.state.focused){b.display.shift=false}},150)}function m8(g){var j=g.display;var b=j.lineDiv.offsetTop;for(var a=0;a<j.view.length;a++){var f=j.view[a],m=g.options.lineWrapping;var e=(void 0),d=0;if(f.hidden){continue}if(jI&&lG<8){var k=f.node.offsetTop+f.node.offsetHeight;e=k-b;b=k}else{var n=f.node.getBoundingClientRect();e=n.bottom-n.top;if(!m&&f.text.firstChild){d=f.text.firstChild.getBoundingClientRect().right-n.left-1}}var h=f.line.height-e;if(h>0.005||h<-0.005){jd(f.line,e);k0(f.line);if(f.rest){for(var c=0;c<f.rest.length;c++){k0(f.rest[c])}}}if(d>g.display.sizerWidth){var l=Math.ceil(d/mA(g.display));if(l>g.display.maxLineLength){g.display.maxLineLength=l;g.display.maxLine=f.line;g.display.maxLineChanged=true}}}}function k0(a){if(a.widgets){for(var d=0;d<a.widgets.length;++d){var b=a.widgets[d],c=b.node.parentNode;if(c){b.height=c.offsetHeight}}}}function lk(b,g,c){var a=c&&c.top!=null?Math.max(0,c.top):b.scroller.scrollTop;a=Math.floor(a-jb(b));var e=c&&c.bottom!=null?c.bottom:a+b.wrapper.clientHeight;var j=o2(g,a),h=o2(g,e);if(c&&c.ensure){var d=c.ensure.from.line,f=c.ensure.to.line;if(d<j){j=d;h=o2(g,oQ(kr(g,d))+b.wrapper.clientHeight)}else{if(Math.min(f,g.lastLine())>=h){j=o2(g,oQ(kr(g,f))-b.wrapper.clientHeight);h=f}}}return{from:j,to:Math.max(h,j+1)}}function kK(b,f){if(hp(b,"scrollCursorIntoView")){return}var d=b.display,a=d.sizer.getBoundingClientRect(),c=null;if(f.top+a.top<0){c=true}else{if(f.bottom+a.top>(window.innerHeight||document.documentElement.clientHeight)){c=false}}if(c!=null&&!hX){var e=jr("div","\u200b",null,("position: absolute;\n                         top: "+(f.top-d.viewOffset-jb(b.display))+"px;\n                         height: "+(f.bottom-f.top+kw(b)+d.barHeight)+"px;\n                         left: "+(f.left)+"px; width: "+(Math.max(2,f.right-f.left))+"px;"));b.display.lineSpace.appendChild(e);e.scrollIntoView(c);b.display.lineSpace.removeChild(e)}}function np(f,j,a,b){if(b==null){b=0}var h;if(!f.options.lineWrapping&&j==a){j=j.ch?oD(j.line,j.sticky=="before"?j.ch-1:j.ch,"after"):j;a=j.sticky=="before"?oD(j.line,j.ch+1,"before"):j}for(var m=0;m<5;m++){var l=false;var g=jh(f,j);var e=!a||a==j?g:jh(f,a);h={left:Math.min(g.left,e.left),top:Math.min(g.top,e.top)-b,right:Math.max(g.left,e.left),bottom:Math.max(g.bottom,e.bottom)+b};var c=nb(f,h);var k=f.doc.scrollTop,d=f.doc.scrollLeft;if(c.scrollTop!=null){nD(f,c.scrollTop);if(Math.abs(f.doc.scrollTop-k)>1){l=true}}if(c.scrollLeft!=null){nQ(f,c.scrollLeft);if(Math.abs(f.doc.scrollLeft-d)>1){l=true}}if(!l){break}}return h}function nn(c,b){var a=nb(c,b);if(a.scrollTop!=null){nD(c,a.scrollTop)}if(a.scrollLeft!=null){nQ(c,a.scrollLeft)}}function nb(l,m){var o=l.display,a=i(l.display);if(m.top<0){m.top=0}var c=l.curOp&&l.curOp.scrollTop!=null?l.curOp.scrollTop:o.scroller.scrollTop;var h=ks(l),f={};if(m.bottom-m.top>h){m.bottom=m.top+h}var d=l.doc.height+o1(o);var e=m.top<a,p=m.bottom>d-a;if(m.top<c){f.scrollTop=e?0:m.top}else{if(m.bottom>c+h){var n=Math.min(m.top,(p?d:m.bottom)-h);if(n!=c){f.scrollTop=n}}}var j=l.options.fixedGutter?0:o.gutters.offsetWidth;var g=l.curOp&&l.curOp.scrollLeft!=null?l.curOp.scrollLeft:o.scroller.scrollLeft-j;var k=lo(l)-o.gutters.offsetWidth;var b=m.right-m.left>k;if(b){m.right=m.left+k}if(m.left<10){f.scrollLeft=0}else{if(m.left<g){f.scrollLeft=Math.max(0,m.left+j-(b?0:10))}else{if(m.right>k+g-3){f.scrollLeft=m.right+(b?0:10)-k}}}return f}function nP(b,a){if(a==null){return}hM(b);b.curOp.scrollTop=(b.curOp.scrollTop==null?b.doc.scrollTop:b.curOp.scrollTop)+a}function hJ(b){hM(b);var a=b.getCursor();b.curOp.scrollToPos={from:a,to:a,margin:b.options.cursorScrollMargin}}function ic(b,c,a){if(c!=null||a!=null){hM(b)}if(c!=null){b.curOp.scrollLeft=c}if(a!=null){b.curOp.scrollTop=a}}function nH(b,a){hM(b);b.curOp.scrollToPos=a}function hM(c){var b=c.curOp.scrollToPos;if(b){c.curOp.scrollToPos=null;var d=jR(c,b.from),a=jR(c,b.to);mg(c,d,a,b.margin)}}function mg(c,d,e,a){var b=nb(c,{left:Math.min(d.left,e.left),top:Math.min(d.top,e.top)-a,right:Math.max(d.right,e.right),bottom:Math.max(d.bottom,e.bottom)+a});ic(c,b.scrollLeft,b.scrollTop)}function nD(b,a){if(Math.abs(b.doc.scrollTop-a)<2){return}if(!mX){ji(b,{top:a})}mM(b,a,true);if(mX){ji(b)}kq(b,100)}function mM(c,a,b){a=Math.max(0,Math.min(c.display.scroller.scrollHeight-c.display.scroller.clientHeight,a));if(c.display.scroller.scrollTop==a&&!b){return}c.doc.scrollTop=a;c.display.scrollbars.setScrollTop(a);if(c.display.scroller.scrollTop!=a){c.display.scroller.scrollTop=a}}function nQ(c,d,a,b){d=Math.max(0,Math.min(d,c.display.scroller.scrollWidth-c.display.scroller.clientWidth));if((a?d==c.doc.scrollLeft:Math.abs(c.doc.scrollLeft-d)<2)&&!b){return}c.doc.scrollLeft=d;iz(c);if(c.display.scroller.scrollLeft!=d){c.display.scroller.scrollLeft=d}c.display.scrollbars.setScrollLeft(d)}function mI(c){var d=c.display,a=d.gutters.offsetWidth;var b=Math.round(c.doc.height+o1(c.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:c.options.fixedGutter?a:0,docHeight:b,scrollHeight:b+kw(c)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:a}}var ls=function(a,b,c){this.cm=c;var e=this.vert=jr("div",[jr("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var d=this.horiz=jr("div",[jr("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e.tabIndex=d.tabIndex=-1;a(e);a(d);lT(e,"scroll",function(){if(e.clientHeight){b(e.scrollTop,"vertical")}});lT(d,"scroll",function(){if(d.clientWidth){b(d.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(jI&&lG<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};ls.prototype.update=function(f){var e=f.scrollWidth>f.clientWidth+1;var a=f.scrollHeight>f.clientHeight+1;var d=f.nativeBarWidth;if(a){this.vert.style.display="block";this.vert.style.bottom=e?d+"px":"0";var b=f.viewHeight-(e?d:0);this.vert.firstChild.style.height=Math.max(0,f.scrollHeight-f.clientHeight+b)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(e){this.horiz.style.display="block";this.horiz.style.right=a?d+"px":"0";this.horiz.style.left=f.barLeft+"px";var c=f.viewWidth-f.barLeft-(a?d:0);this.horiz.firstChild.style.width=Math.max(0,f.scrollWidth-f.clientWidth+c)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&f.clientHeight>0){if(d==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:a?d:0,bottom:e?d:0}};ls.prototype.setScrollLeft=function(a){if(this.horiz.scrollLeft!=a){this.horiz.scrollLeft=a}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};ls.prototype.setScrollTop=function(a){if(this.vert.scrollTop!=a){this.vert.scrollTop=a}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};ls.prototype.zeroWidthHack=function(){var a=lg&&!mf?"12px":"18px";this.horiz.style.height=this.vert.style.width=a;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new hs;this.disableVert=new hs};ls.prototype.enableZeroWidthBar=function(a,c,b){a.style.pointerEvents="auto";function d(){var e=a.getBoundingClientRect();var f=b=="vert"?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1);if(f!=a){a.style.pointerEvents="none"}else{c.set(1000,d)}}c.set(1000,d)};ls.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)};var jq=function(){};jq.prototype.update=function(){return{bottom:0,right:0}};jq.prototype.setScrollLeft=function(){};jq.prototype.setScrollTop=function(){};jq.prototype.clear=function(){};function jD(e,c){if(!c){c=mI(e)}var a=e.display.barWidth,b=e.display.barHeight;hm(e,c);for(var d=0;d<4&&a!=e.display.barWidth||b!=e.display.barHeight;d++){if(a!=e.display.barWidth&&e.options.lineWrapping){m8(e)}hm(e,mI(e));a=e.display.barWidth;b=e.display.barHeight}}function hm(c,b){var d=c.display;var a=d.scrollbars.update(b);d.sizer.style.paddingRight=(d.barWidth=a.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=a.bottom)+"px";d.heightForcer.style.borderBottom=a.bottom+"px solid transparent";if(a.right&&a.bottom){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=a.bottom+"px";d.scrollbarFiller.style.width=a.right+"px"}else{d.scrollbarFiller.style.display=""}if(a.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=a.bottom+"px";d.gutterFiller.style.width=b.gutterWidth+"px"}else{d.gutterFiller.style.display=""}}var mj={"native":ls,"null":jq};function o6(a){if(a.display.scrollbars){a.display.scrollbars.clear();if(a.display.scrollbars.addClass){lY(a.display.wrapper,a.display.scrollbars.addClass)}}a.display.scrollbars=new mj[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);lT(b,"mousedown",function(){if(a.state.focused){setTimeout(function(){return a.display.input.focus()},0)}});b.setAttribute("cm-not-content","true")},function(b,c){if(c=="horizontal"){nQ(a,b)}else{nD(a,b)}},a);if(a.display.scrollbars.addClass){hO(a.display.wrapper,a.display.scrollbars.addClass)}}var kC=0;function kP(a){a.curOp={cm:a,viewChanged:false,startHeight:a.doc.height,forceUpdate:false,updateInput:0,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++kC};iP(a.curOp)}function nS(b){var a=b.curOp;if(a){lQ(a,function(d){for(var c=0;c<d.ops.length;c++){d.ops[c].cm.curOp=null}kJ(d)})}}function kJ(d){var a=d.ops;for(var b=0;b<a.length;b++){ln(a[b])}for(var c=0;c<a.length;c++){nL(a[c])}for(var e=0;e<a.length;e++){lE(a[e])}for(var f=0;f<a.length;f++){nM(a[f])}for(var g=0;g<a.length;g++){jz(a[g])}}function ln(a){var c=a.cm,b=c.display;m4(c);if(a.updateMaxLine){l2(c)}a.mustUpdate=a.viewChanged||a.forceUpdate||a.scrollTop!=null||a.scrollToPos&&(a.scrollToPos.from.line<b.viewFrom||a.scrollToPos.to.line>=b.viewTo)||b.maxLineChanged&&c.options.lineWrapping;a.update=a.mustUpdate&&new oS(c,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function nL(a){a.updatedDisplay=a.mustUpdate&&nw(a.cm,a.update)}function lE(a){var c=a.cm,b=c.display;if(a.updatedDisplay){m8(c)}a.barMeasure=mI(c);if(b.maxLineChanged&&!c.options.lineWrapping){a.adjustWidthTo=kk(c,b.maxLine,b.maxLine.text.length).left+3;c.display.sizerWidth=a.adjustWidthTo;a.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+a.adjustWidthTo+kw(c)+c.display.barWidth);a.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+a.adjustWidthTo-lo(c))}if(a.updatedDisplay||a.selectionChanged){a.preparedSelection=b.input.prepareSelection()}}function nM(a){var c=a.cm;if(a.adjustWidthTo!=null){c.display.sizer.style.minWidth=a.adjustWidthTo+"px";if(a.maxScrollLeft<c.doc.scrollLeft){nQ(c,Math.min(c.display.scroller.scrollLeft,a.maxScrollLeft),true)}c.display.maxLineChanged=false}var b=a.focus&&a.focus==jB();if(a.preparedSelection){c.display.input.showSelection(a.preparedSelection,b)}if(a.updatedDisplay||a.startHeight!=c.doc.height){jD(c,a.barMeasure)}if(a.updatedDisplay){mL(c,a.barMeasure)}if(a.selectionChanged){lq(c)}if(c.state.focused&&a.updateInput){c.display.input.reset(a.typing)}if(b){le(a.cm)}}function jz(a){var e=a.cm,h=e.display,f=e.doc;if(a.updatedDisplay){nj(e,a.update)}if(h.wheelStartX!=null&&(a.scrollTop!=null||a.scrollLeft!=null||a.scrollToPos)){h.wheelStartX=h.wheelStartY=null}if(a.scrollTop!=null){mM(e,a.scrollTop,a.forceScroll)}if(a.scrollLeft!=null){nQ(e,a.scrollLeft,true,true)}if(a.scrollToPos){var g=np(e,hD(f,a.scrollToPos.from),hD(f,a.scrollToPos.to),a.scrollToPos.margin);kK(e,g)}var j=a.maybeHiddenMarkers,d=a.maybeUnhiddenMarkers;if(j){for(var b=0;b<j.length;++b){if(!j[b].lines.length){o4(j[b],"hide")}}}if(d){for(var c=0;c<d.length;++c){if(d[c].lines.length){o4(d[c],"unhide")}}}if(h.wrapper.offsetHeight){f.scrollTop=e.display.scroller.scrollTop}if(a.changeObjs){o4(e,"changes",e,a.changeObjs)}if(a.update){a.update.finish()}}function kI(b,a){if(b.curOp){return a()}kP(b);try{return a()}finally{nS(b)}}function j7(b,a){return function(){if(b.curOp){return a.apply(b,arguments)}kP(b);try{return a.apply(b,arguments)}finally{nS(b)}}}function l6(a){return function(){if(this.curOp){return a.apply(this,arguments)}kP(this);try{return a.apply(this,arguments)}finally{nS(this)}}}function n1(a){return function(){var b=this.cm;if(!b||b.curOp){return a.apply(this,arguments)}kP(b);try{return a.apply(this,arguments)}finally{nS(b)}}}function kq(b,a){if(b.doc.highlightFrontier<b.display.viewTo){b.state.highlight.set(a,mw(kz,b))}}function kz(c){var d=c.doc;if(d.highlightFrontier>=c.display.viewTo){return}var a=+new Date+c.options.workTime;var e=jG(c,d.highlightFrontier);var b=[];d.iter(e.line,Math.min(d.first+d.size,c.display.viewTo+500),function(m){if(e.line>=c.display.viewFrom){var j=m.styles;var n=m.text.length>c.options.maxHighlightLength?lv(d.mode,e.state):null;var g=hR(c,m,e,true);if(n){e.state=n}m.styles=g.styles;var k=m.styleClasses,h=g.classes;if(h){m.styleClasses=h}else{if(k){m.styleClasses=null}}var f=!j||j.length!=m.styles.length||k!=h&&(!k||!h||k.bgClass!=h.bgClass||k.textClass!=h.textClass);for(var l=0;!f&&l<j.length;++l){f=j[l]!=m.styles[l]}if(f){b.push(e.line)}m.stateAfter=e.save();e.nextLine()}else{if(m.text.length<=c.options.maxHighlightLength){mP(c,m.text,e)}m.stateAfter=e.line%5==0?e.save():null;e.nextLine()}if(+new Date>a){kq(c,c.options.workDelay);return true}});d.highlightFrontier=e.line;d.modeFrontier=Math.max(d.modeFrontier,e.line);if(b.length){kI(c,function(){for(var f=0;f<b.length;f++){mx(c,b[f],"text")}})}}var oS=function(b,c,a){var d=b.display;this.viewport=c;this.visible=lk(d,b.doc,c);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=lo(b);this.force=a;this.dims=iZ(b);this.events=[]};oS.prototype.signal=function(a,b){if(kd(a,b)){this.events.push(arguments)}};oS.prototype.finish=function(){for(var a=0;a<this.events.length;a++){o4.apply(null,this.events[a])}};function m4(b){var a=b.display;if(!a.scrollbarsClipped&&a.scroller.offsetWidth){a.nativeBarWidth=a.scroller.offsetWidth-a.scroller.clientWidth;a.heightForcer.style.height=kw(b)+"px";a.sizer.style.marginBottom=-a.nativeBarWidth+"px";a.sizer.style.borderRightWidth=kw(b)+"px";a.scrollbarsClipped=true}}function oF(b){if(b.hasFocus()){return null}var d=jB();if(!d||!hB(b.display.lineDiv,d)){return null}var c={activeElt:d};if(window.getSelection){var a=window.getSelection();if(a.anchorNode&&a.extend&&hB(b.display.lineDiv,a.anchorNode)){c.anchorNode=a.anchorNode;c.anchorOffset=a.anchorOffset;c.focusNode=a.focusNode;c.focusOffset=a.focusOffset}}return c}function lR(b){if(!b||!b.activeElt||b.activeElt==jB()){return}b.activeElt.focus();if(!/^(INPUT|TEXTAREA)$/.test(b.activeElt.nodeName)&&b.anchorNode&&hB(document.body,b.anchorNode)&&hB(document.body,b.focusNode)){var a=window.getSelection(),c=document.createRange();c.setEnd(b.anchorNode,b.anchorOffset);c.collapse(false);a.removeAllRanges();a.addRange(c);a.extend(b.focusNode,b.focusOffset)}}function nw(f,b){var a=f.display,g=f.doc;if(b.editorIsHidden){iT(f);return false}if(!b.force&&b.visible.from>=a.viewFrom&&b.visible.to<=a.viewTo&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&lV(f)==0){return false}if(kN(f)){iT(f);b.dims=iZ(f)}var c=g.first+g.size;var j=Math.max(b.visible.from-f.options.viewportMargin,g.first);var h=Math.min(c,b.visible.to+f.options.viewportMargin);if(a.viewFrom<j&&j-a.viewFrom<20){j=Math.max(g.first,a.viewFrom)}if(a.viewTo>h&&a.viewTo-h<20){h=Math.min(c,a.viewTo)}if(nd){j=hk(f.doc,j);h=kQ(f.doc,h)}var d=j!=a.viewFrom||h!=a.viewTo||a.lastWrapHeight!=b.wrapperHeight||a.lastWrapWidth!=b.wrapperWidth;ky(f,j,h);a.viewOffset=oQ(kr(f.doc,a.viewFrom));f.display.mover.style.top=a.viewOffset+"px";var e=lV(f);if(!d&&e==0&&!b.force&&a.renderedView==a.view&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo)){return false}var k=oF(f);if(e>4){a.lineDiv.style.display="none"}na(f,a.updateLineNumbers,b.dims);if(e>4){a.lineDiv.style.display=""}a.renderedView=a.view;lR(k);kT(a.cursorDiv);kT(a.selectionDiv);a.gutters.style.height=a.sizer.style.minHeight=0;if(d){a.lastWrapHeight=b.wrapperHeight;a.lastWrapWidth=b.wrapperWidth;kq(f,400)}a.updateLineNumbers=null;return true}function nj(b,d){var c=d.viewport;for(var e=true;;e=false){if(!e||!b.options.lineWrapping||d.oldDisplayWidth==lo(b)){if(c&&c.top!=null){c={top:Math.min(b.doc.height+o1(b.display)-ks(b),c.top)}}d.visible=lk(b.display,b.doc,c);if(d.visible.from>=b.display.viewFrom&&d.visible.to<=b.display.viewTo){break}}else{if(e){d.visible=lk(b.display,b.doc,c)}}if(!nw(b,d)){break}m8(b);var a=mI(b);nW(b);jD(b,a);mL(b,a);d.force=false}d.signal(b,"update",b);if(b.display.viewFrom!=b.display.reportedViewFrom||b.display.viewTo!=b.display.reportedViewTo){d.signal(b,"viewportChange",b,b.display.viewFrom,b.display.viewTo);b.display.reportedViewFrom=b.display.viewFrom;b.display.reportedViewTo=b.display.viewTo}}function ji(b,c){var d=new oS(b,c);if(nw(b,d)){m8(b);nj(b,d);var a=mI(b);nW(b);jD(b,a);mL(b,a);d.finish()}}function na(g,b,h){var l=g.display,e=g.options.lineNumbers;var d=l.lineDiv,f=d.firstChild;function m(q){var p=q.nextSibling;if(j9&&lg&&g.display.currentWheelTarget==q){q.style.display="none"}else{q.parentNode.removeChild(q)}return p}var k=l.view,n=l.viewFrom;for(var a=0;a<k.length;a++){var o=k[a];if(o.hidden){}else{if(!o.node||o.node.parentNode!=d){var c=o3(g,o,n,h);d.insertBefore(c,f)}else{while(f!=o.node){f=m(f)}var j=e&&b!=null&&b<=n&&o.lineNumber;if(o.changes){if(lz(o.changes,"gutter")>-1){j=false}oq(g,o,n,h)}if(j){kT(o.lineNumber);o.lineNumber.appendChild(document.createTextNode(lj(g.options,n)))}f=o.node.nextSibling}}n+=o.size}while(f){f=m(f)}}function jY(a){var b=a.gutters.offsetWidth;a.sizer.style.marginLeft=b+"px"}function mL(b,a){b.display.sizer.style.minHeight=a.docHeight+"px";b.display.heightForcer.style.top=a.docHeight+"px";b.display.gutters.style.height=(a.docHeight+b.display.barHeight+kw(b))+"px"}function iz(e){var g=e.display,f=g.view;if(!g.alignWidgets&&(!g.gutters.firstChild||!e.options.fixedGutter)){return}var j=i5(g)-g.scroller.scrollLeft+e.doc.scrollLeft;var d=g.gutters.offsetWidth,c=j+"px";for(var a=0;a<f.length;a++){if(!f[a].hidden){if(e.options.fixedGutter){if(f[a].gutter){f[a].gutter.style.left=c}if(f[a].gutterBackground){f[a].gutterBackground.style.left=c}}var h=f[a].alignable;if(h){for(var b=0;b<h.length;b++){h[b].style.left=c}}}}if(e.options.fixedGutter){g.gutters.style.left=(j+d)+"px"}}function kN(c){if(!c.options.lineNumbers){return false}var e=c.doc,b=lj(c.options,e.first+e.size-1),f=c.display;if(b.length!=f.lineNumChars){var d=f.measure.appendChild(jr("div",[jr("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var a=d.firstChild.offsetWidth,g=d.offsetWidth-a;f.lineGutter.style.width="";f.lineNumInnerWidth=Math.max(a,f.lineGutter.offsetWidth-g)+1;f.lineNumWidth=f.lineNumInnerWidth+g;f.lineNumChars=f.lineNumInnerWidth?b.length:-1;f.lineGutter.style.width=f.lineNumWidth+"px";jY(c.display);return true}return false}function nv(f,a){var b=[],g=false;for(var d=0;d<f.length;d++){var e=f[d],c=null;if(typeof e!="string"){c=e.style;e=e.className}if(e=="CodeMirror-linenumbers"){if(!a){continue}else{g=true}}b.push({className:e,style:c})}if(a&&!g){b.push({className:"CodeMirror-linenumbers",style:null})}return b}function lJ(e){var b=e.gutters,c=e.gutterSpecs;kT(b);e.lineGutter=null;for(var a=0;a<c.length;++a){var f=c[a];var g=f.className;var h=f.style;var d=b.appendChild(jr("div",null,"CodeMirror-gutter "+g));if(h){d.style.cssText=h}if(g=="CodeMirror-linenumbers"){e.lineGutter=d;d.style.width=(e.lineNumWidth||1)+"px"}}b.style.display=c.length?"":"none";jY(e)}function kv(a){lJ(a.display);od(a);iz(a)}function iq(b,e,a,f){var d=this;this.input=a;d.scrollbarFiller=jr("div",null,"CodeMirror-scrollbar-filler");d.scrollbarFiller.setAttribute("cm-not-content","true");d.gutterFiller=jr("div",null,"CodeMirror-gutter-filler");d.gutterFiller.setAttribute("cm-not-content","true");d.lineDiv=i9("div",null,"CodeMirror-code");d.selectionDiv=jr("div",null,null,"position: relative; z-index: 1");d.cursorDiv=jr("div",null,"CodeMirror-cursors");d.measure=jr("div",null,"CodeMirror-measure");d.lineMeasure=jr("div",null,"CodeMirror-measure");d.lineSpace=i9("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");var c=i9("div",[d.lineSpace],"CodeMirror-lines");d.mover=jr("div",[c],null,"position: relative");d.sizer=jr("div",[d.mover],"CodeMirror-sizer");d.sizerWidth=null;d.heightForcer=jr("div",null,null,"position: absolute; height: "+jM+"px; width: 1px;");d.gutters=jr("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=jr("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=jr("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(jI&&lG<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0}if(!j9&&!(mX&&km)){d.scroller.draggable=true}if(b){if(b.appendChild){b.appendChild(d.wrapper)}else{b(d.wrapper)}}d.viewFrom=d.viewTo=e.first;d.reportedViewFrom=d.reportedViewTo=e.first;d.view=[];d.renderedView=null;d.externalMeasured=null;d.viewOffset=0;d.lastWrapHeight=d.lastWrapWidth=0;d.updateLineNumbers=null;d.nativeBarWidth=d.barHeight=d.barWidth=0;d.scrollbarsClipped=false;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.alignWidgets=false;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=false;d.selForContextMenu=null;d.activeTouch=null;d.gutterSpecs=nv(f.gutters,f.lineNumbers);lJ(d);a.init(d)}var j6=0,nu=null;if(jI){nu=-0.53}else{if(mX){nu=15}else{if(lS){nu=-0.7}else{if(o5){nu=-1/3}}}}function kB(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;if(b==null&&a.detail&&a.axis==a.HORIZONTAL_AXIS){b=a.detail}if(c==null&&a.detail&&a.axis==a.VERTICAL_AXIS){c=a.detail}else{if(c==null){c=a.wheelDelta}}return{x:b,y:c}}function o9(b){var a=kB(b);a.x*=nu;a.y*=nu;return a}function mb(j,p){var g=kB(p),e=g.x,f=g.y;var n=j.display,k=n.scroller;var a=k.scrollWidth>k.clientWidth;var b=k.scrollHeight>k.clientHeight;if(!(e&&a||f&&b)){return}if(f&&lg&&j9){outer:for(var h=p.target,l=n.view;h!=k;h=h.parentNode){for(var c=0;c<l.length;c++){if(l[c].node==h){j.display.currentWheelTarget=h;break outer}}}}if(e&&!mX&&!kR&&nu!=null){if(f&&b){nD(j,Math.max(0,k.scrollTop+f*nu))}nQ(j,Math.max(0,k.scrollLeft+e*nu));if(!f||(f&&b)){nV(p)}n.wheelStartX=null;return}if(f&&nu!=null){var d=f*nu;var m=j.doc.scrollTop,o=m+n.wrapper.clientHeight;if(d<0){m=Math.max(0,m+d-50)}else{o=Math.min(j.doc.height,o+d+50)}ji(j,{top:m,bottom:o})}if(j6<20){if(n.wheelStartX==null){n.wheelStartX=k.scrollLeft;n.wheelStartY=k.scrollTop;n.wheelDX=e;n.wheelDY=f;setTimeout(function(){if(n.wheelStartX==null){return}var q=k.scrollLeft-n.wheelStartX;var s=k.scrollTop-n.wheelStartY;var r=(s&&n.wheelDY&&s/n.wheelDY)||(q&&n.wheelDX&&q/n.wheelDX);n.wheelStartX=n.wheelStartY=null;if(!r){return}nu=(nu*j6+r)/(j6+1);++j6},200)}else{n.wheelDX+=e;n.wheelDY+=f}}}var h3=function(b,a){this.ranges=b;this.primIndex=a};h3.prototype.primary=function(){return this.ranges[this.primIndex]};h3.prototype.equals=function(b){if(b==this){return true}if(b.primIndex!=this.primIndex||b.ranges.length!=this.ranges.length){return false}for(var d=0;d<this.ranges.length;d++){var a=this.ranges[d],c=b.ranges[d];if(!oB(a.anchor,c.anchor)||!oB(a.head,c.head)){return false}}return true};h3.prototype.deepCopy=function(){var b=[];for(var a=0;a<this.ranges.length;a++){b[a]=new i6(nq(this.ranges[a].anchor),nq(this.ranges[a].head))}return new h3(b,this.primIndex)};h3.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++){if(!this.ranges[a].empty()){return true}}return false};h3.prototype.contains=function(c,b){if(!b){b=c}for(var d=0;d<this.ranges.length;d++){var a=this.ranges[d];if(nz(b,a.from())>=0&&nz(c,a.to())<=0){return d}}return -1};var i6=function(b,a){this.anchor=b;this.head=a};i6.prototype.from=function(){return ph(this.anchor,this.head)};i6.prototype.to=function(){return n9(this.anchor,this.head)};i6.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function mr(f,d,g){var l=f&&f.options.selectionsMayTouch;var b=d[g];d.sort(function(n,o){return nz(n.from(),o.from())});g=lz(d,b);for(var m=1;m<d.length;m++){var e=d[m],c=d[m-1];var h=nz(c.to(),e.from());if(l&&!e.empty()?h>0:h>=0){var j=ph(c.from(),e.from()),k=n9(c.to(),e.to());var a=c.empty()?e.from()==e.head:c.from()==c.head;if(m<=g){--g}d.splice(--m,2,new i6(a?k:j,a?j:k))}}return new h3(d,g)}function jU(b,a){return new h3([new i6(b,a||b)],0)}function kj(a){if(!a.text){return a.to}return oD(a.from.line+a.text.length-1,hI(a.text).length+(a.text.length==1?a.from.ch:0))}function lI(d,a){if(nz(d,a.from)<0){return d}if(nz(d,a.to)<=0){return kj(a)}var c=d.line+a.text.length-(a.to.line-a.from.line)-1,b=d.ch;if(d.line==a.to.line){b+=kj(a).ch-a.to.ch}return oD(c,b)}function kg(d,c){var a=[];for(var e=0;e<d.sel.ranges.length;e++){var b=d.sel.ranges[e];a.push(new i6(lI(b.anchor,c),lI(b.head,c)))}return mr(d.cm,a,d.sel.primIndex)}function oj(a,b,c){if(a.line==b.line){return oD(c.line,a.ch-b.ch+c.ch)}else{return oD(c.line+(a.line-b.line),a.ch)}}function oh(f,j,c){var b=[];var d=oD(f.first,0),e=d;for(var m=0;m<j.length;m++){var k=j[m];var g=oj(k.from,d,e);var h=oj(kj(k),d,e);d=k.to;e=h;if(c=="around"){var l=f.sel.ranges[m],a=nz(l.head,l.anchor)<0;b[m]=new i6(a?h:g,a?g:h)}else{b[m]=new i6(g,g)}}return new h3(b,f.sel.primIndex)}function op(a){a.doc.mode=hP(a.options,a.doc.modeOption);j0(a)}function j0(a){a.doc.iter(function(b){if(b.stateAfter){b.stateAfter=null}if(b.styles){b.styles=null}});a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first;kq(a,100);a.state.modeGen++;if(a.curOp){od(a)}}function jp(b,a){return a.from.ch==0&&a.to.ch==0&&hI(a.text)==""&&(!b.cm||b.cm.options.wholeLineUpdateBefore)}function hS(a,p,d,r){function e(t){return d?d[t]:null}function q(v,t,u){jX(v,t,u,r);ok(v,"change",v,p)}function l(t,v){var w=[];for(var u=t;u<v;++u){w.push(new jg(n[u],e(u),r))}return w}var k=p.from,g=p.to,n=p.text;var o=kr(a,k.line),h=kr(a,g.line);var f=hI(n),j=e(n.length-1),m=g.line-k.line;if(p.full){a.insert(0,l(0,n.length));a.remove(n.length,a.size-n.length)}else{if(jp(a,p)){var s=l(0,n.length-1);q(h,h.text,j);if(m){a.remove(k.line,m)}if(s.length){a.insert(k.line,s)}}else{if(o==h){if(n.length==1){q(o,o.text.slice(0,k.ch)+f+o.text.slice(g.ch),j)}else{var b=l(1,n.length-1);b.push(new jg(f+o.text.slice(g.ch),j,r));q(o,o.text.slice(0,k.ch)+n[0],e(0));a.insert(k.line+1,b)}}else{if(n.length==1){q(o,o.text.slice(0,k.ch)+n[0]+h.text.slice(g.ch),e(0));a.remove(k.line+1,m)}else{q(o,o.text.slice(0,k.ch)+n[0],e(0));q(h,f+h.text.slice(g.ch),j);var c=l(1,n.length-1);if(m>1){a.remove(k.line+1,m-1)}a.insert(k.line+1,c)}}}}ok(a,"change",a,p)}function kH(d,a,b){function c(e,g,j){if(e.linked){for(var h=0;h<e.linked.length;++h){var k=e.linked[h];if(k.doc==g){continue}var f=j&&k.sharedHist;if(b&&!f){continue}a(k.doc,f);c(k.doc,e,f)}}}c(d,null,true)}function kx(b,a){if(a.cm){throw new Error("This document is already in use.")}b.doc=a;a.cm=b;oy(b);op(b);ny(b);if(!b.options.lineWrapping){l2(b)}b.options.mode=a.modeOption;od(b)}function ny(a){(a.doc.direction=="rtl"?hO:lY)(a.display.lineDiv,"CodeMirror-rtl")}function iY(a){kI(a,function(){ny(a);od(a)})}function ix(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=a||1}function mS(c,a){var b={from:nq(a.from),to:kj(a),text:jm(c,a.from,a.to)};lL(c,b,a.from.line,a.to.line+1);kH(c,function(d){return lL(d,b,a.from.line,a.to.line+1)},true);return b}function hN(a){while(a.length){var b=hI(a);if(b.ranges){a.pop()}else{break}}}function ia(a,b){if(b){hN(a.done);return hI(a.done)}else{if(a.done.length&&!hI(a.done).ranges){return hI(a.done)}else{if(a.done.length>1&&!a.done[a.done.length-2].ranges){a.done.pop();return hI(a.done)}}}}function iS(h,a,e,b){var c=h.history;c.undone.length=0;var d=+new Date,g;var f;if((c.lastOp==b||c.lastOrigin==a.origin&&a.origin&&((a.origin.charAt(0)=="+"&&c.lastModTime>d-(h.cm?h.cm.options.historyEventDelay:500))||a.origin.charAt(0)=="*"))&&(g=ia(c,c.lastOp==b))){f=hI(g.changes);if(nz(a.from,a.to)==0&&nz(a.from,f.to)==0){f.to=kj(a)}else{g.changes.push(mS(h,a))}}else{var j=hI(c.done);if(!j||!j.ranges){kE(h.sel,c.done)}g={changes:[mS(h,a)],generation:c.generation};c.done.push(g);while(c.done.length>c.undoDepth){c.done.shift();if(!c.done[0].ranges){c.done.shift()}}}c.done.push(e);c.generation=++c.maxGeneration;c.lastModTime=c.lastSelTime=d;c.lastOp=c.lastSelOp=b;c.lastOrigin=c.lastSelOrigin=a.origin;if(!f){o4(h,"historyAdded")}}function n0(d,c,a,e){var b=c.charAt(0);return b=="*"||b=="+"&&a.ranges.length==e.ranges.length&&a.somethingSelected()==e.somethingSelected()&&new Date-d.history.lastSelTime<=(d.cm?d.cm.options.historyEventDelay:500)}function hz(d,f,c,a){var e=d.history,b=a&&a.origin;if(c==e.lastSelOp||(b&&e.lastSelOrigin==b&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==b||n0(d,b,hI(e.done),f)))){e.done[e.done.length-1]=f}else{kE(f,e.done)}e.lastSelTime=+new Date;e.lastSelOrigin=b;e.lastSelOp=c;if(a&&a.clearRedo!==false){hN(e.undone)}}function kE(b,c){var a=hI(c);if(!(a&&a.ranges&&a.equals(b))){c.push(b)}}function lL(b,d,e,f){var c=d["spans_"+b.id],a=0;b.iter(Math.max(b.first,e),Math.min(b.first+b.size,f),function(g){if(g.markedSpans){(c||(c=d["spans_"+b.id]={}))[a]=g.markedSpans}++a})}function mn(c){if(!c){return null}var b;for(var a=0;a<c.length;++a){if(c[a].marker.explicitlyCleared){if(!b){b=c.slice(0,a)}}else{if(b){b.push(c[a])}}}return !b?c:b.length?b:null}function lp(d,c){var e=c["spans_"+d.id];if(!e){return null}var b=[];for(var a=0;a<c.text.length;++a){b.push(mn(e[a]))}return b}function kD(f,h){var d=lp(f,h);var e=j8(f,h);if(!d){return e}if(!e){return d}for(var a=0;a<d.length;++a){var k=d[a],j=e[a];if(k&&j){spans:for(var b=0;b<j.length;++b){var g=j[b];for(var c=0;c<k.length;++c){if(k[c].marker==g.marker){continue spans}}k.push(g)}}else{if(j){d[a]=j}}}return d}function oK(e,a,f){var c=[];for(var k=0;k<e.length;++k){var b=e[k];if(b.ranges){c.push(f?h3.prototype.deepCopy.call(b):b);continue}var h=b.changes,g=[];c.push({changes:g});for(var l=0;l<h.length;++l){var j=h[l],m=(void 0);g.push({from:j.from,to:j.to,text:j.text});if(a){for(var d in j){if(m=d.match(/^spans_(\d+)$/)){if(lz(a,Number(m[1]))>-1){hI(g)[d]=j[d];delete j[d]}}}}}}return c}function hW(b,e,c,d){if(d){var f=b.anchor;if(c){var a=nz(e,f)<0;if(a!=(nz(c,f)<0)){f=e;e=c}else{if(a!=(nz(e,c)<0)){e=c}}}return new i6(f,e)}else{return new i6(c||e,e)}}function ii(e,a,c,b,d){if(d==null){d=e.cm&&(e.cm.display.shift||e.extend)}lZ(e,new h3([hW(e.sel.primary(),a,c,d)],0),b)}function pd(d,e,g){var a=[];var c=d.cm&&(d.cm.display.shift||d.extend);for(var f=0;f<d.sel.ranges.length;f++){a[f]=hW(d.sel.ranges[f],e[f],null,c)}var b=mr(d.cm,a,d.sel.primIndex);lZ(d,b,g)}function l5(c,d,a,e){var b=c.sel.ranges.slice(0);b[d]=a;lZ(c,mr(c.cm,b,c.sel.primIndex),e)}function nf(d,b,a,c){lZ(d,jU(b,a),c)}function me(d,b,c){var a={ranges:b.ranges,update:function(f){this.ranges=[];for(var e=0;e<f.length;e++){this.ranges[e]=new i6(hD(d,f[e].anchor),hD(d,f[e].head))}},origin:c&&c.origin};o4(d,"beforeSelectionChange",d,a);if(d.cm){o4(d.cm,"beforeSelectionChange",d.cm,a)}if(a.ranges!=b.ranges){return mr(d.cm,a.ranges,a.ranges.length-1)}else{return b}}function jc(d,e,b){var c=d.history.done,a=hI(c);if(a&&a.ranges){c[c.length-1]=e;ly(d,e,b)}else{lZ(d,e,b)}}function lZ(a,b,c){ly(a,b,c);hz(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function ly(d,a,b){if(kd(d,"beforeSelectionChange")||d.cm&&kd(d.cm,"beforeSelectionChange")){a=me(d,a,b)}var c=b&&b.bias||(nz(a.primary().head,d.sel.primary().head)<0?-1:1);l9(d,lt(d,a,c,true));if(!(b&&b.scroll===false)&&d.cm){hJ(d.cm)}}function l9(a,b){if(b.equals(a.sel)){return}a.sel=b;if(a.cm){a.cm.curOp.updateInput=1;a.cm.curOp.selectionChanged=true;oG(a.cm)}ok(a,"cursorActivity",a)}function iQ(a){l9(a,lt(a,a.sel,null,false))}function lt(e,d,h,g){var a;for(var k=0;k<d.ranges.length;k++){var j=d.ranges[k];var c=d.ranges.length==e.sel.ranges.length&&e.sel.ranges[k];var f=lX(e,j.anchor,c&&c.anchor,h,g);var b=lX(e,j.head,c&&c.head,h,g);if(a||f!=j.anchor||b!=j.head){if(!a){a=d.ranges.slice(0,k)}a[k]=new i6(f,b)}}return a?mr(e.cm,a,d.primIndex):d}function il(f,j,o,a,l){var e=kr(f,j.line);if(e.markedSpans){for(var n=0;n<e.markedSpans.length;++n){var c=e.markedSpans[n],b=c.marker;var d=("selectLeft" in b)?!b.selectLeft:b.inclusiveLeft;var g=("selectRight" in b)?!b.selectRight:b.inclusiveRight;if((c.from==null||(d?c.from<=j.ch:c.from<j.ch))&&(c.to==null||(g?c.to>=j.ch:c.to>j.ch))){if(l){o4(b,"beforeCursorEnter");if(b.explicitlyCleared){if(!e.markedSpans){break}else{--n;continue}}}if(!b.atomic){continue}if(o){var k=b.find(a<0?1:-1),h=(void 0);if(a<0?g:d){k=hv(f,k,-a,k&&k.line==j.line?e:null)}if(k&&k.line==j.line&&(h=nz(k,o))&&(a<0?h<0:h>0)){return il(f,k,j,a,l)}}var m=b.find(a<0?-1:1);if(a<0?d:g){m=hv(f,m,a,m.line==j.line?e:null)}return m?il(f,m,j,a,l):null}}}return j}function lX(e,d,g,b,c){var a=b||1;var f=il(e,d,g,a,c)||(!c&&il(e,d,g,a,true))||il(e,d,g,-a,c)||(!c&&il(e,d,g,-a,true));if(!f){e.cantEdit=true;return oD(e.first,0)}return f}function hv(a,d,b,c){if(b<0&&d.ch==0){if(d.line>a.first){return hD(a,oD(d.line-1))}else{return null}}else{if(b>0&&d.ch==(c||kr(a,d.line)).text.length){if(d.line<a.first+a.size-1){return oD(d.line+1,0)}else{return null}}else{return new oD(d.line,d.ch+b)}}}function nU(a){a.setSelection(oD(a.firstLine(),0),oD(a.lastLine()),ot)}function jv(b,d,a){var c={canceled:false,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return c.canceled=true}};if(a){c.update=function(e,f,g,h){if(e){c.from=hD(b,e)}if(f){c.to=hD(b,f)}if(g){c.text=g}if(h!==undefined){c.origin=h}}}o4(b,"beforeChange",b,c);if(b.cm){o4(b.cm,"beforeChange",b.cm,c)}if(c.canceled){if(b.cm){b.cm.curOp.updateInput=2}return null}return{from:c.from,to:c.to,text:c.text,origin:c.origin}}function mG(d,c,e){if(d.cm){if(!d.cm.curOp){return j7(d.cm,mG)(d,c,e)}if(d.cm.state.suppressEdits){return}}if(kd(d,"beforeChange")||d.cm&&kd(d.cm,"beforeChange")){c=jv(d,c,true);if(!c){return}}var a=hx&&!e&&kS(d,c.from,c.to);if(a){for(var b=a.length-1;b>=0;--b){m0(d,{from:a[b].from,to:a[b].to,text:b?[""]:c.text,origin:c.origin})}}else{m0(d,c)}}function m0(a,d){if(d.text.length==1&&d.text[0]==""&&nz(d.from,d.to)==0){return}var b=kg(a,d);iS(a,d,b,a.cm?a.cm.curOp.id:NaN);kt(a,d,b,j8(a,d));var c=[];kH(a,function(e,f){if(!f&&lz(c,e.history)==-1){mu(e.history,d);c.push(e.history)}kt(e,d,null,j8(e,d))})}function lb(f,j,e){var h=f.cm&&f.cm.state.suppressEdits;if(h&&!e){return}var k=f.history,c,a=f.sel;var d=j=="undo"?k.done:k.undone,g=j=="undo"?k.undone:k.done;var n=0;for(;n<d.length;n++){c=d[n];if(e?c.ranges&&!c.equals(f.sel):!c.ranges){break}}if(n==d.length){return}k.lastOrigin=k.lastSelOrigin=null;for(;;){c=d.pop();if(c.ranges){kE(c,g);if(e&&!c.equals(f.sel)){lZ(f,c,{clearRedo:false});return}a=c}else{if(h){d.push(c);return}else{break}}}var l=[];kE(a,g);g.push({changes:l,generation:k.generation});k.generation=c.generation||++k.maxGeneration;var b=kd(f,"beforeChange")||f.cm&&kd(f.cm,"beforeChange");var m=function(r){var q=c.changes[r];q.origin=j;if(b&&!jv(f,q,false)){d.length=0;return{}}l.push(mS(f,q));var s=r?kg(f,q):hI(d);kt(f,q,s,kD(f,q));if(!r&&f.cm){f.cm.scrollIntoView({from:q.from,to:kj(q)})}var t=[];kH(f,function(v,u){if(!u&&lz(t,v.history)==-1){mu(v.history,q);t.push(v.history)}kt(v,q,null,kD(v,q))})};for(var p=c.changes.length-1;p>=0;--p){var o=m(p);if(o){return o.v}}}function j3(b,d){if(d==0){return}b.first+=d;b.sel=new h3(l4(b.sel.ranges,function(e){return new i6(oD(e.anchor.line+d,e.anchor.ch),oD(e.head.line+d,e.head.ch))}),b.sel.primIndex);if(b.cm){od(b.cm,b.first,b.first-d,d);for(var a=b.cm.display,c=a.viewFrom;c<a.viewTo;c++){mx(b.cm,c,"gutter")}}}function kt(e,d,f,b){if(e.cm&&!e.cm.curOp){return j7(e.cm,kt)(e,d,f,b)}if(d.to.line<e.first){j3(e,d.text.length-1-(d.to.line-d.from.line));return}if(d.from.line>e.lastLine()){return}if(d.from.line<e.first){var c=d.text.length-1-(e.first-d.from.line);j3(e,c);d={from:oD(e.first,0),to:oD(d.to.line+c,d.to.ch),text:[hI(d.text)],origin:d.origin}}var a=e.lastLine();if(d.to.line>a){d={from:d.from,to:oD(a,kr(e,a).text.length),text:[d.text[0]],origin:d.origin}}d.removed=jm(e,d.from,d.to);if(!f){f=kg(e,d)}if(e.cm){oV(e.cm,d,b)}else{hS(e,d,b)}ly(e,f,ot);if(e.cantEdit&&lX(e,oD(e.firstLine(),0))){e.cantEdit=false}}function oV(g,l,n){var h=g.doc,m=g.display,k=l.from,j=l.to;var e=false,a=k.line;if(!g.options.lineWrapping){a=oO(nI(kr(h,k.line)));h.iter(a,j.line+1,function(o){if(o==m.maxLine){e=true;return true}})}if(h.sel.contains(l.from,l.to)>-1){oG(g)}hS(h,l,n,mQ(g));if(!g.options.lineWrapping){h.iter(a,k.line+l.text.length,function(p){var o=jZ(p);if(o>m.maxLineLength){m.maxLine=p;m.maxLineLength=o;m.maxLineChanged=true;e=false}});if(e){g.curOp.updateMaxLine=true}}hy(h,k.line);kq(g,400);var f=l.text.length-(j.line-k.line)-1;if(l.full){od(g)}else{if(k.line==j.line&&l.text.length==1&&!jp(g.doc,l)){mx(g,k.line,"text")}else{od(g,k.line,j.line+1,f)}}var c=kd(g,"changes"),b=kd(g,"change");if(b||c){var d={from:k,to:j,text:l.text,removed:l.removed,origin:l.origin};if(b){ok(g,"change",g,d)}if(c){(g.curOp.changeObjs||(g.curOp.changeObjs=[])).push(d)}}g.display.selForContextMenu=null}function nx(f,a,d,e,b){var c;if(!e){e=d}if(nz(e,d)<0){(c=[e,d],d=c[0],e=c[1])}if(typeof a=="string"){a=f.splitLines(a)}mG(f,{from:d,to:e,text:a,origin:b})}function m6(d,a,b,c){if(b<d.line){d.line+=c}else{if(a<d.line){d.line=a;d.ch=0}}}function kl(k,h,g,f){for(var a=0;a<k.length;++a){var d=k[a],j=true;if(d.ranges){if(!d.copied){d=k[a]=d.deepCopy();d.copied=true}for(var b=0;b<d.ranges.length;b++){m6(d.ranges[b].anchor,h,g,f);m6(d.ranges[b].head,h,g,f)}continue}for(var c=0;c<d.changes.length;++c){var e=d.changes[c];if(g<e.from.line){e.from=oD(e.from.line+f,e.from.ch);e.to=oD(e.to.line+f,e.to.ch)}else{if(h<=e.to.line){j=false;break}}}if(!j){k.splice(0,a+1);a=0}}}function mu(b,d){var e=d.from.line,a=d.to.line,c=d.text.length-(a-e)-1;kl(b.done,e,a,c);kl(b.undone,e,a,c)}function iL(f,a,c,d){var e=a,b=a;if(typeof a=="number"){b=kr(f,jW(f,a))}else{e=oO(a)}if(e==null){return null}if(d(b,e)&&f.cm){mx(f.cm,e,c)}return b}function jA(a){this.lines=a;this.parent=null;var b=0;for(var c=0;c<a.length;++c){a[c].parent=this;b+=a[c].height}this.height=b}jA.prototype={chunkSize:function(){return this.lines.length},removeInner:function(b,c){for(var e=b,d=b+c;e<d;++e){var a=this.lines[e];this.height-=a.height;nY(a);ok(a,"delete")}this.lines.splice(b,c)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,d,b){this.height+=b;this.lines=this.lines.slice(0,a).concat(d).concat(this.lines.slice(a));for(var c=0;c<d.length;++c){d[c].parent=this}},iterN:function(c,d,a){for(var b=c+d;c<b;++c){if(a(this.lines[c])){return true}}}};function hT(d){this.children=d;var e=0,b=0;for(var a=0;a<d.length;++a){var c=d[a];e+=c.chunkSize();b+=c.height;c.parent=this}this.size=e;this.height=b;this.parent=null}hT.prototype={chunkSize:function(){return this.size},removeInner:function(b,c){this.size-=c;for(var h=0;h<this.children.length;++h){var d=this.children[h],f=d.chunkSize();if(b<f){var g=Math.min(c,f-b),e=d.height;d.removeInner(b,g);this.height-=e-d.height;if(f==g){this.children.splice(h--,1);d.parent=null}if((c-=g)==0){break}b=0}else{b-=f}}if(this.size-c<25&&(this.children.length>1||!(this.children[0] instanceof jA))){var a=[];this.collapse(a);this.children=[new jA(a)];this.children[0].parent=this}},collapse:function(b){for(var a=0;a<this.children.length;++a){this.children[a].collapse(b)}},insertInner:function(c,e,f){this.size+=e.length;this.height+=f;for(var a=0;a<this.children.length;++a){var d=this.children[a],h=d.chunkSize();if(c<=h){d.insertInner(c,e,f);if(d.lines&&d.lines.length>50){var b=d.lines.length%25+25;for(var g=b;g<d.lines.length;){var j=new jA(d.lines.slice(g,g+=25));d.height-=j.height;this.children.splice(++a,0,j);j.parent=this}d.lines=d.lines.slice(0,b);this.maybeSpill()}break}c-=h}},maybeSpill:function(){if(this.children.length<=10){return}var e=this;do{var b=e.children.splice(e.children.length-5,5);var a=new hT(b);if(!e.parent){var d=new hT(e.children);d.parent=e;e.children=[d,a];e=d}else{e.size-=a.size;e.height-=a.height;var c=lz(e.parent.children,e);e.parent.children.splice(c+1,0,a)}a.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(b,c,d){for(var a=0;a<this.children.length;++a){var e=this.children[a],f=e.chunkSize();if(b<f){var g=Math.min(c,f-b);if(e.iterN(b,g,d)){return true}if((c-=g)==0){break}b=0}else{b-=f}}}};var mD=function(d,a,c){if(c){for(var b in c){if(c.hasOwnProperty(b)){this[b]=c[b]}}}this.doc=d;this.node=a};mD.prototype.clear=function(){var a=this.doc.cm,e=this.line.widgets,f=this.line,c=oO(f);if(c==null||!e){return}for(var d=0;d<e.length;++d){if(e[d]==this){e.splice(d--,1)}}if(!e.length){f.widgets=null}var b=kh(this);jd(f,Math.max(0,f.height-b));if(a){kI(a,function(){i0(a,f,-b);mx(a,c,"widget")});ok(a,"lineWidgetCleared",a,this,c)}};mD.prototype.changed=function(){var d=this;var b=this.height,c=this.doc.cm,a=this.line;this.height=null;var e=kh(this)-b;if(!e){return}if(!hV(this.doc,a)){jd(a,a.height+e)}if(c){kI(c,function(){c.curOp.forceUpdate=true;i0(c,a,e);ok(c,"lineWidgetChanged",c,d,oO(a))})}};n3(mD);function i0(c,b,a){if(oQ(b)<((c.curOp&&c.curOp.scrollTop)||c.doc.scrollTop)){nP(c,a)}}function nK(d,e,a,b){var f=new mD(d,a,b);var c=d.cm;if(c&&f.noHScroll){c.display.alignWidgets=true}iL(d,e,"widget",function(h){var g=h.widgets||(h.widgets=[]);if(f.insertAt==null){g.push(f)}else{g.splice(Math.min(g.length,Math.max(0,f.insertAt)),0,f)}f.line=h;if(c&&!hV(d,h)){var j=oQ(h)<d.scrollTop;jd(h,h.height+kh(f));if(j){nP(c,f.height)}c.curOp.forceUpdate=true}return true});if(c){ok(c,"lineWidgetAdded",c,f,typeof e=="number"?e:oO(e))}return f}var nm=0;var mC=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++nm};mC.prototype.clear=function(){if(this.explicitlyCleared){return}var g=this.doc.cm,b=g&&!g.curOp;if(b){kP(g)}if(kd(this,"clear")){var f=this.find();if(f){ok(this,"clear",f.from,f.to)}}var a=null,j=null;for(var l=0;l<this.lines.length;++l){var e=this.lines[l];var h=i7(e.markedSpans,this);if(g&&!this.collapsed){mx(g,oO(e),"text")}else{if(g){if(h.to!=null){j=oO(e)}if(h.from!=null){a=oO(e)}}}e.markedSpans=im(e.markedSpans,h);if(h.from==null&&this.collapsed&&!hV(this.doc,e)&&g){jd(e,i(g.display))}}if(g&&this.collapsed&&!g.options.lineWrapping){for(var c=0;c<this.lines.length;++c){var d=nI(this.lines[c]),k=jZ(d);if(k>g.display.maxLineLength){g.display.maxLine=d;g.display.maxLineLength=k;g.display.maxLineChanged=true}}}if(a!=null&&g&&this.collapsed){od(g,a,j+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(g){iQ(g.doc)}}if(g){ok(g,"markerCleared",g,this,a,j)}if(b){nS(g)}if(this.parent){this.parent.clear()}};mC.prototype.find=function(f,a){if(f==null&&this.type=="bookmark"){f=1}var c,d;for(var g=0;g<this.lines.length;++g){var b=this.lines[g];var e=i7(b.markedSpans,this);if(e.from!=null){c=oD(a?b:oO(b),e.from);if(f==-1){return c}}if(e.to!=null){d=oD(a?b:oO(b),e.to);if(f==1){return d}}}return c&&{from:c,to:d}};mC.prototype.changed=function(){var d=this;var a=this.find(-1,true),b=this,c=this.doc.cm;if(!a||!c){return}kI(c,function(){var h=a.line,g=oO(a.line);var j=i2(c,g);if(j){pe(j);c.curOp.selectionChanged=c.curOp.forceUpdate=true}c.curOp.updateMaxLine=true;if(!hV(b.doc,h)&&b.height!=null){var e=b.height;b.height=null;var f=kh(b)-e;if(f){jd(h,h.height+f)}}ok(c,"markerChanged",c,d)})};mC.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;if(!a.maybeHiddenMarkers||lz(a.maybeHiddenMarkers,this)==-1){(a.maybeUnhiddenMarkers||(a.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(b)};mC.prototype.detachLine=function(b){this.lines.splice(lz(this.lines,b),1);if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this)}};n3(mC);function iw(g,j,h,e,l){if(e&&e.shared){return mN(g,j,h,e,l)}if(g.cm&&!g.cm.curOp){return j7(g.cm,iw)(g,j,h,e,l)}var a=new mC(g,l),f=nz(j,h);if(e){oJ(e,a,false)}if(f>0||f==0&&a.clearWhenEmpty!==false){return a}if(a.replacedWith){a.collapsed=true;a.widgetNode=i9("span",[a.replacedWith],"CodeMirror-widget");if(!e.handleMouseEvents){a.widgetNode.setAttribute("cm-ignore-events","true")}if(e.insertLeft){a.widgetNode.insertLeft=true}}if(a.collapsed){if(nG(g,j.line,j,h,a)||j.line!=h.line&&nG(g,h.line,j,h,a)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}ob()}if(a.addToHistory){iS(g,{from:j,to:h,origin:"markText"},g.sel,NaN)}var c=j.line,k=g.cm,d;g.iter(c,h.line+1,function(m){if(k&&a.collapsed&&!k.options.lineWrapping&&nI(m)==k.display.maxLine){d=true}if(a.collapsed&&c!=j.line){jd(m,0)}nF(m,new kc(a,c==j.line?j.ch:null,c==h.line?h.ch:null));++c});if(a.collapsed){g.iter(j.line,h.line+1,function(m){if(hV(g,m)){jd(m,0)}})}if(a.clearOnEnter){lT(a,"beforeCursorEnter",function(){return a.clear()})}if(a.readOnly){hQ();if(g.history.done.length||g.history.undone.length){g.clearHistory()}}if(a.collapsed){a.id=++nm;a.atomic=true}if(k){if(d){k.curOp.updateMaxLine=true}if(a.collapsed){od(k,j.line,h.line+1)}else{if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title){for(var b=j.line;b<=h.line;b++){mx(k,b,"text")}}}if(a.atomic){iQ(k.doc)}ok(k,"markerAdded",k,a)}return a}var kV=function(c,a){this.markers=c;this.primary=a;for(var b=0;b<c.length;++b){c[b].parent=this}};kV.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var a=0;a<this.markers.length;++a){this.markers[a].clear()}ok(this,"clear")};kV.prototype.find=function(a,b){return this.primary.find(a,b)};n3(kV);function mN(g,d,e,c,a){c=oJ(c);c.shared=false;var f=[iw(g,d,e,c,a)],b=f[0];var h=c.widgetNode;kH(g,function(j){if(h){c.widgetNode=h.cloneNode(true)}f.push(iw(j,hD(j,d),hD(j,e),c,a));for(var k=0;k<j.linked.length;++k){if(j.linked[k].isParent){return}}b=hI(f)});return new kV(f,b)}function h5(a){return a.findMarks(oD(a.first,0),a.clipPos(oD(a.lastLine())),function(b){return b.parent})}function mq(e,d){for(var g=0;g<d.length;g++){var a=d[g],c=a.find();var b=e.clipPos(c.from),f=e.clipPos(c.to);if(nz(b,f)){var h=iw(e,b,f,a.primary,a.primary.type);a.markers.push(h);h.parent=a}}}function lD(c){var b=function(f){var h=c[f],d=[h.primary.doc];kH(h.primary.doc,function(j){return d.push(j)});for(var g=0;g<h.markers.length;g++){var e=h.markers[g];if(lz(d,e.doc)==-1){e.parent=null;h.markers.splice(g--,1)}}};for(var a=0;a<c.length;a++){b(a)}}var mK=0;var pf=function(e,f,c,a,b){if(!(this instanceof pf)){return new pf(e,f,c,a,b)}if(c==null){c=0}hT.call(this,[new jA([new jg("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=c;var d=oD(c,0);this.sel=jU(d);this.history=new ix(null);this.id=++mK;this.modeOption=f;this.lineSep=a;this.direction=(b=="rtl")?"rtl":"ltr";this.extend=false;if(typeof e=="string"){e=this.splitLines(e)}hS(this,{from:d,to:d,text:e});lZ(this,jU(d),ot)};pf.prototype=ne(hT.prototype,{constructor:pf,iter:function(a,b,c){if(c){this.iterN(a-this.first,b-a,c)}else{this.iterN(this.first,this.first+this.size,a)}},insert:function(a,d){var b=0;for(var c=0;c<d.length;++c){b+=d[c].height}this.insertInner(a-this.first,d,b)},remove:function(b,a){this.removeInner(b-this.first,a)},getValue:function(a){var b=ns(this,this.first,this.first+this.size);if(a===false){return b}return b.join(a||this.lineSeparator())},setValue:n1(function(b){var a=oD(this.first,0),c=this.first+this.size-1;mG(this,{from:a,to:oD(c,kr(this,c).text.length),text:this.splitLines(b),origin:"setValue",full:true},true);if(this.cm){ic(this.cm,0,0)}lZ(this,jU(a),ot)}),replaceRange:function(b,d,a,c){d=hD(this,d);a=a?hD(this,a):d;nx(this,b,d,a,c)},getRange:function(d,a,b){var c=jm(this,hD(this,d),hD(this,a));if(b===false){return c}return c.join(b||this.lineSeparator())},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){if(k6(this,a)){return kr(this,a)}},getLineNumber:function(a){return oO(a)},getLineHandleVisualStart:function(a){if(typeof a=="number"){a=kr(this,a)}return nI(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return hD(this,a)},getCursor:function(a){var c=this.sel.primary(),b;if(a==null||a=="head"){b=c.head}else{if(a=="anchor"){b=c.anchor}else{if(a=="end"||a=="to"||a===false){b=c.to()}else{b=c.from()}}}return b},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:n1(function(c,a,b){nf(this,hD(this,typeof c=="number"?oD(c,a||0):c),null,b)}),setSelection:n1(function(b,a,c){nf(this,hD(this,b),hD(this,a||b),c)}),extendSelection:n1(function(a,c,b){ii(this,hD(this,a),c&&hD(this,c),b)}),extendSelections:n1(function(a,b){pd(this,iW(this,a),b)}),extendSelectionsBy:n1(function(a,c){var b=l4(this.sel.ranges,a);pd(this,iW(this,b),c)}),setSelections:n1(function(b,c,e){if(!b.length){return}var a=[];for(var d=0;d<b.length;d++){a[d]=new i6(hD(this,b[d].anchor),hD(this,b[d].head))}if(c==null){c=Math.min(b.length-1,this.sel.primIndex)}lZ(this,mr(this.cm,a,c),e)}),addSelection:n1(function(a,d,b){var c=this.sel.ranges.slice(0);c.push(new i6(hD(this,a),hD(this,d||a)));lZ(this,mr(this.cm,c,c.length-1),b)}),getSelection:function(c){var a=this.sel.ranges,b;for(var e=0;e<a.length;e++){var d=jm(this,a[e].from(),a[e].to());b=b?b.concat(d):d}if(c===false){return b}else{return b.join(c||this.lineSeparator())}},getSelections:function(c){var d=[],b=this.sel.ranges;for(var a=0;a<b.length;a++){var e=jm(this,b[a].from(),b[a].to());if(c!==false){e=e.join(c||this.lineSeparator())}d[a]=e}return d},replaceSelection:function(e,c,b){var d=[];for(var a=0;a<this.sel.ranges.length;a++){d[a]=e}this.replaceSelections(d,c,b||"+input")},replaceSelections:n1(function(d,g,e){var f=[],a=this.sel;for(var j=0;j<a.ranges.length;j++){var h=a.ranges[j];f[j]={from:h.from(),to:h.to(),text:this.splitLines(d[j]),origin:e}}var c=g&&g!="end"&&oh(this,f,g);for(var b=f.length-1;b>=0;b--){mG(this,f[b])}if(c){jc(this,c)}else{if(this.cm){hJ(this.cm)}}}),undo:n1(function(){lb(this,"undo")}),redo:n1(function(){lb(this,"redo")}),undoSelection:n1(function(){lb(this,"undo",true)}),redoSelection:n1(function(){lb(this,"redo",true)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){var d=this.history,b=0,e=0;for(var a=0;a<d.done.length;a++){if(!d.done[a].ranges){++b}}for(var c=0;c<d.undone.length;c++){if(!d.undone[c].ranges){++e}}return{undo:b,redo:e}},clearHistory:function(){var a=this;this.history=new ix(this.history.maxGeneration);kH(this,function(b){return b.history=a.history},true)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(a){if(a){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:oK(this.history.done),undone:oK(this.history.undone)}},setHistory:function(a){var b=this.history=new ix(this.history.maxGeneration);b.done=oK(a.done.slice(0),null,true);b.undone=oK(a.undone.slice(0),null,true)},setGutterMarker:n1(function(c,b,a){return iL(this,c,"gutter",function(e){var d=e.gutterMarkers||(e.gutterMarkers={});d[b]=a;if(!a&&jN(d)){e.gutterMarkers=null}return true})}),clearGutter:n1(function(b){var a=this;this.iter(function(c){if(c.gutterMarkers&&c.gutterMarkers[b]){iL(a,c,"gutter",function(){c.gutterMarkers[b]=null;if(jN(c.gutterMarkers)){c.gutterMarkers=null}return true})}})}),lineInfo:function(b){var a;if(typeof b=="number"){if(!k6(this,b)){return null}a=b;b=kr(this,b);if(!b){return null}}else{a=oO(b);if(a==null){return null}}return{line:a,handle:b,text:b.text,gutterMarkers:b.gutterMarkers,textClass:b.textClass,bgClass:b.bgClass,wrapClass:b.wrapClass,widgets:b.widgets}},addLineClass:n1(function(a,b,c){return iL(this,a,b=="gutter"?"gutter":"class",function(e){var d=b=="text"?"textClass":b=="background"?"bgClass":b=="gutter"?"gutterClass":"wrapClass";if(!e[d]){e[d]=c}else{if(mv(c).test(e[d])){return false}else{e[d]+=" "+c}}return true})}),removeLineClass:n1(function(a,b,c){return iL(this,a,b=="gutter"?"gutter":"class",function(g){var d=b=="text"?"textClass":b=="background"?"bgClass":b=="gutter"?"gutterClass":"wrapClass";var e=g[d];if(!e){return false}else{if(c==null){g[d]=null}else{var f=e.match(mv(c));if(!f){return false}var h=f.index+f[0].length;g[d]=e.slice(0,f.index)+(!f.index||h==e.length?"":" ")+e.slice(h)||null}}return true})}),addLineWidget:n1(function(a,b,c){return nK(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return iw(this,hD(this,a),hD(this,b),c,c&&c.type||"range")},setBookmark:function(a,c){var b={replacedWith:c&&(c.nodeType==null?c.widget:c),insertLeft:c&&c.insertLeft,clearWhenEmpty:false,shared:c&&c.shared,handleMouseEvents:c&&c.handleMouseEvents};a=hD(this,a);return iw(this,a,a,b,"bookmark")},findMarksAt:function(c){c=hD(this,c);var d=[],a=kr(this,c.line).markedSpans;if(a){for(var b=0;b<a.length;++b){var e=a[b];if((e.from==null||e.from<=c.ch)&&(e.to==null||e.to>=c.ch)){d.push(e.marker.parent||e.marker)}}}return d},findMarks:function(d,e,c){d=hD(this,d);e=hD(this,e);var b=[],a=d.line;this.iter(d.line,e.line+1,function(j){var g=j.markedSpans;if(g){for(var h=0;h<g.length;h++){var f=g[h];if(!(f.to!=null&&a==d.line&&d.ch>=f.to||f.from==null&&a!=d.line||f.from!=null&&a==e.line&&f.from>=e.ch)&&(!c||c(f.marker))){b.push(f.marker.parent||f.marker)}}}++a});return b},getAllMarks:function(){var a=[];this.iter(function(b){var c=b.markedSpans;if(c){for(var d=0;d<c.length;++d){if(c[d].from!=null){a.push(c[d].marker)}}}});return a},posFromIndex:function(a){var c,d=this.first,b=this.lineSeparator().length;this.iter(function(f){var e=f.text.length+b;if(e>a){c=a;return true}a-=e;++d});return hD(this,oD(d,c))},indexFromPos:function(a){a=hD(this,a);var c=a.ch;if(a.line<this.first||a.ch<0){return 0}var b=this.lineSeparator().length;this.iter(this.first,a.line,function(d){c+=d.text.length+b});return c},copy:function(b){var a=new pf(ns(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);a.scrollTop=this.scrollTop;a.scrollLeft=this.scrollLeft;a.sel=this.sel;a.extend=false;if(b){a.history.undoDepth=this.history.undoDepth;a.setHistory(this.getHistory())}return a},linkedDoc:function(c){if(!c){c={}}var d=this.first,a=this.first+this.size;if(c.from!=null&&c.from>d){d=c.from}if(c.to!=null&&c.to<a){a=c.to}var b=new pf(ns(this,d,a),c.mode||this.modeOption,d,this.lineSep,this.direction);if(c.sharedHist){b.history=this.history}(this.linked||(this.linked=[])).push({doc:b,sharedHist:c.sharedHist});b.linked=[{doc:this,isParent:true,sharedHist:c.sharedHist}];mq(b,h5(this));return b},unlinkDoc:function(a){if(a instanceof nc){a=a.doc}if(this.linked){for(var d=0;d<this.linked.length;++d){var c=this.linked[d];if(c.doc!=a){continue}this.linked.splice(d,1);a.unlinkDoc(this);lD(h5(this));break}}if(a.history==this.history){var b=[a.id];kH(a,function(e){return b.push(e.id)},true);a.history=new ix(null);a.history.done=oK(this.history.done,b);a.history.undone=oK(this.history.undone,b)}},iterLinkedDocs:function(a){kH(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){if(this.lineSep){return a.split(this.lineSep)}return iD(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:n1(function(a){if(a!="rtl"){a="ltr"}if(a==this.direction){return}this.direction=a;this.iter(function(b){return b.order=null});if(this.cm){iY(this.cm)}})});pf.prototype.eachLine=pf.prototype.iter;var og=0;function mp(j){var g=this;lW(g);if(hp(g,j)||m1(g.display,j)){return}nV(j);if(jI){og=+new Date}var h=m2(g,j,true),c=j.dataTransfer.files;if(!h||g.isReadOnly()){return}if(c&&c.length&&window.FileReader&&window.File){var n=c.length,e=Array(n),b=0;var a=function(){if(++b==n){j7(g,function(){h=hD(g.doc,h);var p={from:h,to:h,text:g.doc.splitLines(e.filter(function(q){return q!=null}).join(g.doc.lineSeparator())),origin:"paste"};mG(g.doc,p);jc(g.doc,jU(hD(g.doc,h),hD(g.doc,kj(p))))})()}};var f=function(r,p){if(g.options.allowDropFileTypes&&lz(g.options.allowDropFileTypes,r.type)==-1){a();return}var q=new FileReader;q.onerror=function(){return a()};q.onload=function(){var s=q.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(s)){a();return}e[p]=s;a()};q.readAsText(r)};for(var k=0;k<c.length;k++){f(c[k],k)}}else{if(g.state.draggingText&&g.doc.sel.contains(h)>-1){g.state.draggingText(j);setTimeout(function(){return g.display.input.focus()},20);return}try{var d=j.dataTransfer.getData("Text");if(d){var l;if(g.state.draggingText&&!g.state.draggingText.copy){l=g.listSelections()}ly(g.doc,jU(h,h));if(l){for(var o=0;o<l.length;++o){nx(g.doc,"",l[o].anchor,l[o].head,"drag")}}g.replaceSelection(d,"around","paste");g.display.input.focus()}}catch(m){}}}function mF(c,a){if(jI&&(!c.state.draggingText||+new Date-og<100)){lr(a);return}if(hp(c,a)||m1(c.display,a)){return}a.dataTransfer.setData("Text",c.getSelection());a.dataTransfer.effectAllowed="copyMove";if(a.dataTransfer.setDragImage&&!o5){var b=jr("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(kR){b.width=b.height=1;c.display.wrapper.appendChild(b);b._top=b.offsetTop}a.dataTransfer.setDragImage(b,0,0);if(kR){b.parentNode.removeChild(b)}}}function hu(c,b){var d=m2(c,b);if(!d){return}var a=document.createDocumentFragment();nA(c,d,a);if(!c.display.dragCursor){c.display.dragCursor=jr("div",null,"CodeMirror-cursors CodeMirror-dragcursors");c.display.lineSpace.insertBefore(c.display.dragCursor,c.display.cursorDiv)}l7(c.display.dragCursor,a)}function lW(a){if(a.display.dragCursor){a.display.lineSpace.removeChild(a.display.dragCursor);a.display.dragCursor=null}}function o8(c){if(!document.getElementsByClassName){return}var d=document.getElementsByClassName("CodeMirror"),e=[];for(var a=0;a<d.length;a++){var b=d[a].CodeMirror;if(b){e.push(b)}}if(e.length){e[0].operation(function(){for(var f=0;f<e.length;f++){c(e[f])}})}}var n2=false;function mt(){if(n2){return}hK();n2=true}function hK(){var a;lT(window,"resize",function(){if(a==null){a=setTimeout(function(){a=null;o8(hn)},100)}});lT(window,"blur",function(){return o8(hl)})}function hn(b){var a=b.display;a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null;a.scrollbarsClipped=false;b.setSize()}var ko={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var hU=0;hU<10;hU++){ko[hU+48]=ko[hU+96]=String(hU)}for(var iy=65;iy<=90;iy++){ko[iy]=String.fromCharCode(iy)}for(var iA=1;iA<=12;iA++){ko[iA+111]=ko[iA+63235]="F"+iA}var i3={};i3.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};i3.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};i3.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};i3.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};i3["default"]=lg?i3.macDefault:i3.pcDefault;function mZ(a){var c=a.split(/-(?!$)/);a=c[c.length-1];var d,e,b,f;for(var g=0;g<c.length-1;g++){var h=c[g];if(/^(cmd|meta|m)$/i.test(h)){f=true}else{if(/^a(lt)?$/i.test(h)){d=true}else{if(/^(c|ctrl|control)$/i.test(h)){e=true}else{if(/^s(hift)?$/i.test(h)){b=true}else{throw new Error("Unrecognized modifier name: "+h)}}}}}if(d){a="Alt-"+a}if(e){a="Ctrl-"+a}if(f){a="Cmd-"+a}if(b){a="Shift-"+a}return a}function nR(g){var c={};for(var h in g){if(g.hasOwnProperty(h)){var f=g[h];if(/^(name|fallthrough|(de|at)tach)$/.test(h)){continue}if(f=="..."){delete g[h];continue}var e=l4(h.split(" "),mZ);for(var j=0;j<e.length;j++){var a=(void 0),b=(void 0);if(j==e.length-1){b=e.join(" ");a=f}else{b=e.slice(0,j+1).join(" ");a="..."}var k=c[b];if(!k){c[b]=a}else{if(k!=a){throw new Error("Inconsistent bindings for "+b)}}}delete g[h]}}for(var d in c){g[d]=c[d]}return g}function lP(f,c,d,g){c=ik(c);var e=c.call?c.call(f,g):c[f];if(e===false){return"nothing"}if(e==="..."){return"multi"}if(e!=null&&d(e)){return"handled"}if(c.fallthrough){if(Object.prototype.toString.call(c.fallthrough)!="[object Array]"){return lP(f,c.fallthrough,d,g)}for(var a=0;a<c.fallthrough.length;a++){var b=lP(f,c.fallthrough[a],d,g);if(b){return b}}}}function iI(a){var b=typeof a=="string"?a:ko[a.keyCode];return b=="Ctrl"||b=="Alt"||b=="Shift"||b=="Mod"}function id(c,b,d){var a=c;if(b.altKey&&a!="Alt"){c="Alt-"+c}if((md?b.metaKey:b.ctrlKey)&&a!="Ctrl"){c="Ctrl-"+c}if((md?b.ctrlKey:b.metaKey)&&a!="Mod"){c="Cmd-"+c}if(!d&&b.shiftKey&&a!="Shift"){c="Shift-"+c}return c}function h0(b,a){if(kR&&b.keyCode==34&&b["char"]){return false}var c=ko[b.keyCode];if(c==null||b.altGraphKey){return false}if(b.keyCode==3&&b.code){c=b.code}return id(c,b,a)}function ik(a){return typeof a=="string"?i3[a]:a}function jF(b,c){var a=b.doc.sel.ranges,e=[];for(var f=0;f<a.length;f++){var g=c(a[f]);while(e.length&&nz(g.from,hI(e).to)<=0){var d=e.pop();if(nz(d.from,g.from)<0){g.from=d.from;break}}e.push(g)}kI(b,function(){for(var h=e.length-1;h>=0;h--){nx(b.doc,"",e[h].from,e[h].to,"+delete")}hJ(b)})}function ov(c,a,b){var d=ka(c.text,a+b,b);return d<0||d>c.text.length?null:d}function n8(c,d,b){var a=ov(c,d.ch,b);return a==null?null:new oD(d.line,a,b<0?"after":"before")}function iM(d,h,l,m,b){if(d){if(h.doc.direction=="rtl"){b=-b}var a=mi(l,h.doc.direction);if(a){var c=b<0?hI(a):a[0];var f=(b<0)==(c.level==1);var j=f?"after":"before";var e;if(c.level>0||h.doc.direction=="rtl"){var k=nk(h,l);e=b<0?l.text.length-1:0;var g=nr(h,k,e).top;e=m5(function(n){return nr(h,k,n).top==g},(b<0)==(c.level==1)?c.from:c.to-1,e);if(j=="before"){e=ov(l,e,1)}}else{e=b<0?c.to:c.from}return new oD(m,e,j)}}return new oD(m,b<0?l.text.length:0,b<0?"before":"after")}function k5(l,f,a,p){var j=mi(f,l.doc.direction);if(!j){return n8(f,a,p)}if(a.ch>=f.text.length){a.ch=f.text.length;a.sticky="before"}else{if(a.ch<=0){a.ch=0;a.sticky="after"}}var b=oX(j,a.ch,a.sticky),r=j[b];if(l.doc.direction=="ltr"&&r.level%2==0&&(p>0?r.to>a.ch:r.from<a.ch)){return n8(f,a,p)}var h=function(s,t){return ov(f,s instanceof oD?s.ch:s,t)};var o;var k=function(s){if(!l.options.lineWrapping){return{begin:0,end:f.text.length}}o=o||nk(l,f);return oH(l,f,o,s)};var q=k(a.sticky=="before"?h(a,-1):a.ch);if(l.doc.direction=="rtl"||r.level==1){var g=(r.level==1)==(p<0);var d=h(a,g?1:-1);if(d!=null&&(!g?d>=r.from&&d>=q.begin:d<=r.to&&d<=q.end)){var m=g?"before":"after";return new oD(a.line,d,m)}}var c=function(y,v,s){var w=function(z,A){return A?new oD(a.line,h(z,1),"before"):new oD(a.line,z,"after")};for(;y>=0&&y<j.length;y+=v){var x=j[y];var u=(v>0)==(x.level!=1);var t=u?s.begin:h(s.end,-1);if(x.from<=t&&t<x.to){return w(t,u)}t=u?x.from:h(x.to,-1);if(s.begin<=t&&t<s.end){return w(t,u)}}};var n=c(b+p,p,q);if(n){return n}var e=p>0?q.end:h(q.begin,-1);if(e!=null&&!(p>0&&e==f.text.length)){n=c(p>0?0:j.length-1,p,k(e));if(n){return n}}return null}var iC={selectAll:nU,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),ot)},killLine:function(a){return jF(a,function(b){if(b.empty()){var c=kr(a.doc,b.head.line).text.length;if(b.head.ch==c&&b.head.line<a.lastLine()){return{from:b.head,to:oD(b.head.line+1,0)}}else{return{from:b.head,to:oD(b.head.line,c)}}}else{return{from:b.from(),to:b.to()}}})},deleteLine:function(a){return jF(a,function(b){return({from:oD(b.from().line,0),to:hD(a.doc,oD(b.to().line+1,0))})})},delLineLeft:function(a){return jF(a,function(b){return({from:oD(b.from().line,0),to:b.from()})})},delWrappedLineLeft:function(a){return jF(a,function(c){var d=a.charCoords(c.head,"div").top+5;var b=a.coordsChar({left:0,top:d},"div");return{from:b,to:c.from()}})},delWrappedLineRight:function(a){return jF(a,function(c){var d=a.charCoords(c.head,"div").top+5;var b=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:d},"div");return{from:c.from(),to:b}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(oD(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(oD(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return ol(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return jO(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){return jw(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(c){var b=a.cursorCoords(c.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},kn)},goLineLeft:function(a){return a.extendSelectionsBy(function(c){var b=a.cursorCoords(c.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},kn)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(c){var b=a.cursorCoords(c.head,"div").top+5;var d=a.coordsChar({left:0,top:b},"div");if(d.ch<a.getLine(d.line).search(/\S/)){return jO(a,c.head)}return d},kn)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"codepoint")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertSoftTab:function(b){var g=[],a=b.listSelections(),d=b.options.tabSize;for(var e=0;e<a.length;e++){var c=a[e].from();var f=ma(b.getLine(c.line),c.ch,d);g.push(mU(d-f%d))}b.replaceSelections(g)},defaultTab:function(a){if(a.somethingSelected()){a.indentSelection("add")}else{a.execCommand("insertTab")}},transposeChars:function(a){return kI(a,function(){var g=a.listSelections(),b=[];for(var f=0;f<g.length;f++){if(!g[f].empty()){continue}var d=g[f].head,c=kr(a.doc,d.line).text;if(c){if(d.ch==c.length){d=new oD(d.line,d.ch-1)}if(d.ch>0){d=new oD(d.line,d.ch+1);a.replaceRange(c.charAt(d.ch-1)+c.charAt(d.ch-2),oD(d.line,d.ch-2),d,"+transpose")}else{if(d.line>a.doc.first){var e=kr(a.doc,d.line-1).text;if(e){d=new oD(d.line,1);a.replaceRange(c.charAt(0)+a.doc.lineSeparator()+e.charAt(e.length-1),oD(d.line-1,e.length-1),d,"+transpose")}}}}b.push(new i6(d,d))}a.setSelections(b)})},newlineAndIndent:function(a){return kI(a,function(){var c=a.listSelections();for(var b=c.length-1;b>=0;b--){a.replaceRange(a.doc.lineSeparator(),c[b].anchor,c[b].head,"+input")}c=a.listSelections();for(var d=0;d<c.length;d++){a.indentLine(c[d].from().line,null,true)}hJ(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}};function ol(c,a){var b=kr(c.doc,a);var d=nI(b);if(d!=b){a=oO(d)}return iM(true,c,d,a,1)}function jw(c,a){var b=kr(c.doc,a);var d=nh(b);if(d!=b){a=oO(d)}return iM(true,c,b,a,-1)}function jO(b,d){var e=ol(b,d.line);var a=kr(b.doc,e.line);var c=mi(a,b.doc.direction);if(!c||c[0].level==0){var f=Math.max(e.ch,a.text.search(/\S/));var g=d.line==e.line&&d.ch<=f&&d.ch;return oD(e.line,g?0:f,e.sticky)}return e}function iE(b,d,c){if(typeof d=="string"){d=iC[d];if(!d){return false}}b.display.input.ensurePolled();var e=b.display.shift,a=false;try{if(b.isReadOnly()){b.state.suppressEdits=true}if(c){b.display.shift=false}a=d(b)!=kX}finally{b.display.shift=e;b.state.suppressEdits=false}return a}function kG(a,e,c){for(var d=0;d<a.state.keyMaps.length;d++){var b=lP(e,a.state.keyMaps[d],c,a);if(b){return b}}return(a.options.extraKeys&&lP(e,a.options.extraKeys,c,a))||lP(e,a.options.keyMap,c,a)}var jE=new hs;function mR(c,a,d,e){var b=c.state.keySeq;if(b){if(iI(a)){return"handled"}if(/\'$/.test(a)){c.state.keySeq=null}else{jE.set(50,function(){if(c.state.keySeq==b){c.state.keySeq=null;c.display.input.reset()}})}if(nl(c,b+" "+a,d,e)){return true}}return nl(c,a,d,e)}function nl(b,a,d,e){var c=kG(b,a,e);if(c=="multi"){b.state.keySeq=a}if(c=="handled"){ok(b,"keyHandled",b,a,d)}if(c=="handled"||c=="multi"){nV(d);lq(b)}return !!c}function ki(c,a){var b=h0(a,true);if(!b){return false}if(a.shiftKey&&!c.state.keySeq){return mR(c,"Shift-"+b,a,function(d){return iE(c,d,true)})||mR(c,b,a,function(d){if(typeof d=="string"?/^go[A-Z]/.test(d):d.motion){return iE(c,d)}})}else{return mR(c,b,a,function(d){return iE(c,d)})}}function kf(c,a,b){return mR(c,"'"+b+"'",a,function(d){return iE(c,d,true)})}var la=null;function lm(d){var c=this;if(d.target&&d.target!=c.display.input.getField()){return}c.curOp.focus=jB();if(hp(c,d)){return}if(jI&&lG<11&&d.keyCode==27){d.returnValue=false}var b=d.keyCode;c.display.shift=b==16||d.shiftKey;var a=ki(c,d);if(kR){la=a?b:null;if(!a&&b==88&&!l1&&(lg?d.metaKey:d.ctrlKey)){c.replaceSelection("",null,"cut")}}if(mX&&!lg&&!a&&b==46&&d.shiftKey&&!d.ctrlKey&&document.execCommand){document.execCommand("cut")}if(b==18&&!/\bCodeMirror-crosshair\b/.test(c.display.lineDiv.className)){pg(c)}}function pg(b){var a=b.display.lineDiv;hO(a,"CodeMirror-crosshair");function c(d){if(d.keyCode==18||!d.altKey){lY(a,"CodeMirror-crosshair");kp(document,"keyup",c);kp(document,"mouseover",c)}}lT(document,"keyup",c);lT(document,"mouseover",c)}function mB(a){if(a.keyCode==16){this.doc.sel.shift=false}hp(this,a)}function mm(d){var c=this;if(d.target&&d.target!=c.display.input.getField()){return}if(m1(c.display,d)||hp(c,d)||d.ctrlKey&&!d.altKey||lg&&d.metaKey){return}var e=d.keyCode,b=d.charCode;if(kR&&e==la){la=null;nV(d);return}if((kR&&(!d.which||d.which<10))&&ki(c,d)){return}var a=String.fromCharCode(b==null?e:b);if(a=="\x08"){return}if(kf(c,d,a)){return}c.display.input.onKeyPress(d)}var jV=400;var lh=function(b,a,c){this.time=b;this.pos=a;this.button=c};lh.prototype.compare=function(b,a,c){return this.time+jV>b&&nz(a,this.pos)==0&&c==this.button};var ld,lO;function ni(a,b){var c=+new Date;if(lO&&lO.compare(c,a,b)){ld=lO=null;return"triple"}else{if(ld&&ld.compare(c,a,b)){lO=new lh(c,a,b);ld=null;return"double"}else{ld=new lh(c,a,b);lO=null;return"single"}}}function k9(e){var c=this,f=c.display;if(hp(c,e)||f.activeTouch&&f.input.supportsTouch()){return}f.input.ensurePolled();f.shift=e.shiftKey;if(m1(f,e)){if(!j9){f.scroller.draggable=false;setTimeout(function(){return f.scroller.draggable=true},100)}return}if(lC(c,e)){return}var d=m2(c,e),b=iN(e),a=d?ni(d,b):"single";window.focus();if(b==1&&c.state.selectingText){c.state.selectingText(e)}if(d&&kL(c,b,d,a,e)){return}if(b==1){if(d){pc(c,d,a,e)}else{if(mW(e)==f.scroller){nV(e)}}}else{if(b==2){if(d){ii(c.doc,d)}setTimeout(function(){return f.input.focus()},20)}else{if(b==3){if(i1){c.display.input.onContextMenu(e)}else{n4(c)}}}}}function kL(c,a,d,e,f){var b="Click";if(e=="double"){b="Double"+b}else{if(e=="triple"){b="Triple"+b}}b=(a==1?"Left":a==2?"Middle":"Right")+b;return mR(c,id(b,f),f,function(g){if(typeof g=="string"){g=iC[g]}if(!g){return false}var h=false;try{if(c.isReadOnly()){c.state.suppressEdits=true}h=g(c,d)!=kX}finally{c.state.suppressEdits=false}return h})}function oY(c,d,f){var b=c.getOption("configureMouse");var e=b?b(c,d,f):{};if(e.unit==null){var a=hE?f.shiftKey&&f.metaKey:f.altKey;e.unit=a?"rectangle":d=="single"?"char":d=="double"?"word":"line"}if(e.extend==null||c.doc.extend){e.extend=c.doc.extend||f.shiftKey}if(e.addNew==null){e.addNew=lg?f.metaKey:f.ctrlKey}if(e.moveOnDrag==null){e.moveOnDrag=!(lg?f.altKey:f.ctrlKey)}return e}function pc(c,d,e,g){if(jI){setTimeout(mw(le,c),0)}else{c.curOp.focus=jB()}var a=oY(c,e,g);var f=c.doc.sel,b;if(c.options.dragDrop&&ie&&!c.isReadOnly()&&e=="single"&&(b=f.contains(d))>-1&&(nz((b=f.ranges[b]).from(),d)<0||d.xRel>0)&&(nz(b.to(),d)>0||d.xRel<0)){no(c,g,d,a)}else{lx(c,g,d,a)}}function no(g,e,a,d){var b=g.display,j=false;var c=j7(g,function(k){if(j9){b.scroller.draggable=false}g.state.draggingText=false;if(g.state.delayingBlurEvent){if(g.hasFocus()){g.state.delayingBlurEvent=false}else{n4(g)}}kp(b.wrapper.ownerDocument,"mouseup",c);kp(b.wrapper.ownerDocument,"mousemove",f);kp(b.scroller,"dragstart",h);kp(b.scroller,"drop",c);if(!j){nV(k);if(!d.addNew){ii(g.doc,a,null,null,d.extend)}if((j9&&!o5)||jI&&lG==9){setTimeout(function(){b.wrapper.ownerDocument.body.focus({preventScroll:true});b.input.focus()},20)}else{b.input.focus()}}});var f=function(k){j=j||Math.abs(e.clientX-k.clientX)+Math.abs(e.clientY-k.clientY)>=10};var h=function(){return j=true};if(j9){b.scroller.draggable=true}g.state.draggingText=c;c.copy=!d.moveOnDrag;lT(b.wrapper.ownerDocument,"mouseup",c);lT(b.wrapper.ownerDocument,"mousemove",f);lT(b.scroller,"dragstart",h);lT(b.scroller,"drop",c);g.state.delayingBlurEvent=true;setTimeout(function(){return b.input.focus()},20);if(b.scroller.dragDrop){b.scroller.dragDrop()}}function jl(b,d,a){if(a=="char"){return new i6(d,d)}if(a=="word"){return b.findWordAt(d)}if(a=="line"){return new i6(oD(d.line,0),hD(b.doc,oD(d.line+1,0)))}var c=a(b,d);return new i6(c.from,c.to)}function lx(e,k,f,t){if(jI){n4(e)}var l=e.display,s=e.doc;nV(k);var g,b,d=s.sel,h=d.ranges;if(t.addNew&&!t.extend){b=s.sel.contains(f);if(b>-1){g=h[b]}else{g=new i6(f,f)}}else{g=s.sel.primary();b=s.sel.primIndex}if(t.unit=="rectangle"){if(!t.addNew){g=new i6(f,f)}f=m2(e,k,true,true);b=-1}else{var r=jl(e,f,t.unit);if(t.extend){g=hW(g,r.anchor,r.head,t.extend)}else{g=r}}if(!t.addNew){b=0;lZ(s,new h3([g],0),mT);d=s.sel}else{if(b==-1){b=h.length;lZ(s,mr(e,h.concat([g]),b),{scroll:false,origin:"*mouse"})}else{if(h.length>1&&h[b].empty()&&t.unit=="char"&&!t.extend){lZ(s,mr(e,h.slice(0,b).concat(h.slice(b+1)),0),{scroll:false,origin:"*mouse"});d=s.sel}else{l5(s,b,g,mT)}}}var m=f;function n(y){if(nz(m,y)==0){return}m=y;if(t.unit=="rectangle"){var H=[],B=e.options.tabSize;var I=ma(kr(s,f.line).text,f.ch,B);var v=ma(kr(s,y.line).text,y.ch,B);var G=Math.min(I,v),x=Math.max(I,v);for(var u=Math.min(f.line,y.line),E=Math.min(e.lastLine(),Math.max(f.line,y.line));u<=E;u++){var w=kr(s,u).text,F=lw(w,G,B);if(G==x){H.push(new i6(oD(u,F),oD(u,F)))}else{if(w.length>F){H.push(new i6(oD(u,F),oD(u,lw(w,x,B))))}}}if(!H.length){H.push(new i6(f,f))}lZ(s,mr(e,d.ranges.slice(0,b).concat(H),b),{origin:"*mouse",scroll:false});e.scrollIntoView(y)}else{var A=g;var C=jl(e,y,t.unit);var D=A.anchor,z;if(nz(C.anchor,D)>0){z=C.head;D=ph(A.from(),C.anchor)}else{z=C.anchor;D=n9(A.to(),C.head)}var J=d.ranges.slice(0);J[b]=nX(e,new i6(hD(s,D),z));lZ(s,mr(e,J,b),mT)}}var p=l.wrapper.getBoundingClientRect();var c=0;function j(w){var y=++c;var u=m2(e,w,true,t.unit=="rectangle");if(!u){return}if(nz(u,m)!=0){e.curOp.focus=jB();n(u);var v=lk(l,s);if(u.line>=v.to||u.line<v.from){setTimeout(j7(e,function(){if(c==y){j(w)}}),150)}}else{var x=w.clientY<p.top?-20:w.clientY>p.bottom?20:0;if(x){setTimeout(j7(e,function(){if(c!=y){return}l.scroller.scrollTop+=x;j(w)}),50)}}}function q(u){e.state.selectingText=false;c=Infinity;if(u){nV(u);l.input.focus()}kp(l.wrapper.ownerDocument,"mousemove",o);kp(l.wrapper.ownerDocument,"mouseup",a);s.history.lastSelOrigin=null}var o=j7(e,function(u){if(u.buttons===0||!iN(u)){q(u)}else{j(u)}});var a=j7(e,q);e.state.selectingText=a;lT(l.wrapper.ownerDocument,"mousemove",o);lT(l.wrapper.ownerDocument,"mouseup",a)}function nX(f,n){var o=n.anchor;var j=n.head;var k=kr(f.doc,o.line);if(nz(o,j)==0&&o.sticky==j.sticky){return n}var a=mi(k);if(!a){return n}var l=oX(a,o.ch,o.sticky),c=a[l];if(c.from!=o.ch&&c.to!=o.ch){return n}var d=l+((c.from==o.ch)==(c.level!=1)?0:1);if(d==0||d==a.length){return n}var m;if(j.line!=o.line){m=(j.line-o.line)*(f.doc.direction=="ltr"?1:-1)>0}else{var p=oX(a,j.ch,j.sticky);var b=p-l||(j.ch-o.ch)*(c.level==1?-1:1);if(p==d-1||p==d){m=b<0}else{m=b>0}}var q=a[d+(m?-1:0)];var g=m==(q.level==1);var e=g?q.from:q.to,h=g?"after":"before";return o.ch==e&&o.sticky==h?n:new i6(new oD(o.line,e,h),j)}function ht(f,k,h,g){var c,d;if(k.touches){c=k.touches[0].clientX;d=k.touches[0].clientY}else{try{c=k.clientX;d=k.clientY}catch(a){return false}}if(c>=Math.floor(f.display.gutters.getBoundingClientRect().right)){return false}if(g){nV(k)}var j=f.display;var l=j.lineDiv.getBoundingClientRect();if(d>l.bottom||!kd(f,h)){return oT(k)}d-=l.top-j.viewOffset;for(var n=0;n<f.display.gutterSpecs.length;++n){var m=j.gutters.childNodes[n];if(m&&m.getBoundingClientRect().right>=c){var e=o2(f.doc,d);var b=f.display.gutterSpecs[n];o4(f,h,f,e,b.className,k);return oT(k)}}}function lC(b,a){return ht(b,a,"gutterClick",true)}function pb(b,a){if(m1(b.display,a)||lF(b,a)){return}if(hp(b,a,"contextmenu")){return}if(!i1){b.display.input.onContextMenu(a)}}function lF(b,a){if(!kd(b,"gutterContextMenu")){return false}return ht(b,a,"gutterContextMenu",false)}function kF(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");n7(a)}var kU={toString:function(){return"CodeMirror.Init"}};var ju={};var mJ={};function ir(c){var a=c.optionHandlers;function b(g,d,e,f){c.defaults[g]=d;if(e){a[g]=f?function(k,h,j){if(j!=kU){e(k,h,j)}}:e}}c.defineOption=b;c.Init=kU;b("value","",function(e,d){return e.setValue(d)},true);b("mode",null,function(e,d){e.doc.modeOption=d;op(e)},true);b("indentUnit",2,op,true);b("indentWithTabs",false);b("smartIndent",true);b("tabSize",4,function(d){j0(d);n7(d);od(d)},true);b("lineSeparator",null,function(h,e){h.doc.lineSep=e;if(!e){return}var f=[],d=h.doc.first;h.doc.iter(function(l){for(var j=0;;){var k=l.text.indexOf(e,j);if(k==-1){break}j=k+e.length;f.push(oD(d,k))}d++});for(var g=f.length-1;g>=0;g--){nx(h.doc,e,f[g],oD(f[g].line,f[g].ch+e.length))}});b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(f,d,e){f.state.specialChars=new RegExp(d.source+(d.test("\t")?"":"|\t"),"g");if(e!=kU){f.refresh()}});b("specialCharPlaceholder",iX,function(d){return d.refresh()},true);b("electricChars",true);b("inputStyle",km?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);b("spellcheck",false,function(e,d){return e.getInputField().spellcheck=d},true);b("autocorrect",false,function(e,d){return e.getInputField().autocorrect=d},true);b("autocapitalize",false,function(e,d){return e.getInputField().autocapitalize=d},true);b("rtlMoveVisually",!hr);b("wholeLineUpdateBefore",true);b("theme","default",function(d){kF(d);kv(d)},true);b("keyMap","default",function(h,d,g){var f=ik(d);var e=g!=kU&&ik(g);if(e&&e.detach){e.detach(h,f)}if(f.attach){f.attach(h,e||null)}});b("extraKeys",null);b("configureMouse",null);b("lineWrapping",false,iu,true);b("gutters",[],function(e,d){e.display.gutterSpecs=nv(d,e.options.lineNumbers);kv(e)},true);b("fixedGutter",true,function(e,d){e.display.gutters.style.left=d?i5(e.display)+"px":"0";e.refresh()},true);b("coverGutterNextToScrollbar",false,function(d){return jD(d)},true);b("scrollbarStyle","native",function(d){o6(d);jD(d);d.display.scrollbars.setScrollTop(d.doc.scrollTop);d.display.scrollbars.setScrollLeft(d.doc.scrollLeft)},true);b("lineNumbers",false,function(e,d){e.display.gutterSpecs=nv(e.options.gutters,d);kv(e)},true);b("firstLineNumber",1,kv,true);b("lineNumberFormatter",function(d){return d},kv,true);b("showCursorWhenSelecting",false,nW,true);b("resetSelectionOnContextMenu",true);b("lineWiseCopyCut",true);b("pasteLinesPerSelection",true);b("selectionsMayTouch",false);b("readOnly",false,function(e,d){if(d=="nocursor"){hl(e);e.display.input.blur()}e.display.input.readOnlyChanged(d)});b("screenReaderLabel",null,function(e,d){d=(d==="")?null:d;e.display.input.screenReaderLabelChanged(d)});b("disableInput",false,function(e,d){if(!d){e.display.input.reset()}},true);b("dragDrop",true,h7);b("allowDropFileTypes",null);b("cursorBlinkRate",530);b("cursorScrollMargin",0);b("cursorHeight",1,nW,true);b("singleCursorHeightPerLine",true,nW,true);b("workTime",100);b("workDelay",100);b("flattenSpans",true,j0,true);b("addModeClass",false,j0,true);b("pollInterval",100);b("undoDepth",200,function(e,d){return e.doc.history.undoDepth=d});b("historyEventDelay",1250);b("viewportMargin",10,function(d){return d.refresh()},true);b("maxHighlightLength",10000,j0,true);b("moveInputWithCursor",true,function(e,d){if(!d){e.display.input.resetPosition()}});b("tabindex",null,function(e,d){return e.display.input.getField().tabIndex=d||""});b("autofocus",null);b("direction","ltr",function(e,d){return e.doc.setDirection(d)},true);b("phrases",null)}function h7(b,e,a){var d=a&&a!=kU;if(!e!=!d){var f=b.display.dragFunctions;var c=e?lT:kp;c(b.display.scroller,"dragstart",f.start);c(b.display.scroller,"dragenter",f.enter);c(b.display.scroller,"dragover",f.over);c(b.display.scroller,"dragleave",f.leave);c(b.display.scroller,"drop",f.drop)}}function iu(a){if(a.options.lineWrapping){hO(a.display.wrapper,"CodeMirror-wrap");a.display.sizer.style.minWidth="";a.display.sizerWidth=null}else{lY(a.display.wrapper,"CodeMirror-wrap");l2(a)}oy(a);od(a);n7(a);setTimeout(function(){return jD(a)},100)}function nc(b,h){var c=this;if(!(this instanceof nc)){return new nc(b,h)}this.options=h=h?oJ(h):{};oJ(ju,h,false);var d=h.value;if(typeof d=="string"){d=new pf(d,h.mode,null,h.lineSeparator,h.direction)}else{if(h.mode){d.modeOption=h.mode}}this.doc=d;var a=new nc.inputStyles[h.inputStyle](this);var e=this.display=new iq(b,d,a,h);e.wrapper.CodeMirror=this;kF(this);if(h.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}o6(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:-1,cutIncoming:-1,selectingText:false,draggingText:false,highlight:new hs(),keySeq:null,specialChars:null};if(h.autofocus&&!km){e.input.focus()}if(jI&&lG<11){setTimeout(function(){return c.display.input.reset(true)},20)}iG(this);mt();kP(this);this.curOp.forceUpdate=true;kx(this,d);if((h.autofocus&&!km)||this.hasFocus()){setTimeout(function(){if(c.hasFocus()&&!c.state.focused){oa(c)}},20)}else{hl(this)}for(var f in mJ){if(mJ.hasOwnProperty(f)){mJ[f](this,h[f],kU)}}kN(this);if(h.finishInit){h.finishInit(this)}for(var g=0;g<m9.length;++g){m9[g](this)}nS(this);if(j9&&h.lineWrapping&&getComputedStyle(e.lineDiv).textRendering=="optimizelegibility"){e.lineDiv.style.textRendering="auto"}}nc.defaults=ju;nc.optionHandlers=mJ;function iG(e){var j=e.display;lT(j.scroller,"mousedown",j7(e,k9));if(jI&&lG<11){lT(j.scroller,"dblclick",j7(e,function(l){if(hp(e,l)){return}var k=m2(e,l);if(!k||lC(e,l)||m1(e.display,l)){return}nV(l);var m=e.findWordAt(k);ii(e.doc,m.anchor,m.head)}))}else{lT(j.scroller,"dblclick",function(k){return hp(e,k)||nV(k)})}lT(j.scroller,"contextmenu",function(k){return pb(e,k)});lT(j.input.getField(),"contextmenu",function(k){if(!j.scroller.contains(k.target)){pb(e,k)}});var g,f={end:0};function h(){if(j.activeTouch){g=setTimeout(function(){return j.activeTouch=null},1000);f=j.activeTouch;f.end=+new Date}}function c(l){if(l.touches.length!=1){return false}var k=l.touches[0];return k.radiusX<=1&&k.radiusY<=1}function d(k,n){if(n.left==null){return true}var l=n.left-k.left,m=n.top-k.top;return l*l+m*m>20*20}lT(j.scroller,"touchstart",function(k){if(!hp(e,k)&&!c(k)&&!lC(e,k)){j.input.ensurePolled();clearTimeout(g);var l=+new Date;j.activeTouch={start:l,moved:false,prev:l-f.end<=300?f:null};if(k.touches.length==1){j.activeTouch.left=k.touches[0].pageX;j.activeTouch.top=k.touches[0].pageY}}});lT(j.scroller,"touchmove",function(){if(j.activeTouch){j.activeTouch.moved=true}});lT(j.scroller,"touchend",function(m){var k=j.activeTouch;if(k&&!m1(j,m)&&k.left!=null&&!k.moved&&new Date-k.start<300){var l=e.coordsChar(j.activeTouch,"page"),n;if(!k.prev||d(k,k.prev)){n=new i6(l,l)}else{if(!k.prev.prev||d(k,k.prev.prev)){n=e.findWordAt(l)}else{n=new i6(oD(l.line,0),hD(e.doc,oD(l.line+1,0)))}}e.setSelection(n.anchor,n.head);e.focus();nV(m)}h()});lT(j.scroller,"touchcancel",h);lT(j.scroller,"scroll",function(){if(j.scroller.clientHeight){nD(e,j.scroller.scrollTop);nQ(e,j.scroller.scrollLeft,true);o4(e,"scroll",e)}});lT(j.scroller,"mousewheel",function(k){return mb(e,k)});lT(j.scroller,"DOMMouseScroll",function(k){return mb(e,k)});lT(j.wrapper,"scroll",function(){return j.wrapper.scrollTop=j.wrapper.scrollLeft=0});j.dragFunctions={enter:function(k){if(!hp(e,k)){lr(k)}},over:function(k){if(!hp(e,k)){hu(e,k);lr(k)}},start:function(k){return mF(e,k)},drop:j7(e,mp),leave:function(k){if(!hp(e,k)){lW(e)}}};var b=j.input.getField();var a=[{id:" div ",name:"<div></div>",type:"feature"},{id:" span ",name:"<span></span>",type:"feature"}];lT(b,"keyup",function(k){if(k.keyCode==9){var l=this.value;l=l.split(".");l=l.map(function(m){return m.trim()});switch(l[0]){case"class":this.value=this.value.replace("class","class=''");break;case"style":this.value=this.value.replace("style","style=''");break;case"id":this.value=this.value.replace("id","id=''");this.setSelectionRange(this.value.length,this.value.length);break;case"comment":this.value=this.value.replace("comment","<!-- Комментарий -->");break;case"article":this.value=this.value.replace("article","<article><h1>Заголовок1</h1></article>");break;case"script":this.value=this.value.replace("script","<script type='text/javascript'>Значение<\/script>");break;case"select":this.value=this.value.replace("select","<select name='text'>\r<option disabled>Выберите из списка...</option>\r<option value='1'>Значение1</option>\r</select>");break;case"option":this.value=this.value.replace("option","<option value='text'>Значение</option>");break;case"table":this.value=this.value.replace("table","<table>\r<thead>\r<tr><th>Колонка1</th><th>Колонка2</th></tr>\r</thead>\r<tbody>\r<tr><td>Значение1</td><td>Значение2</td></tr>\r</tbody>\r</table>");break;case"tr":if(l[1]===undefined){this.value=this.value.replace("tr","<tr></tr>")}else{if(l[1]=="td"){this.value=this.value.replace("tr.td","<tr>\r<td>Значение</td>\r</tr>")}else{if(l[1]=="th"){this.value=this.value.replace("tr.th","<tr>\r<th>Колонка1</th>\r</tr>")}}}break;case"td":this.value=this.value.replace("td","<td></td>");break;case"th":this.value=this.value.replace("th","<th></th>");break;case"ul":if(l[1]===undefined){this.value=this.value.replace("ul","<ul class=''><li>элемент</li></ul>")}else{if(l[1]=="class"){this.value=this.value.replace("ul.class","<ul class=''><li>элемент</li></ul>")}else{if(l[1]=="style"){this.value=this.value.replace("ul.style","<ul style=''><li>элемент</li></ul>")}else{this.value=this.value=this.value.replace("ul","<ul class='"+l[1]+"'><li>элемент</li></ul>")}}}break;case"li":this.value=this.value.replace("li","<li>элемент</li>");break;case"textarea":if(l[1]===undefined){this.value=this.value.replace("textarea","<textarea rows='10' cols='45' name='text'></textarea>")}else{if(l[1]==="class"){this.value=this.value.replace("textarea.class","<textarea  rows='10' cols='45' name='text' class=''></textarea>")}else{if(l[1]==="style"){this.value=this.value.replace("textarea.style","<textarea rows='10' cols='45' name='text' style=''></textarea>")}else{this.value=this.value.replace("textarea."+l[1],"<textarea rows='10' cols='45' name='text' class='"+l[1]+"'></textarea>")}}}break;case"input":if(l[1]===undefined){this.value=this.value.replace("input","<input type='button|checkbox|file|hidden|image|password|radio|reset|submit|text' name='' value=''/>")}else{if(l[1]==="class"){this.value=this.value.replace("input.class","<input type='button|checkbox|file|hidden|image|password|radio|reset|submit|text' name='' value='' class=''/>")}else{if(l[1]==="style"){this.value=this.value.replace("input.style","<input type='button|checkbox|file|hidden|image|password|radio|reset|submit|text' name='' value='' style=''/>")}else{this.value=this.value.replace("input."+l[1],"<input type='button|checkbox|file|hidden|image|password|radio|reset|submit|text' name='' value='' class='"+l[1]+"'/>")}}}break;case"text":this.value=this.value.replace("text","<input type='text' name='' value='' />");case"checkbox":this.value=this.value.replace("checkbox","<input type='checkbox' name='' value='' />");case"file":this.value=this.value.replace("file","<input type='file' name='' value='' />");case"hidden":this.value=this.value.replace("hidden","<input type='hidden' name='' value='' />");case"pass":this.value=this.value.replace("pass","<input type='password' name='' value='' />");case"radio":this.value=this.value.replace("radio","<input type='radio' name='' value='' />");case"reset":this.value=this.value.replace("radio","<input type='reset' name='' value='' />");case"submit":this.value=this.value.replace("submit","<input type='submit' name='' value='' />");case"form":this.value=this.value.replace("form","<form name='' action='' method='POST|GET' enctype='application/x-www-form-urlencoded | multipart/form-data | text/plain'></form>");break;case"title":this.value=this.value.replace("title","<title></title>");break;case"meta":this.value=this.value.replace("meta","<meta charset='' name='GENERATOR' content=''></meta>");break;case"btn":if(l[1]===undefined){this.value=this.value.replace("btn","<btn></btn>")}else{if(l[1]=="class"){this.value=this.value.replace("btn.class","<button type='submit|button|reset' class=''></button>")}else{if(l[1]=="style"){this.value=this.value.replace("btn.style","<button type='submit|button|reset' style=''></button>")}else{this.value=this.value.replace("btn."+l[1],"<button type='submit|button|reset' class='"+l[1]+"'></button>")}}}break;case"strong":if(l[1]===undefined){this.value=this.value.replace("strong","<strong></strong>")}else{if(l[1]=="class"){this.value=this.value.replace("strong.class","<strong class=''></strong>")}else{if(l[1]=="style"){this.value=this.value.replace("strong.style","<strong style=''></strong>")}else{this.value=this.value.replace("strong."+l[1],"<strong class='"+l[1]+"'></strong>")}}}break;case"a":if(l[1]===undefined){this.value=this.value.replace("a","<a href='#' title='Title'>Ссылка</a>")}else{if(l[1]=="class"){this.value=this.value.replace("a.class","<a href='#' title='Title' class=''>Ссылка</a>")}else{if(l[1]=="style"){this.value=this.value.replace("a.style","<a href='#'  style=''>Ссылка</a>")}else{this.value=this.value.replace("a."+l[1],"<a href='#' title='Title' class='"+l[1]+"'>Ссылка</a>")}}}break;case"img":if(l[1]===undefined){this.value=this.value.replace("img","<img src='#' alt='Alt' title='Title' />")}else{if(l[1]=="class"){this.value=this.value.replace("img.class","<img src='#' alt='Alt' title='Title' class='Class' />")}else{if(l[1]=="style"){this.value=this.value.replace("img.style","<img src='#' alt='Alt' title='Title' style='' />")}else{this.value=this.value.replace("img."+l[1],"<img src='#' alt='Alt' title='Title' class='"+l[1]+"' />")}}}break;case"h1":if(l[1]===undefined){this.value=this.value.replace("h1","<h1>Заголовок1</h1>")}else{if(l[1]=="class"){this.value=this.value.replace("h1.class","<h1 class=''>Заголовок1</h1>")}else{if(l[1]=="style"){this.value=this.value.replace("h1.style","<h1 style=''>Заголовок1</h1>")}else{this.value=this.value.replace("h1."+l[1],"<h1 class='"+l[1]+"'>Заголовок1</h1>")}}}break;case"h2":if(l[1]===undefined){this.value=this.value.replace("h2 ","<h2>Заголовок2</h2>")}else{if(l[1]=="class"){this.value=this.value.replace("h2.class","<h2 class=''>Заголовок2</h2>")}else{if(l[1]=="style"){this.value=this.value.replace("h2.style","<h2 style=''>Заголовок2</h2>")}else{this.value=this.value.replace("h2."+l[1],"<h2 class='"+l[1]+"'>Заголовок2</h2>")}}}break;case"h3":if(l[1]===undefined){this.value=this.value.replace("h3","<h3>Заголовок3</h3>")}else{if(l[1]=="class"){this.value=this.value.replace("h3.class","<h3 class=''>Заголовок3</h3>")}else{if(l[1]=="style"){this.value=this.value.replace("h3.style","<h3 style=''>Заголовок3</h3>")}else{this.value=this.value.replace("h3."+l[1],"<h3 class='"+l[1]+"'>Заголовок3</h3>")}}}break;case"h4":if(l[1]===undefined){this.value=this.value.replace("h4 ","<h4>Заголовок4</h4>")}else{if(l[1]=="class"){this.value=this.value.replace("h4.class","<h4 class=''>Заголовок4</h4>")}else{if(l[1]=="style"){this.value=this.value.replace("h4.style","<h4 style=''>Заголовок4</h4>")}else{this.value=this.value.replace("h4."+l[1],"<h4 class='"+l[1]+"'>Заголовок4</h4>")}}}break;case"h5":if(l[1]===undefined){this.value=this.value.replace("h5","<h5>Заголовок5</h5>")}else{if(l[1]=="class"){this.value=this.value.replace("h5.class","<h5 class=''>Заголовок5</h5>")}else{if(l[1]=="style"){this.value=this.value.replace("h5.style","<h5 style=''>Заголовок5</h5>")}else{this.value=this.value.replace("h5."+l[1],"<h5 class='"+l[1]+"'>Заголовок5</h5>")}}}break;case"h6":if(l[1]===undefined){this.value=this.value.replace("h6","<h6>Заголовок6</h6>")}else{if(l[1]=="class"){this.value=this.value.replace("h6.class","<h6 class=''>Заголовок6</h6>")}else{if(l[1]=="style"){this.value=this.value.replace("h6.style","<h6 style=''>Заголовок6</h6>")}else{this.value=this.value.replace("h6."+l[1],"<h6 class='"+l[1]+"'>Заголовок6</h6>")}}}break;case"hr":this.value=this.value.replace("hr","<hr/>");break;case"br":this.value=this.value.replace("br","<br/>");break;case"p":if(l[1]===undefined){this.value=this.value.replace("p","<p>&nbsp;</p>")}else{if(l[1]=="class"){this.value=this.value.replace("p.class","<p class=''></p>")}else{if(l[1]=="style"){this.value=this.value.replace("p.style","<p style=''></p>")}else{this.value=this.value.replace("p."+l[1],"<p class='"+l[1]+"'></p>")}}}break;case"span":if(l[1]===undefined){this.value=this.value.replace("span","<span></span>")}else{if(l[1]=="class"){this.value=this.value.replace("span.class","<span class=''></span>")}else{if(l[1]=="style"){this.value=this.value.replace("span.style","<span style=''></span>")}else{this.value=this.value.replace("span."+l[1],"<span class='"+l[1]+"'></span>")}}}break;case"div":if(l[1]===undefined){this.value=this.value.replace("div","<div></div>")}else{if(l[1]=="class"){this.value=this.value.replace("div.class","<div class=''></div>")}else{if(l[1]=="style"){this.value=this.value.replace("div.style","<div style=''></div>")}else{this.value=this.value.replace("div."+l[1],"<div class='"+l[1]+"'></div>")}}}break;default:this.value=this.value+"\t"}}return mB.call(e,k)});lT(b,"keydown",j7(e,lm));lT(b,"keypress",j7(e,mm));lT(b,"focus",function(k){return oa(e,k)});lT(b,"blur",function(k){return hl(e,k)})}var m9=[];nc.defineInitHook=function(a){return m9.push(a)};function on(e,r,f,b){var g=e.doc,c;if(f==null){f="add"}if(f=="smart"){if(!g.mode.indent){f="prev"}else{c=jG(e,r).state}}var m=e.options.tabSize;var q=kr(g,r),n=ma(q.text,null,m);if(q.stateAfter){q.stateAfter=null}var d=q.text.match(/^\s*/)[0],j;if(!b&&!/\S/.test(q.text)){j=0;f="not"}else{if(f=="smart"){j=g.mode.indent(c,q.text.slice(d.length),q.text);if(j==kX||j>150){if(!b){return}f="prev"}}}if(f=="prev"){if(r>g.first){j=ma(kr(g,r-1).text,null,m)}else{j=0}}else{if(f=="add"){j=n+e.options.indentUnit}else{if(f=="subtract"){j=n-e.options.indentUnit}else{if(typeof f=="number"){j=n+f}}}}j=Math.max(0,j);var h="",k=0;if(e.options.indentWithTabs){for(var p=Math.floor(j/m);p;--p){k+=m;h+="\t"}}if(k<j){h+=mU(j-k)}if(h!=d){nx(g,h,oD(r,0),oD(r,d.length),"+input");q.stateAfter=null;return true}else{for(var a=0;a<g.sel.ranges.length;a++){var o=g.sel.ranges[a];if(o.head.line==r&&o.head.ch<d.length){var l=oD(r,d.length);l5(g,a,new i6(l,l));break}}}}var mk=null;function mh(a){mk=a}function ig(e,p,a,b,f){var g=e.doc;e.display.shift=false;if(!b){b=g.sel}var q=+new Date-200;var r=f=="paste"||e.state.pasteIncoming>q;var m=iD(p),d=null;if(r&&b.ranges.length>1){if(mk&&mk.text.join("\n")==p){if(b.ranges.length%mk.text.length==0){d=[];for(var o=0;o<mk.text.length;o++){d.push(g.splitLines(mk.text[o]))}}}else{if(m.length==b.ranges.length&&e.options.pasteLinesPerSelection){d=l4(m,function(s){return[s]})}}}var l=e.curOp.updateInput;for(var c=b.ranges.length-1;c>=0;c--){var n=b.ranges[c];var h=n.from(),j=n.to();if(n.empty()){if(a&&a>0){h=oD(h.line,h.ch-a)}else{if(e.state.overwrite&&!r){j=oD(j.line,Math.min(kr(g,j.line).text.length,j.ch+hI(m).length))}else{if(r&&mk&&mk.lineWise&&mk.text.join("\n")==m.join("\n")){h=j=oD(h.line,0)}}}}var k={from:h,to:j,text:d?d[c%d.length]:m,origin:f||(r?"paste":e.state.cutIncoming>q?"cut":"+input")};mG(e.doc,k);ok(e,"inputRead",e,k)}if(p&&!r){ip(e,p)}hJ(e);if(e.curOp.updateInput<2){e.curOp.updateInput=l}e.curOp.typing=true;e.state.pasteIncoming=e.state.cutIncoming=-1}function m3(a,c){var b=a.clipboardData&&a.clipboardData.getData("Text");if(b){a.preventDefault();if(!c.isReadOnly()&&!c.options.disableInput){kI(c,function(){return ig(c,b,0,null,"paste")})}return true}}function ip(b,f){if(!b.options.electricChars||!b.options.smartIndent){return}var e=b.doc.sel;for(var g=e.ranges.length-1;g>=0;g--){var a=e.ranges[g];if(a.head.ch>100||(g&&e.ranges[g-1].head.line==a.head.line)){continue}var d=b.getModeAt(a.head);var c=false;if(d.electricChars){for(var h=0;h<d.electricChars.length;h++){if(f.indexOf(d.electricChars.charAt(h))>-1){c=on(b,a.head.line,"smart");break}}}else{if(d.electricInput){if(d.electricInput.test(kr(b.doc,a.head.line).text.slice(0,a.head.ch))){c=on(b,a.head.line,"smart")}}}if(c){ok(b,"electricInput",b,a.head.line)}}}function lB(b){var c=[],f=[];for(var e=0;e<b.doc.sel.ranges.length;e++){var a=b.doc.sel.ranges[e].head.line;var d={anchor:oD(a,0),head:oD(a+1,0)};f.push(d);c.push(b.getRange(d.anchor,d.head))}return{text:c,ranges:f}}function iK(d,b,c,a){d.setAttribute("autocorrect",c?"":"off");d.setAttribute("autocapitalize",a?"":"off");d.setAttribute("spellcheck",!!b)}function a9(){var b=jr("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var a=jr("div",[b],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(j9){b.style.width="1000px"}else{b.setAttribute("wrap","off")}if(jx){b.style.border="1px solid black"}iK(b);return a}function jy(c){var b=c.optionHandlers;var a=c.helpers={};c.prototype={constructor:c,focus:function(){window.focus();this.display.input.focus()},setOption:function(e,d){var f=this.options,g=f[e];if(f[e]==d&&e!="mode"){return}f[e]=d;if(b.hasOwnProperty(e)){j7(this,b[e])(this,d,g)}o4(this,"optionChange",this,e)},getOption:function(d){return this.options[d]},getDoc:function(){return this.doc},addKeyMap:function(d,e){this.state.keyMaps[e?"push":"unshift"](ik(d))},removeKeyMap:function(e){var d=this.state.keyMaps;for(var f=0;f<d.length;++f){if(d[f]==e||d[f].name==e){d.splice(f,1);return true}}},addOverlay:l6(function(f,e){var d=f.token?f:c.getMode(this.options,f);if(d.startState){throw new Error("Overlays may not be stateful.")}k3(this.state.overlays,{mode:d,modeSpec:f,opaque:e&&e.opaque,priority:(e&&e.priority)||0},function(g){return g.priority});this.state.modeGen++;od(this)}),removeOverlay:l6(function(g){var e=this.state.overlays;for(var f=0;f<e.length;++f){var d=e[f].modeSpec;if(d==g||typeof g=="string"&&d.name==g){e.splice(f,1);this.state.modeGen++;od(this);return}}}),indentLine:l6(function(d,f,e){if(typeof f!="string"&&typeof f!="number"){if(f==null){f=this.options.smartIndent?"smart":"prev"}else{f=f?"add":"subtract"}}if(k6(this.doc,d)){on(this,d,f,e)}}),indentSelection:l6(function(f){var e=this.doc.sel.ranges,m=-1;for(var k=0;k<e.length;k++){var j=e[k];if(!j.empty()){var h=j.from(),g=j.to();var d=Math.max(m,h.line);m=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var l=d;l<m;++l){on(this,l,f)}var n=this.doc.sel.ranges;if(h.ch==0&&e.length==n.length&&n[k].from().ch>0){l5(this.doc,k,new i6(h,n[k].to()),ot)}}else{if(j.head.line>m){on(this,j.head.line,f,true);m=j.head.line;if(k==this.doc.sel.primIndex){hJ(this)}}}}}),getTokenAt:function(d,e){return mO(this,d,e)},getLineTokens:function(d,e){return mO(this,oD(d),e,true)},getTokenTypeAt:function(d){d=hD(this.doc,d);var h=mc(this,kr(this.doc,d.line));var f=0,e=(h.length-1)/2,j=d.ch;var k;if(j==0){k=h[2]}else{for(;;){var l=(f+e)>>1;if((l?h[l*2-1]:0)>=j){e=l}else{if(h[l*2+1]<j){f=l+1}else{k=h[l*2+2];break}}}}var g=k?k.indexOf("overlay "):-1;return g<0?k:g==0?null:k.slice(0,g-1)},getModeAt:function(d){var e=this.doc.mode;if(!e.innerMode){return e}return c.innerMode(e,this.getTokenAt(d).state).mode},getHelper:function(d,e){return this.getHelpers(d,e)[0]},getHelpers:function(h,j){var f=[];if(!a.hasOwnProperty(j)){return f}var m=a[j],k=this.getModeAt(h);if(typeof k[j]=="string"){if(m[k[j]]){f.push(m[k[j]])}}else{if(k[j]){for(var l=0;l<k[j].length;l++){var d=m[k[j][l]];if(d){f.push(d)}}}else{if(k.helperType&&m[k.helperType]){f.push(m[k.helperType])}else{if(m[k.name]){f.push(m[k.name])}}}}for(var e=0;e<m._global.length;e++){var g=m._global[e];if(g.pred(k,this)&&lz(f,g.val)==-1){f.push(g.val)}}return f},getStateAfter:function(e,f){var d=this.doc;e=jW(d,e==null?d.first+d.size-1:e);return jG(this,e+1,f).state},cursorCoords:function(d,f){var e,g=this.doc.sel.primary();if(d==null){e=g.head}else{if(typeof d=="object"){e=hD(this.doc,d)}else{e=d?g.from():g.to()}}return jh(this,e,f||"page")},charCoords:function(d,e){return kO(this,hD(this.doc,d),e||"page")},coordsChar:function(e,d){e=hw(this,e,d||"page");return iJ(this,e.left,e.top)},lineAtHeight:function(e,d){e=hw(this,{top:e,left:0},d||"page").top;return o2(this.doc,e+this.display.viewOffset)},heightAtLine:function(h,d,e){var j=false,g;if(typeof h=="number"){var f=this.doc.first+this.doc.size-1;if(h<this.doc.first){h=this.doc.first}else{if(h>f){h=f;j=true}}g=kr(this.doc,h)}else{g=h}return h2(this,g,{top:0,left:0},d||"page",e||j).top+(j?this.doc.height-oQ(g):0)},defaultTextHeight:function(){return i(this.display)},defaultCharWidth:function(){return mA(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(k,n,h,m,f){var l=this.display;k=jh(this,hD(this.doc,k));var j=k.bottom,d=k.left;n.style.position="absolute";n.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(n);l.sizer.appendChild(n);if(m=="over"){j=k.top}else{if(m=="above"||m=="near"){var e=Math.max(l.wrapper.clientHeight,this.doc.height),g=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);if((m=="above"||k.bottom+n.offsetHeight>e)&&k.top>n.offsetHeight){j=k.top-n.offsetHeight}else{if(k.bottom+n.offsetHeight<=e){j=k.bottom}}if(d+n.offsetWidth>g){d=g-n.offsetWidth}}}n.style.top=j+"px";n.style.left=n.style.right="";if(f=="right"){d=l.sizer.clientWidth-n.offsetWidth;n.style.right="0px"}else{if(f=="left"){d=0}else{if(f=="middle"){d=(l.sizer.clientWidth-n.offsetWidth)/2}}n.style.left=d+"px"}if(h){nn(this,{left:d,top:j,right:d+n.offsetWidth,bottom:j+n.offsetHeight})}},triggerOnKeyDown:l6(lm),triggerOnKeyPress:l6(mm),triggerOnKeyUp:mB,triggerOnMouseDown:l6(k9),execCommand:function(d){if(iC.hasOwnProperty(d)){return iC[d].call(null,this)}},triggerElectric:l6(function(d){ip(this,d)}),findPosH:function(d,g,f,j){var k=1;if(g<0){k=-1;g=-g}var e=hD(this.doc,d);for(var h=0;h<g;++h){e=of(this.doc,e,k,f,j);if(e.hitSide){break}}return e},moveH:l6(function(f,e){var d=this;this.extendSelectionsBy(function(g){if(d.display.shift||d.doc.extend||g.empty()){return of(d.doc,g.head,f,e,d.options.rtlMoveVisually)}else{return f<0?g.from():g.to()}},kn)}),deleteH:l6(function(g,f){var e=this.doc.sel,d=this.doc;if(e.somethingSelected()){d.replaceSelection("",null,"+delete")}else{jF(this,function(h){var j=of(d,h.head,g,f,false);return g<0?{from:j,to:h.head}:{from:h.head,to:j}})}}),findPosV:function(j,m,h,f){var e=1,k=f;if(m<0){e=-1;m=-m}var g=hD(this.doc,j);for(var d=0;d<m;++d){var l=jh(this,g,"div");if(k==null){k=l.left}else{l.left=k}g=os(this,l,e,h);if(g.hitSide){break}}return g},moveV:l6(function(k,h){var d=this;var f=this.doc,g=[];var e=!this.display.shift&&!f.extend&&f.sel.somethingSelected();f.extendSelectionsBy(function(n){if(e){return k<0?n.from():n.to()}var l=jh(d,n.head,"div");if(n.goalColumn!=null){l.left=n.goalColumn}g.push(l.left);var m=os(d,l,k,h);if(h=="page"&&n==f.sel.primary()){nP(d,kO(d,m,"div").top-l.top)}return m},kn);if(g.length){for(var j=0;j<f.sel.ranges.length;j++){f.sel.ranges[j].goalColumn=g[j]}}}),findWordAt:function(d){var f=this.doc,h=kr(f,d.line).text;var e=d.ch,j=d.ch;if(h){var g=this.getHelper(d,"wordChars");if((d.sticky=="before"||j==h.length)&&e){--e}else{++j}var k=h.charAt(e);var l=oc(k,g)?function(m){return oc(m,g)}:/\s/.test(k)?function(m){return/\s/.test(m)}:function(m){return(!/\s/.test(m)&&!oc(m))};while(e>0&&l(h.charAt(e-1))){--e}while(j<h.length&&l(h.charAt(j))){++j}}return new i6(oD(d.line,e),oD(d.line,j))},toggleOverwrite:function(d){if(d!=null&&d==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){hO(this.display.cursorDiv,"CodeMirror-overwrite")}else{lY(this.display.cursorDiv,"CodeMirror-overwrite")}o4(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==jB()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:l6(function(e,d){ic(this,e,d)}),getScrollInfo:function(){var d=this.display.scroller;return{left:d.scrollLeft,top:d.scrollTop,height:d.scrollHeight-kw(this)-this.display.barHeight,width:d.scrollWidth-kw(this)-this.display.barWidth,clientHeight:ks(this),clientWidth:lo(this)}},scrollIntoView:l6(function(e,d){if(e==null){e={from:this.doc.sel.primary().head,to:null};if(d==null){d=this.options.cursorScrollMargin}}else{if(typeof e=="number"){e={from:oD(e,0),to:null}}else{if(e.from==null){e={from:e,to:null}}}}if(!e.to){e.to=e.from}e.margin=d||0;if(e.from.line!=null){nH(this,e)}else{mg(this,e.from,e.to,e.margin)}}),setSize:l6(function(f,h){var d=this;var g=function(j){return typeof j=="number"||/^\d+$/.test(String(j))?j+"px":j};if(f!=null){this.display.wrapper.style.width=g(f)}if(h!=null){this.display.wrapper.style.height=g(h)}if(this.options.lineWrapping){oI(this)}var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(k){if(k.widgets){for(var j=0;j<k.widgets.length;j++){if(k.widgets[j].noHScroll){mx(d,e,"widget");break}}}++e});this.curOp.forceUpdate=true;o4(this,"refresh",this)}),operation:function(d){return kI(this,d)},startOperation:function(){return kP(this)},endOperation:function(){return nS(this)},refresh:l6(function(){var d=this.display.cachedTextHeight;od(this);this.curOp.forceUpdate=true;n7(this);ic(this,this.doc.scrollLeft,this.doc.scrollTop);jY(this.display);if(d==null||Math.abs(d-i(this.display))>0.5||this.options.lineWrapping){oy(this)}o4(this,"refresh",this)}),swapDoc:l6(function(d){var e=this.doc;e.cm=null;if(this.state.selectingText){this.state.selectingText()}kx(this,d);n7(this);this.display.input.reset();ic(this,d.scrollLeft,d.scrollTop);this.curOp.forceScroll=true;ok(this,"swapDoc",this,e);return e}),phrase:function(d){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,d)?e[d]:d},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};n3(c);c.registerHelper=function(e,f,d){if(!a.hasOwnProperty(e)){a[e]=c[e]={_global:[]}}a[e][f]=d};c.registerGlobalHelper=function(e,f,g,d){c.registerHelper(e,f,d);a[e]._global.push({pred:g,val:d})}}function of(a,c,o,p,s){var n=c;var j=o;var g=kr(a,c.line);var d=s&&a.direction=="rtl"?-o:o;function k(){var t=c.line+d;if(t<a.first||t>=a.first+a.size){return false}c=new oD(t,c.ch,c.sticky);return g=kr(a,t)}function l(u){var v;if(p=="codepoint"){var w=g.text.charCodeAt(c.ch+(p>0?0:-1));if(isNaN(w)){v=null}else{var t=o>0?w>=55296&&w<56320:w>=56320&&w<57343;v=new oD(c.line,Math.max(0,Math.min(g.text.length,c.ch+o*(t?2:1))),-o)}}else{if(s){v=k5(a.cm,g,c,o)}else{v=n8(g,c,o)}}if(v==null){if(!u&&k()){c=iM(s,a.cm,g,c.line,d)}else{return false}}else{c=v}return true}if(p=="char"||p=="codepoint"){l()}else{if(p=="column"){l(true)}else{if(p=="word"||p=="group"){var m=null,r=p=="group";var h=a.cm&&a.cm.getHelper(c,"wordChars");for(var b=true;;b=false){if(o<0&&!l(!b)){break}var f=g.text.charAt(c.ch)||"\n";var e=oc(f,h)?"w":r&&f=="\n"?"n":!r||/\s/.test(f)?null:"p";if(r&&!b&&!e){e="s"}if(m&&m!=e){if(o<0){o=1;l();c.sticky="after"}break}if(e){m=e}if(o>0&&!l(!b)){break}}}}}var q=lX(a,c,n,j,true);if(oB(n,q)){q.hitSide=true}return q}function os(f,a,d,g){var h=f.doc,j=a.left,k;if(g=="page"){var b=Math.min(f.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var e=Math.max(b-0.5*i(f.display),3);k=(d>0?a.bottom:a.top)+d*e}else{if(g=="line"){k=d>0?a.bottom+3:a.top-3}}var c;for(;;){c=iJ(f,j,k);if(!c.outside){break}if(d<0?k<=0:k>=h.height){c.hitSide=true;break}k+=d*5}return c}var mV=function(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new hs();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};mV.prototype.init=function(g){var d=this;var a=this,c=a.cm;var e=a.div=g.lineDiv;iK(e,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize);function f(h){for(var j=h.target;j;j=j.parentNode){if(j==e){return true}if(/\bCodeMirror-(?:line)?widget\b/.test(j.className)){break}}return false}lT(e,"paste",function(h){if(!f(h)||hp(c,h)||m3(h,c)){return}if(lG<=11){setTimeout(j7(c,function(){return d.updateFromDOM()}),20)}});lT(e,"compositionstart",function(h){d.composing={data:h.data,done:false}});lT(e,"compositionupdate",function(h){if(!d.composing){d.composing={data:h.data,done:false}}});lT(e,"compositionend",function(h){if(d.composing){if(h.data!=d.composing.data){d.readFromDOMSoon()}d.composing.done=true}});lT(e,"touchstart",function(){return a.forceCompositionEnd()});lT(e,"input",function(){if(!d.composing){d.readFromDOMSoon()}});function b(j){if(!f(j)||hp(c,j)){return}if(c.somethingSelected()){mh({lineWise:false,text:c.getSelections()});if(j.type=="cut"){c.replaceSelection("",null,"cut")}}else{if(!c.options.lineWiseCopyCut){return}else{var m=lB(c);mh({lineWise:true,text:m.text});if(j.type=="cut"){c.operation(function(){c.setSelections(m.ranges,0,ot);c.replaceSelection("",null,"cut")})}}}if(j.clipboardData){j.clipboardData.clearData();var k=mk.text.join("\n");j.clipboardData.setData("Text",k);if(j.clipboardData.getData("Text")==k){j.preventDefault();return}}var l=a9(),h=l.firstChild;c.display.lineSpace.insertBefore(l,c.display.lineSpace.firstChild);h.value=mk.text.join("\n");var n=document.activeElement;jH(h);setTimeout(function(){c.display.lineSpace.removeChild(l);n.focus();if(n==e){a.showPrimarySelection()}},50)}lT(e,"copy",b);lT(e,"cut",b)};mV.prototype.screenReaderLabelChanged=function(a){if(a){this.div.setAttribute("aria-label",a)}else{this.div.removeAttribute("aria-label")}};mV.prototype.prepareSelection=function(){var a=hF(this.cm,false);a.focus=document.activeElement==this.div;return a};mV.prototype.showSelection=function(a,b){if(!a||!this.cm.display.view.length){return}if(a.focus||b){this.showPrimarySelection()}this.showMultipleSelections(a)};mV.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};mV.prototype.showPrimarySelection=function(){var a=this.getSelection(),f=this.cm,n=f.doc.sel.primary();var h=n.from(),g=n.to();if(f.display.viewTo==f.display.viewFrom||h.line>=f.display.viewTo||g.line<f.display.viewFrom){a.removeAllRanges();return}var p=pa(f,a.anchorNode,a.anchorOffset);var l=pa(f,a.focusNode,a.focusOffset);if(p&&!p.bad&&l&&!l.bad&&nz(ph(p,l),h)==0&&nz(n9(p,l),g)==0){return}var j=f.display.view;var b=(h.line>=f.display.viewFrom&&oe(f,h))||{node:j[0].measure.map[2],offset:0};var m=g.line<f.display.viewTo&&oe(f,g);if(!m){var c=j[j.length-1].measure;var d=c.maps?c.maps[c.maps.length-1]:c.map;m={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(!b||!m){a.removeAllRanges();return}var o=a.rangeCount&&a.getRangeAt(0),e;try{e=m7(b.node,b.offset,m.offset,m.node)}catch(k){}if(e){if(!mX&&f.state.focused){a.collapse(b.node,b.offset);if(!e.collapsed){a.removeAllRanges();a.addRange(e)}}else{a.removeAllRanges();a.addRange(e)}if(o&&a.anchorNode==null){a.addRange(o)}else{if(mX){this.startGracePeriod()}}}this.rememberSelection()};mV.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=false;if(a.selectionChanged()){a.cm.operation(function(){return a.cm.curOp.selectionChanged=true})}},20)};mV.prototype.showMultipleSelections=function(a){l7(this.cm.display.cursorDiv,a.cursors);l7(this.cm.display.selectionDiv,a.selection)};mV.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset};mV.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount){return false}var b=a.getRangeAt(0).commonAncestorContainer;return hB(this.div,b)};mV.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()||document.activeElement!=this.div){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};mV.prototype.blur=function(){this.div.blur()};mV.prototype.getField=function(){return this.div};mV.prototype.supportsTouch=function(){return true};mV.prototype.receivedFocus=function(){var b=this;if(this.selectionInEditor()){this.pollSelection()}else{kI(this.cm,function(){return b.cm.curOp.selectionChanged=true})}function a(){if(b.cm.state.focused){b.pollSelection();b.polling.set(b.cm.options.pollInterval,a)}}this.polling.set(this.cm.options.pollInterval,a)};mV.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset};mV.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var d=this.getSelection(),c=this.cm;if(oL&&lS&&this.cm.display.gutterSpecs.length&&jo(d.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var b=pa(c,d.anchorNode,d.anchorOffset);var a=pa(c,d.focusNode,d.focusOffset);if(b&&a){kI(c,function(){lZ(c.doc,jU(b,a),ot);if(b.bad||a.bad){c.curOp.selectionChanged=true}})}};mV.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var r=this.cm,s=r.display,w=r.doc.sel.primary();var v=w.from(),d=w.to();if(v.ch==0&&v.line>r.firstLine()){v=oD(v.line-1,kr(r.doc,v.line-1).length)}if(d.ch==kr(r.doc,d.line).text.length&&d.line<r.lastLine()){d=oD(d.line+1,0)}if(v.line<s.viewFrom||d.line>s.viewTo-1){return false}var x,c,t;if(v.line==s.viewFrom||(x=kZ(r,v.line))==0){c=oO(s.view[0].line);t=s.view[0].node}else{c=oO(s.view[x].line);t=s.view[x-1].node.nextSibling}var b=kZ(r,d.line);var n,k;if(b==s.view.length-1){n=s.viewTo-1;k=s.lineDiv.lastChild}else{n=oO(s.view[b+1].line)-1;k=s.view[b+1].node.previousSibling}if(!t){return false}var q=r.doc.splitLines(h9(r,t,k,c,n));var l=jm(r.doc,oD(c,0),oD(n,kr(r.doc,n).text.length));while(q.length>1&&l.length>1){if(hI(q)==hI(l)){q.pop();l.pop();n--}else{if(q[0]==l[0]){q.shift();l.shift();c++}else{break}}}var j=0,f=0;var p=q[0],g=l[0],h=Math.min(p.length,g.length);while(j<h&&p.charCodeAt(j)==g.charCodeAt(j)){++j}var u=hI(q),o=hI(l);var e=Math.min(u.length-(q.length==1?j:0),o.length-(l.length==1?j:0));while(f<e&&u.charCodeAt(u.length-f-1)==o.charCodeAt(o.length-f-1)){++f}if(q.length==1&&l.length==1&&c==v.line){while(j&&j>v.ch&&u.charCodeAt(u.length-f-1)==o.charCodeAt(o.length-f-1)){j--;f++}}q[q.length-1]=u.slice(0,u.length-f).replace(/^\u200b+/,"");q[0]=q[0].slice(j).replace(/\u200b+$/,"");var a=oD(c,j);var m=oD(n,l.length?hI(l).length-f:0);if(q.length>1||q[0]||nz(a,m)){nx(r.doc,q,a,m,"+input");return true}};mV.prototype.ensurePolled=function(){this.forceCompositionEnd()};mV.prototype.reset=function(){this.forceCompositionEnd()};mV.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};mV.prototype.readFromDOMSoon=function(){var a=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){a.readDOMTimeout=null;if(a.composing){if(a.composing.done){a.composing=null}else{return}}a.updateFromDOM()},80)};mV.prototype.updateFromDOM=function(){var a=this;if(this.cm.isReadOnly()||!this.pollContent()){kI(this.cm,function(){return od(a.cm)})}};mV.prototype.setUneditable=function(a){a.contentEditable="false"};mV.prototype.onKeyPress=function(a){if(a.charCode==0||this.composing){return}a.preventDefault();if(!this.cm.isReadOnly()){j7(this.cm,ig)(this.cm,String.fromCharCode(a.charCode==null?a.keyCode:a.charCode),0)}};mV.prototype.readOnlyChanged=function(a){this.div.contentEditable=String(a!="nocursor")};mV.prototype.onContextMenu=function(){};mV.prototype.resetPosition=function(){};mV.prototype.needsContentAttribute=true;function oe(h,a){var j=i2(h,a.line);if(!j||j.hidden){return null}var f=kr(h.doc,a.line);var d=mE(j,f,a.line);var c=mi(f,h.doc.direction),b="left";if(c){var e=oX(c,a.ch);b=e%2?"right":"left"}var g=oR(d.map,a.ch,b);g.offset=g.collapse=="right"?g.end:g.start;return g}function jo(a){for(var b=a;b;b=b.parentNode){if(/CodeMirror-gutter-wrapper/.test(b.className)){return true}}return false}function ll(a,b){if(b){a.bad=true}return a}function h9(j,l,k,b,d){var g="",c=false,e=j.doc.lineSeparator(),a=false;function n(o){return function(p){return p.id==o}}function f(){if(c){g+=e;if(a){g+=e}c=a=false}}function h(o){if(o){f();g+=o}}function m(s){if(s.nodeType==1){var r=s.getAttribute("cm-text");if(r){h(r);return}var u=s.getAttribute("cm-marker"),t;if(u){var q=j.findMarks(oD(b,0),oD(d+1,0),n(+u));if(q.length&&(t=q[0].find(0))){h(jm(j.doc,t.from,t.to).join(e))}return}if(s.getAttribute("contenteditable")=="false"){return}var o=/^(pre|div|p|li|table|br)$/i.test(s.nodeName);if(!/^br$/i.test(s.nodeName)&&s.textContent.length==0){return}if(o){f()}for(var p=0;p<s.childNodes.length;p++){m(s.childNodes[p])}if(/^(pre|p)$/i.test(s.nodeName)){a=true}if(o){c=true}}else{if(s.nodeType==3){h(s.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}}}for(;;){m(l);if(l==k){break}l=l.nextSibling;a=false}return g}function pa(b,e,c){var d;if(e==b.display.lineDiv){d=b.display.lineDiv.childNodes[c];if(!d){return ll(b.clipPos(oD(b.display.viewTo-1)),true)}e=null;c=0}else{for(d=e;;d=d.parentNode){if(!d||d==b.display.lineDiv){return null}if(d.parentNode&&d.parentNode==b.display.lineDiv){break}}}for(var f=0;f<b.display.view.length;f++){var a=b.display.view[f];if(a.node==d){return or(a,e,c)}}}function or(m,q,o){var c=m.text.firstChild,a=false;if(!q||!hB(c,q)){return ll(oD(oO(m.line),0),true)}if(q==c){a=true;q=c.childNodes[o];o=0;if(!q){var f=m.rest?hI(m.rest):m.line;return ll(oD(oO(f),f.text.length),a)}}var p=q.nodeType==3?q:null,h=q;if(!p&&q.childNodes.length==1&&q.firstChild.nodeType==3){p=q.firstChild;if(o){o=p.nodeValue.length}}while(h.parentNode!=c){h=h.parentNode}var d=m.measure,k=d.maps;function n(y,t,w){for(var u=-1;u<(k?k.length:0);u++){var z=u<0?d.map:k[u];for(var v=0;v<z.length;v+=3){var x=z[v+2];if(x==y||x==t){var s=oO(u<0?m.line:m.rest[u]);var r=z[v]+w;if(w<0||x!=y){r=z[v+(w?1:0)]}return oD(s,r)}}}}var g=n(p,h,o);if(g){return ll(g,a)}for(var e=h.nextSibling,l=p?p.nodeValue.length-o:0;e;e=e.nextSibling){g=n(e,e.firstChild,0);if(g){return ll(oD(g.line,g.ch-l),a)}else{l+=e.textContent.length}}for(var j=h.previousSibling,b=o;j;j=j.previousSibling){g=n(j,j.firstChild,-1);if(g){return ll(oD(g.line,g.ch+b),a)}else{b+=j.textContent.length}}}var oz=function(a){this.cm=a;this.prevInput="";this.pollingFast=false;this.polling=new hs();this.hasSelection=false;this.composing=null};oz.prototype.init=function(a){var d=this;var b=this,c=this.cm;this.createField(a);var f=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild);if(jx){f.style.width="0px"}lT(f,"input",function(){if(jI&&lG>=9&&d.hasSelection){d.hasSelection=null}b.poll()});lT(f,"paste",function(g){if(hp(c,g)||m3(g,c)){return}c.state.pasteIncoming=+new Date;b.fastPoll()});function e(g){if(hp(c,g)){return}if(c.somethingSelected()){mh({lineWise:false,text:c.getSelections()})}else{if(!c.options.lineWiseCopyCut){return}else{var h=lB(c);mh({lineWise:true,text:h.text});if(g.type=="cut"){c.setSelections(h.ranges,null,ot)}else{b.prevInput="";f.value=h.text.join("\n");jH(f)}}}if(g.type=="cut"){c.state.cutIncoming=+new Date}}lT(f,"cut",e);lT(f,"copy",e);lT(a.scroller,"paste",function(g){if(m1(a,g)||hp(c,g)){return}if(!f.dispatchEvent){c.state.pasteIncoming=+new Date;b.focus();return}var h=new Event("paste");h.clipboardData=g.clipboardData;f.dispatchEvent(h)});lT(a.lineSpace,"selectstart",function(g){if(!m1(a,g)){nV(g)}});lT(f,"compositionstart",function(){var g=c.getCursor("from");if(b.composing){b.composing.range.clear()}b.composing={start:g,range:c.markText(g,c.getCursor("to"),{className:"CodeMirror-composing"})}});lT(f,"compositionend",function(){if(b.composing){b.poll();b.composing.range.clear();b.composing=null}})};oz.prototype.createField=function(a){this.wrapper=a9();this.textarea=this.wrapper.firstChild};oz.prototype.screenReaderLabelChanged=function(a){if(a){this.textarea.setAttribute("aria-label",a)}else{this.textarea.removeAttribute("aria-label")}};oz.prototype.prepareSelection=function(){var b=this.cm,e=b.display,f=b.doc;var c=hF(b);if(b.options.moveInputWithCursor){var d=jh(b,f.sel.primary().head,"div");var a=e.wrapper.getBoundingClientRect(),g=e.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,d.top+g.top-a.top));c.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,d.left+g.left-a.left))}return c};oz.prototype.showSelection=function(a){var c=this.cm,b=c.display;l7(b.cursorDiv,a.cursors);l7(b.selectionDiv,a.selection);if(a.teTop!=null){this.wrapper.style.top=a.teTop+"px";this.wrapper.style.left=a.teLeft+"px"}};oz.prototype.reset=function(b){if(this.contextMenuPending||this.composing){return}var c=this.cm;if(c.somethingSelected()){this.prevInput="";var a=c.getSelection();this.textarea.value=a;if(c.state.focused){jH(this.textarea)}if(jI&&lG>=9){this.hasSelection=a}}else{if(!b){this.prevInput=this.textarea.value="";if(jI&&lG>=9){this.hasSelection=null}}}};oz.prototype.getField=function(){return this.textarea};oz.prototype.supportsTouch=function(){return false};oz.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!km||jB()!=this.textarea)){try{this.textarea.focus()}catch(a){}}};oz.prototype.blur=function(){this.textarea.blur()};oz.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};oz.prototype.receivedFocus=function(){this.slowPoll()};oz.prototype.slowPoll=function(){var a=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){a.poll();if(a.cm.state.focused){a.slowPoll()}})};oz.prototype.fastPoll=function(){var b=false,c=this;c.pollingFast=true;function a(){var d=c.poll();if(!d&&!b){b=true;c.polling.set(60,a)}else{c.pollingFast=false;c.slowPoll()}}c.polling.set(20,a)};oz.prototype.poll=function(){var d=this;var c=this.cm,a=this.textarea,h=this.prevInput;if(this.contextMenuPending||!c.state.focused||(oo(a)&&!h&&!this.composing)||c.isReadOnly()||c.options.disableInput||c.state.keySeq){return false}var f=a.value;if(f==h&&!c.somethingSelected()){return false}if(jI&&lG>=9&&this.hasSelection===f||lg&&/[\uf700-\uf7ff]/.test(f)){c.display.input.reset();return false}if(c.doc.sel==c.display.selForContextMenu){var g=f.charCodeAt(0);if(g==8203&&!h){h="\u200b"}if(g==8666){this.reset();return this.cm.execCommand("undo")}}var e=0,b=Math.min(h.length,f.length);while(e<b&&h.charCodeAt(e)==f.charCodeAt(e)){++e}kI(c,function(){ig(c,f.slice(e),h.length-e,null,d.composing?"*compose":null);if(f.length>1000||f.indexOf("\n")>-1){a.value=d.prevInput=""}else{d.prevInput=f}if(d.composing){d.composing.range.clear();d.composing.range=c.markText(d.composing.start,c.getCursor("to"),{className:"CodeMirror-composing"})}});return true};oz.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};oz.prototype.onKeyPress=function(){if(jI&&lG>=9){this.hasSelection=null}this.fastPoll()};oz.prototype.onContextMenu=function(p){var k=this,j=k.cm,n=j.display,d=k.textarea;if(k.contextMenuPending){k.contextMenuPending()}var l=m2(j,p),e=n.scroller.scrollTop;if(!l||kR){return}var a=j.options.resetSelectionOnContextMenu;if(a&&j.doc.sel.contains(l)==-1){j7(j,lZ)(j.doc,jU(l),ot)}var o=d.style.cssText,f=k.wrapper.style.cssText;var g=k.wrapper.offsetParent.getBoundingClientRect();k.wrapper.style.cssText="position: static";d.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(p.clientY-g.top-5)+"px; left: "+(p.clientX-g.left-5)+"px;\n      z-index: 1000; background: "+(jI?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var h;if(j9){h=window.scrollY}n.input.focus();if(j9){window.scrollTo(null,h)}n.input.reset();if(!j.somethingSelected()){d.value=k.prevInput=" "}k.contextMenuPending=m;n.selForContextMenu=j.doc.sel;clearTimeout(n.detectingSelectAll);function b(){if(d.selectionStart!=null){var r=j.somethingSelected();var q="\u200b"+(r?d.value:"");d.value="\u21da";d.value=q;k.prevInput=r?"":"\u200b";d.selectionStart=1;d.selectionEnd=q.length;n.selForContextMenu=j.doc.sel}}function m(){if(k.contextMenuPending!=m){return}k.contextMenuPending=false;k.wrapper.style.cssText=f;d.style.cssText=o;if(jI&&lG<9){n.scrollbars.setScrollTop(n.scroller.scrollTop=e)}if(d.selectionStart!=null){if(!jI||(jI&&lG<9)){b()}var r=0,q=function(){if(n.selForContextMenu==j.doc.sel&&d.selectionStart==0&&d.selectionEnd>0&&k.prevInput=="\u200b"){j7(j,nU)(j)}else{if(r++<10){n.detectingSelectAll=setTimeout(q,500)}else{n.selForContextMenu=null;n.input.reset()}}};n.detectingSelectAll=setTimeout(q,200)}}if(jI&&lG>=9){b()}if(i1){lr(p);var c=function(){kp(window,"mouseup",c);setTimeout(m,20)};lT(window,"mouseup",c)}else{setTimeout(m,50)}};oz.prototype.readOnlyChanged=function(a){if(!a){this.reset()}this.textarea.disabled=a=="nocursor";this.textarea.readOnly=!!a};oz.prototype.setUneditable=function(){};oz.prototype.needsContentAttribute=false;function hH(g,f){f=f?oJ(f):{};f.value=g.value;if(!f.tabindex&&g.tabIndex){f.tabindex=g.tabIndex}if(!f.placeholder&&g.placeholder){f.placeholder=g.placeholder}if(f.autofocus==null){var e=jB();f.autofocus=e==g||g.getAttribute("autofocus")!=null&&e==document.body}function a(){g.value=h.getValue()}var j;if(g.form){lT(g.form,"submit",a);if(!f.leaveSubmitMethodAlone){var d=g.form;j=d.submit;try{var b=d.submit=function(){a();d.submit=j;d.submit();d.submit=b}}catch(c){}}}f.finishInit=function(k){k.save=a;k.getTextArea=function(){return g};k.toTextArea=function(){k.toTextArea=isNaN;a();g.parentNode.removeChild(k.getWrapperElement());g.style.display="";if(g.form){kp(g.form,"submit",a);if(!f.leaveSubmitMethodAlone&&typeof g.form.submit=="function"){g.form.submit=j}}}};g.style.display="none";var h=nc(function(k){return g.parentNode.insertBefore(k,g.nextSibling)},f);return h}function hC(a){a.off=kp;a.on=lT;a.wheelEventPixels=o9;a.Doc=pf;a.splitLines=iD;a.countColumn=ma;a.findColumn=lw;a.isWordChar=hL;a.Pass=kX;a.signal=o4;a.Line=jg;a.changeEnd=kj;a.scrollbarModel=mj;a.Pos=oD;a.cmpPos=nz;a.modes=kW;a.mimeModes=ho;a.resolveMode=hA;a.getMode=hP;a.modeExtensions=k7;a.extendMode=iB;a.copyState=lv;a.startState=lH;a.innerMode=i8;a.commands=iC;a.keyMap=i3;a.keyName=h0;a.isModifierKey=iI;a.lookupKey=lP;a.normalizeKeyMap=nR;a.StringStream=jP;a.SharedTextMarker=kV;a.TextMarker=mC;a.LineWidget=mD;a.e_preventDefault=nV;a.e_stopPropagation=k2;a.e_stop=lr;a.addClass=hO;a.contains=hB;a.rmClass=lY;a.keyNames=ko}ir(nc);jy(nc);var l8="iter insert remove copy getEditor constructor".split(" ");for(var oU in pf.prototype){if(pf.prototype.hasOwnProperty(oU)&&lz(l8,oU)<0){nc.prototype[oU]=(function(a){return function(){return a.apply(this.doc,arguments)}})(pf.prototype[oU])}}n3(pf);nc.inputStyles={textarea:oz,contenteditable:mV};nc.defineMode=function(a){if(!nc.defaults.mode&&a!="null"){nc.defaults.mode=a}lf.apply(this,arguments)};nc.defineMIME=oC;nc.defineMode("null",function(){return({token:function(a){return a.skipToEnd()}})});nc.defineMIME("text/plain","null");nc.defineExtension=function(b,a){nc.prototype[b]=a};nc.defineDocExtension=function(b,a){pf.prototype[b]=a};nc.fromTextArea=hH;hC(nc);nc.version="5.59.1";return nc})));(function(b){"function"==typeof b.define&&b.define("core",["codemirror.js"],function(a){b.CodeMirror=a})})(this);