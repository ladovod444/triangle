(function(){CKEDITOR.plugins.add("codemirror",{icons:"searchcode,autoformat,commentselectedrange,uncommentselectedrange,autocomplete",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh",version:"1.17.14",init:function(j){var o=this.path,f={autoCloseBrackets:true,autoCloseTags:true,autoFormatOnStart:false,autoFormatOnUncomment:false,autoLoadCodeMirror:true,continueComments:true,enableCodeFolding:true,enableCodeFormatting:true,enableSearchTools:true,highlightMatches:true,indentWithTabs:false,lineNumbers:true,lineWrapping:true,mode:"htmlmixed",matchBrackets:true,maxHighlightLineLength:1000,matchTags:true,showAutoCompleteButton:true,showCommentButton:true,showFormatButton:true,showSearchButton:true,showTrailingSpace:true,showUncommentButton:true,styleActiveLine:true,theme:"default",useBeautifyOnStart:false,hintOptions:null,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-Q":function(p){if(c.enableCodeFolding){window["foldFunc_"+j.id](p,p.getCursor().line)}}}};var c=CKEDITOR.tools.extend(f,j.config.codemirror||{},true),b=j.lang.codemirror;if(j.config.codemirror_theme){c.theme=j.config.codemirror_theme}if(j.config.codemirror_autoFormatOnStart){c.autoFormatOnStart=j.config.codemirror_autoFormatOnStart}if(j.plugins.bbcode&&c.mode.indexOf("bbcode")<=0){c.mode="bbcode"}var n="function"===typeof require&&"function"===typeof require.config;var h;if(n){var e=c.requireContext||"_";var l=CKEDITOR.getUrl("plugins/codemirror/js/");l=l.substring(0,l.length-1);h=require.config({context:e,packages:[{name:"codemirror",location:l,main:"codemirror.min.js"},{name:"codemirror-mode-handlebars",location:l,main:"codemirror.mode.handlebars.min.js"},{name:"codemirror-mode-twig",location:l,main:"codemirror.mode.twig.min.js"},{name:"codemirror-mode-html",location:l,main:"codemirror.mode.htmlmixed.min.js"},{name:"codemirror-mode-php",location:l,main:"codemirror.mode.php.min.js"},{name:"codemirror-mode-js",location:l,main:"codemirror.mode.js.min.js"},{name:"codemirror-addons",location:l,main:"codemirror.addons.min.js"},{name:"codemirror-addon-search",location:l,main:"codemirror.addons.search.min.js"},{name:"codemirror-beautify",location:l,main:"beautify.min.js"}],bundles:{codemirror:["core","codemirror.js"],"codemirror-mode-handlebars":["modeHandlebars"],"codemirror-mode-twig":["modeTwig"],"codemirror-mode-html":["modeHtml"],"codemirror-mode-php":["modePHP"],"codemirror-mode-js":["modeJS"],"codemirror-addons":["addons"],"codemirror-addon-search":["addonSearch"],"codemirror-beautify":["beautifyModule"]},map:{"*":{"lib/codemirror":"codemirror.js"}}})}if(j.elementMode===CKEDITOR.ELEMENT_MODE_INLINE||j.plugins.sourcedialog){CKEDITOR.dialog.add("sourcedialog",function(r){var u=CKEDITOR.document.getWindow().getViewPaneSize(),q=Math.min(u.width-70,800),s=u.height/1.5,t;function p(B,F,C){var J=C.getSize(),x=J.width,H=J.height/1.5;window["codemirror_"+B.id]=CodeMirror.fromTextArea(F,{direction:B.lang.dir,mode:c.mode==="handlebars"?{name:"handlebars",base:"text/html"}:c.mode,matchBrackets:c.matchBrackets,maxHighlightLineLength:c.maxHighlightLineLength,matchTags:c.matchTags,workDelay:300,workTime:35,readOnly:B.readOnly,lineNumbers:c.lineNumbers,lineWrapping:c.lineWrapping,autoCloseTags:c.autoCloseTags,autoCloseBrackets:c.autoCloseBrackets,highlightSelectionMatches:c.highlightMatches,continueComments:c.continueComments,indentWithTabs:c.indentWithTabs,theme:c.theme,showTrailingSpace:c.showTrailingSpace,showCursorWhenSelecting:true,styleActiveLine:c.styleActiveLine,hintOptions:c.hintOptions,viewportMargin:Infinity,extraKeys:c.extraKeys,foldGutter:true,gutters:["CodeMirror-linenumbbers","CodeMirror-foldgutter"]});window["codemirror_"+B.id].display.wrapper.classList.add("cke_enable_context_menu");var A=H+"px";var G=x+"px";window["codemirror_"+B.id].config=c;if(c.autoFormatOnStart){if(c.useBeautifyOnStart){var D=4,E=" ",z="collapse";var v=window["codemirror_"+B.id].getValue();window["codemirror_"+B.id].setValue(html_beautify(v,D,E,120,z))}else{window["codemirror_"+B.id].autoFormatAll({line:0,ch:0},{line:window["codemirror_"+B.id].lineCount(),ch:0})}}function I(){return{from:window["codemirror_"+B.id].getCursor(true),to:window["codemirror_"+B.id].getCursor(false)}}window["codemirror_"+B.id].on("change",function(){window["codemirror_"+B.id].save();B.fire("change",this)});window["codemirror_"+B.id].setSize(G,A);if(c.lineNumbers&&c.enableCodeFolding){window["codemirror_"+B.id].on("gutterClick",window["foldFunc_"+B.id])}if(typeof c.onLoad==="function"){c.onLoad(window["codemirror_"+B.id],B)}window["codemirror_"+B.id].on("blur",function(){B.fire("blur",this)});window["codemirror_"+B.id].on("keypress",function(M,K){if(c.enableCodeFormatting){var L=I();if(K.type==="keydown"&&K.ctrlKey&&K.keyCode===75&&!K.shiftKey&&!K.altKey){window["codemirror_"+B.id].commentRange(true,L.from,L.to)}else{if(K.type==="keydown"&&K.ctrlKey&&K.keyCode===75&&K.shiftKey&&!K.altKey){window["codemirror_"+B.id].commentRange(false,L.from,L.to);if(c.autoFormatOnUncomment){window["codemirror_"+B.id].autoFormatRange(L.from,L.to)}}else{if(K.type==="keydown"&&K.ctrlKey&&K.keyCode===75&&!K.shiftKey&&K.altKey){window["codemirror_"+B.id].autoFormatRange(L.from,L.to)}}}}});if(B.plugins.textselection&&textRange&&!B.config.fullPage){var w,y;w=OffSetToLineChannel(window["codemirror_"+B.id],textRange.startOffset);if(typeof(textRange.endOffset)=="undefined"){window["codemirror_"+B.id].focus();window["codemirror_"+B.id].setCursor(w)}else{window["codemirror_"+B.id].focus();y=OffSetToLineChannel(window["codemirror_"+B.id],textRange.endOffset);window["codemirror_"+B.id].setSelection(w,y)}}}return{title:r.lang.sourcedialog.title,minWidth:q,minHeight:s,resizable:CKEDITOR.DIALOG_RESIZE_BOTH,onLoad:function(){this.on("resize",function(x){var y=x.sender.parts;var z=y.title;var A=y.footer;var v=(x.data.height-z.$.offsetHeight-A.$.offsetHeight)+"px";var w=x.data.width+"px";window["codemirror_"+r.id].setSize(w,v)},this)},onShow:function(v){this.getContentElement("main","data").focus();this.getContentElement("main","AutoComplete").setValue(c.autoCloseTags,true);var w=this.getContentElement("main","data").getInputElement().$;this.setValueOf("main","data",t=r.getData());if(c.autoLoadCodeMirror){if(!IsStyleSheetAlreadyLoaded(o+"css/codemirror.min.css")){CKEDITOR.document.appendStyleSheet(o+"css/codemirror.min.css")}if(c.theme.length&&c.theme!="default"&&!IsStyleSheetAlreadyLoaded(o+"theme/"+c.theme+".css")){CKEDITOR.document.appendStyleSheet(o+"theme/"+c.theme+".css")}if(n){h(g(),function(x,y){p(r,w,v.sender)})}else{if(typeof(CodeMirror)=="undefined"){CKEDITOR.scriptLoader.load(o+"js/codemirror.min.js",function(){CKEDITOR.scriptLoader.load(d(),function(){p(r,w,v.sender)})})}else{if(CodeMirror.prototype.autoFormatAll){p(r,w,v.sender)}else{CKEDITOR.scriptLoader.load(d(),function(){p(r,w,v.sender)})}}}}},onCancel:function(v){if(v.data.hide){window["codemirror_"+r.id].toTextArea();window["codemirror_"+r.id]=null;r.fire("blur",this);r.fire("focus",this)}},onOk:(function(){function v(w){var x=this;r.setData(w,function(){x.hide();var y=r.createRange();y.moveToElementEditStart(r.editable());y.select()})}return function(){window["codemirror_"+r.id].toTextArea();window["codemirror_"+r.id]=null;var w=this.getValueOf("main","data").replace(/\r/g,"");if(w===t){r.fire("blur",this);r.fire("focus",this);return true}CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(v,0,this,w):v.call(this,w);r.fire("blur",this);r.fire("focus",this);return false}})(),contents:[{id:"main",label:r.lang.sourcedialog.title,elements:[{type:"hbox",style:"width: 80px;margin:0;",widths:["20px","20px","20px","20px"],children:[{type:"button",id:"searchCode",label:"",title:b.searchCode,"class":"searchCodeButton",onClick:function(){CodeMirror.commands.find(window["codemirror_"+r.id])}},{type:"button",id:"autoFormat",label:"",title:b.autoFormat,"class":"autoFormat",onClick:function(){var v={from:window["codemirror_"+r.id].getCursor(true),to:window["codemirror_"+r.id].getCursor(false)};window["codemirror_"+r.id].autoFormatRange(v.from,v.to)}},{type:"button",id:"CommentSelectedRange",label:"",title:b.commentSelectedRange,"class":"CommentSelectedRange",onClick:function(){var v={from:window["codemirror_"+r.id].getCursor(true),to:window["codemirror_"+r.id].getCursor(false)};window["codemirror_"+r.id].commentRange(true,v.from,v.to)}},{type:"button",id:"UncommentSelectedRange",label:"",title:b.uncommentSelectedRange,"class":"UncommentSelectedRange",onClick:function(){var v={from:window["codemirror_"+r.id].getCursor(true),to:window["codemirror_"+r.id].getCursor(false)};window["codemirror_"+r.id].commentRange(false,v.from,v.to);if(window["codemirror_"+r.id].config.autoFormatOnUncomment){window["codemirror_"+r.id].autoFormatRange(v.from,v.to)}}}]},{type:"checkbox",id:"AutoComplete",label:b.autoCompleteToggle,title:b.autoCompleteToggle,onChange:function(){window["codemirror_"+r.id].setOption("autoCloseTags",this.getValue())}},{type:"textarea",id:"data",dir:"ltr",inputStyle:"cursor:auto;width:"+q+"px;height:"+s+"px;tab-size:4;text-align:left;","class":"cke_source cke_enable_context_menu"}]}]}})}if(j.commands.find){j.commands.find.modes={wysiwyg:1,source:1};j.commands.find.exec=function(){if(j.mode==="wysiwyg"){j.openDialog("find")}else{CodeMirror.commands.find(window["codemirror_"+j.id])}}}if(j.commands.replace){j.commands.replace.modes={wysiwyg:1,source:1};j.commands.replace.exec=function(){if(j.mode==="wysiwyg"){j.openDialog("find",function(){this.selectPage("replace")})}else{CodeMirror.commands.replace(window["codemirror_"+j.id])}}}var k=CKEDITOR.plugins.sourcearea;if(!k.commands.searchCode){CKEDITOR.plugins.sourcearea.commands={source:{modes:{wysiwyg:1,source:1},editorFocus:false,readOnly:1,exec:function(p){if(p.mode==="wysiwyg"){p.fire("saveSnapshot")}p.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);p.setMode(p.mode==="source"?"wysiwyg":"source")},canUndo:false},searchCode:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:1,exec:function(p){CodeMirror.commands.find(window["codemirror_"+p.id])},canUndo:true},autoFormat:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:1,exec:function(q){var p={from:window["codemirror_"+q.id].getCursor(true),to:window["codemirror_"+q.id].getCursor(false)};window["codemirror_"+q.id].autoFormatRange(p.from,p.to)},canUndo:true},commentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:1,exec:function(q){var p={from:window["codemirror_"+q.id].getCursor(true),to:window["codemirror_"+q.id].getCursor(false)};window["codemirror_"+q.id].commentRange(true,p.from,p.to)},canUndo:true},uncommentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:1,exec:function(q){var p={from:window["codemirror_"+q.id].getCursor(true),to:window["codemirror_"+q.id].getCursor(false)};window["codemirror_"+q.id].commentRange(false,p.from,p.to);if(window["codemirror_"+q.id].config.autoFormatOnUncomment){window["codemirror_"+q.id].autoFormatRange(p.from,p.to)}},canUndo:true},autoCompleteToggle:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:1,exec:function(p){if(this.state==CKEDITOR.TRISTATE_ON){window["codemirror_"+p.id].setOption("autoCloseTags",false)}else{if(this.state==CKEDITOR.TRISTATE_OFF){window["codemirror_"+p.id].setOption("autoCloseTags",true)}}this.toggleState()},canUndo:true}}}j.addMode("source",function(p){if(!c.autoLoadCodeMirror){return}if(!IsStyleSheetAlreadyLoaded(o+"css/codemirror.min.css")){CKEDITOR.document.appendStyleSheet(o+"css/codemirror.min.css")}if(c.theme.length&&c.theme!="default"&&!IsStyleSheetAlreadyLoaded(o+"theme/"+c.theme+".css")){CKEDITOR.document.appendStyleSheet(o+"theme/"+c.theme+".css")}if(n){h(g(),function(){m(j);p()})}else{if(typeof(CodeMirror)=="undefined"){CKEDITOR.scriptLoader.load(o+"js/codemirror.min.js",function(){CKEDITOR.scriptLoader.load(d(),function(){m(j);p()})})}else{if(CodeMirror.prototype.autoFormatAll){m(j);p()}else{CKEDITOR.scriptLoader.load(d(),function(){m(j);p()})}}}});function g(){var p=["core","addons"];switch(c.mode){case"bbcode":case"bbcodemixed":p.push("modeHtml");break;case"application/x-httpd-php":p.push("modePHP");break;case"text/javascript":p.push("modeJs");break;case"handlebars":p.push("modeHandlebars");break;case"twig":p.push("modeTwig");break;case"htmlmixed":case"text/html":default:p.push("modeHtml")}if(c.useBeautifyOnStart){p.push("beautifyModule")}if(c.enableSearchTools){p.push("addonSearch")}return p}function d(){var p=[o+"js/codemirror.addons.min.js"];switch(c.mode){case"handlebars":p.push(o+"js/codemirror.mode.handlebars.min.js");case"bbcode":p.push(o+"js/codemirror.mode.bbcode.min.js");break;case"bbcodemixed":p.push(o+"js/codemirror.mode.bbcodemixed.min.js");break;case"htmlmixed":p.push(o+"js/codemirror.mode.htmlmixed.min.js");break;case"text/html":p.push(o+"js/codemirror.mode.htmlmixed.min.js");break;case"application/x-httpd-php":p.push(o+"js/codemirror.mode.php.min.js");break;case"text/javascript":p.push(o+"js/codemirror.mode.javascript.min.js");break;case"twig":p.push(o+"js/codemirror.mode.twig.min.js");break;default:p.push(o+"js/codemirror.mode.htmlmixed.min.js")}if(c.useBeautifyOnStart){p.push(o+"js/beautify.min.js")}if(c.enableSearchTools){p.push(o+"js/codemirror.addons.search.min.js")}return p}function m(t){var D=t.ui.space("contents"),A=D.getDocument().createElement("textarea");A.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4)));var y=[t.lang.editor,t.name].join(",");A.setAttributes({dir:"ltr",tabIndex:CKEDITOR.env.webkit?-1:t.tabIndex,role:"textbox","aria-label":y});A.addClass("cke_source");A.addClass("cke_reset");A.addClass("cke_enable_context_menu");t.ui.space("contents").append(A);window["editable_"+t.id]=t.editable(new a(t,A));window["editable_"+t.id].setData(t.getData(1));window["editable_"+t.id].editorID=t.id;t.fire("ariaWidget",this);var w=window["editable_"+t.id],q=w.getParent();if(c.lineNumbers&&c.enableCodeFolding){window["foldFunc_"+t.id]=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder)}function x(E){var H=[[CKEDITOR.SHIFT,"Shift-"],[CKEDITOR.CTRL,"Ctrl-"],[CKEDITOR.ALT,"Alt-"]];var G="";for(var F=0;F<H.length;F++){if(E&H[F][0]){E-=H[F][0];G+=H[F][1]}}if(CodeMirror.keyNames[E]){return G+CodeMirror.keyNames[E]}return null}function u(H){var E=t.config.keystrokes;if(CKEDITOR.tools.isArray(E)){for(var G=0;G<E.length;G++){var F=x(E[G][0]);if(F!==null){(function(I){H[F]=function(){t.execCommand(I)}})(E[G][1])}}}}u(c.extraKeys);window["codemirror_"+t.id]=CodeMirror.fromTextArea(w.$,{direction:t.lang.dir,mode:c.mode==="handlebars"?{name:"handlebars",base:"text/html"}:c.mode,matchBrackets:c.matchBrackets,maxHighlightLineLength:c.maxHighlightLineLength,matchTags:c.matchTags,workDelay:300,workTime:35,readOnly:t.readOnly,lineNumbers:c.lineNumbers,lineWrapping:true,autoCloseTags:c.autoCloseTags,autoCloseBrackets:c.autoCloseBrackets,highlightSelectionMatches:c.highlightMatches,continueComments:c.continueComments,indentWithTabs:c.indentWithTabs,theme:c.theme,showTrailingSpace:c.showTrailingSpace,showCursorWhenSelecting:true,hintOptions:c.hintOptions,styleActiveLine:c.styleActiveLine,extraKeys:c.extraKeys,foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});window["codemirror_"+t.id].display.wrapper.classList.add("cke_enable_context_menu");var s=q.$.clientHeight==0?t.ui.space("contents").getStyle("height"):q.$.clientHeight+"px";var B=q.$.clientWidth+"px";window["codemirror_"+t.id].config=c;if(c.autoFormatOnStart){if(c.useBeautifyOnStart){var v=4;var z=" ";var r="collapse";var p=window["codemirror_"+t.id].getValue();window["codemirror_"+t.id].setValue(html_beautify(p,v,z,120,r))}else{window["codemirror_"+t.id].autoFormatAll({line:0,ch:0},{line:window["codemirror_"+t.id].lineCount(),ch:0})}}function C(){return{from:window["codemirror_"+t.id].getCursor(true),to:window["codemirror_"+t.id].getCursor(false)}}window["codemirror_"+t.id].on("change",function(){window["codemirror_"+t.id].save();t.fire("change",this)});window["codemirror_"+t.id].setSize(null,s);if(c.lineNumbers&&c.enableCodeFolding){window["codemirror_"+t.id].on("gutterClick",window["foldFunc_"+t.id])}if(typeof c.onLoad==="function"){c.onLoad(window["codemirror_"+t.id],t)}window["codemirror_"+t.id].on("blur",function(){t.fire("blur",this)});window["codemirror_"+t.id].on("keypress",function(G,E){if(c.enableCodeFormatting){var F=C();if(E.type==="keydown"&&E.ctrlKey&&E.keyCode===75&&!E.shiftKey&&!E.altKey){window["codemirror_"+t.id].commentRange(true,F.from,F.to)}else{if(E.type==="keydown"&&E.ctrlKey&&E.keyCode===75&&E.shiftKey&&!E.altKey){window["codemirror_"+t.id].commentRange(false,F.from,F.to);if(c.autoFormatOnUncomment){window["codemirror_"+t.id].autoFormatRange(F.from,F.to)}}else{if(E.type==="keydown"&&E.ctrlKey&&E.keyCode===75&&!E.shiftKey&&E.altKey){window["codemirror_"+t.id].autoFormatRange(F.from,F.to)}}}}})}j.addCommand("source",k.commands.source);if(j.ui.addButton){j.ui.addButton("Source",{label:j.lang.codemirror.toolbar,command:"source",toolbar:"mode,10"})}if(c.enableCodeFormatting){j.addCommand("searchCode",k.commands.searchCode);j.addCommand("autoFormat",k.commands.autoFormat);j.addCommand("commentSelectedRange",k.commands.commentSelectedRange);j.addCommand("uncommentSelectedRange",k.commands.uncommentSelectedRange);j.addCommand("autoCompleteToggle",k.commands.autoCompleteToggle);if(j.ui.addButton){if(c.showFormatButton||c.showCommentButton||c.showUncommentButton||c.showSearchButton){j.ui.add("-",CKEDITOR.UI_SEPARATOR,{toolbar:"mode,30"})}if(c.showSearchButton&&c.enableSearchTools){j.ui.addButton("searchCode",{label:b.searchCode,command:"searchCode",toolbar:"mode,40"})}if(c.showFormatButton){j.ui.addButton("autoFormat",{label:b.autoFormat,command:"autoFormat",toolbar:"mode,50"})}if(c.showCommentButton){j.ui.addButton("CommentSelectedRange",{label:b.commentSelectedRange,command:"commentSelectedRange",toolbar:"mode,60"})}if(c.showUncommentButton){j.ui.addButton("UncommentSelectedRange",{label:b.uncommentSelectedRange,command:"uncommentSelectedRange",toolbar:"mode,70"})}if(c.showAutoCompleteButton){j.ui.addButton("AutoComplete",{label:b.autoCompleteToggle,command:"autoCompleteToggle",toolbar:"mode,80"})}}}j.on("beforeModeUnload",function(p){if(j.mode==="source"&&j.plugins.textselection&&!j.config.fullPage){var q=j.getTextSelection();q.startOffset=LineChannelToOffSet(window["codemirror_"+j.id],window["codemirror_"+j.id].getCursor(true));q.endOffset=LineChannelToOffSet(window["codemirror_"+j.id],window["codemirror_"+j.id].getCursor(false));delete q.element;q.createBookmark(j);sourceBookmark=true;if(j.undoManager){j.undoManager.unlock()}p.data=q.content}});j.on("mode",function(){j.getCommand("source").setState(j.mode==="source"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);if(j.mode==="source"){if("autoCompleteToggle" in j.commands){j.getCommand("autoCompleteToggle").setState(window["codemirror_"+j.id].config.autoCloseTags?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}if(j.plugins.textselection&&textRange&&!j.config.fullPage){var q,p;q=OffSetToLineChannel(window["codemirror_"+j.id],textRange.startOffset);if(typeof(textRange.endOffset)=="undefined"){window["codemirror_"+j.id].focus();window["codemirror_"+j.id].setCursor(q)}else{window["codemirror_"+j.id].focus();p=OffSetToLineChannel(window["codemirror_"+j.id],textRange.endOffset);window["codemirror_"+j.id].setSelection(q,p)}}}});j.on("resize",function(){if(window["editable_"+j.id]&&j.mode==="source"){var q=window["editable_"+j.id].getParent();var p=q.$.clientHeight+"px";var r=q.$.clientWidth+"px";window["codemirror_"+j.id].setSize(r,p)}});j.on("readOnly",function(){if(window["editable_"+j.id]&&j.mode==="source"){window["codemirror_"+j.id].setOption("readOnly",this.readOnly)}});j.on("instanceReady",function(p){var q=j.commands.selectAll;if(q!=null){q.exec=function(){if(j.mode==="source"){window["codemirror_"+j.id].setSelection({line:0,ch:0},{line:window["codemirror_"+j.id].lineCount(),ch:0})}else{var s=j.editable();if(s.is("body")){j.document.$.execCommand("SelectAll",false,null)}else{var r=j.createRange();r.selectNodeContents(s);r.select()}j.forceNextSelectionCheck();j.selectionChange()}}}});if(typeof(jQuery)!="undefined"&&jQuery('a[data-toggle="tab"]')&&window["codemirror_"+j.id]){jQuery('a[data-toggle="tab"]').on("shown.bs.tab",function(){window["codemirror_"+j.id].refresh()})}j.on("setData",function(p){if(window["editable_"+p.editor.id]&&p.editor.mode==="source"){window["codemirror_"+p.editor.id].setValue(p.data.dataValue)}})}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(b){this.setValue(b);if(window["editable_"+this.editor.id]&&this.editor.mode==="source"){window["codemirror_"+this.editor.id].setValue(b)}this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(b){this[(b?"set":"remove")+"Attribute"]("readOnly","readonly")},editorID:null,detach:function(){window["codemirror_"+this.editorID].toTextArea();window["editable_"+this.editorID]=null;window["codemirror_"+this.editorID]=null;a.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:false,readOnly:1,exec:function(a){if(a.mode==="wysiwyg"){a.fire("saveSnapshot")}a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);a.setMode(a.mode==="source"?"wysiwyg":"source")},canUndo:false},searchCode:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:1,exec:function(a){CodeMirror.commands.find(window["codemirror_"+a.id])},canUndo:true},autoFormat:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:0,exec:function(b){var a={from:window["codemirror_"+b.id].getCursor(true),to:window["codemirror_"+b.id].getCursor(false)};window["codemirror_"+b.id].autoFormatRange(a.from,a.to)},canUndo:true},commentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:0,exec:function(b){var a={from:window["codemirror_"+b.id].getCursor(true),to:window["codemirror_"+b.id].getCursor(false)};window["codemirror_"+b.id].commentRange(true,a.from,a.to)},canUndo:true},uncommentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:0,exec:function(b){var a={from:window["codemirror_"+b.id].getCursor(true),to:window["codemirror_"+b.id].getCursor(false)};window["codemirror_"+b.id].commentRange(false,a.from,a.to);if(window["codemirror_"+b.id].config.autoFormatOnUncomment){window["codemirror_"+b.id].autoFormatRange(a.from,a.to)}},canUndo:true},autoCompleteToggle:{modes:{wysiwyg:0,source:1},editorFocus:false,readOnly:1,exec:function(a){if(this.state==CKEDITOR.TRISTATE_ON){window["codemirror_"+a.id].setOption("autoCloseTags",false)}else{if(this.state==CKEDITOR.TRISTATE_OFF){window["codemirror_"+a.id].setOption("autoCloseTags",true)}}this.toggleState()},canUndo:true}}};function LineChannelToOffSet(b,c){var a=c.line;var d=c.ch;var e=(a+d);for(i=0;i<a;i++){e+=(b.getLine(i)).length}return e}function OffSetToLineChannel(b,e){var a=0,d=0,c=0;for(i=0;i<b.lineCount();i++){len=(b.getLine(i)).length;if(e<c+len){a=i;d=e-c;return{line:a,ch:d}}len++;c+=len}return{line:a,ch:d}}function IsStyleSheetAlreadyLoaded(a){return CKEDITOR.document.getHead().findOne('link[href="'+a+'"]')!=null};