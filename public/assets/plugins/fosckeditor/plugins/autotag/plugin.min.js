CKEDITOR.plugins.add("autotag",{requires:"autocomplete,textmatch,codemirror",init:function(a){a.on("instanceReady",function(){var c={};function f(g){if(!g.collapsed){return null}return CKEDITOR.plugins.textMatch.match(g,b)}function b(j,i){var h=j.slice(0,i),g=h.match(/\w*$/);if(!g){return null}return{start:g.index,end:i}}c.textTestCallback=f;var d=[{id:"div",name:"<div></div>",type:"feature"},{id:"span",name:"<span></span>",type:"feature"}];function e(h,j){var i=h.query.substring(0);var g=d.filter(function(k){console.log(k);console.log(i);console.log(String(k.id).indexOf(i));return String(k.id).indexOf(i)==0});j(g)}c.dataCallback=e;c.itemTemplate="{id}: {name}";c.outputTemplate="{name}";new CKEDITOR.plugins.autocomplete(a,c)})}});