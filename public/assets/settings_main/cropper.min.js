window.addEventListener("load",function(){var logo=document.getElementById("logo");var image=document.getElementById("image");var input=document.getElementById("input");var cropper;var $modalLogo=document.getElementById("modal");var $closeModal=new bootstrap.Modal($modalLogo);input.addEventListener("change",function(e){const request=new XMLHttpRequest;var urlForm=this.dataset.href;request.open("GET",urlForm);request.setRequestHeader("X-Requested-With","XMLHttpRequest");request.addEventListener("readystatechange",function(evemnt){if(request.readyState===4&&request.status===200){var modl=document.getElementById("modal");modl.innerHTML=request.responseText;$closeModal.show();image=document.getElementById("image");var files=e.target.files;var done=function(url){input.value="";image.src=url};var reader;var file;var url;if(files&&files.length>0){file=files[0];if(FileReader){reader=new FileReader;reader.addEventListener("load",function(event){done(reader.result)},false);reader.readAsDataURL(file)}else if(URL){done(URL.createObjectURL(file))}}let $settings_admin_main_logo=document.forms.namedItem("form");if(!$settings_admin_main_logo){return}$settings_admin_main_logo.addEventListener("submit",function(event){event.preventDefault();var initialAvatarURL;var canvas;const $url=this.getAttribute("action");let formData=new FormData($settings_admin_main_logo);if(cropper){canvas=cropper.getCroppedCanvas({minWidth:20,maxWidth:200,height:50});canvas.toBlob(function(blob){formData.append("logoCrop",blob);request.open("POST",$url,true);request.addEventListener("readystatechange",function(evemnt){if(request.readyState===4&&request.status===200){const result=JSON.parse(request.responseText);if(result.status==200){initialAvatarURL=logo.src;logo.src=canvas.toDataURL();console.log(result)}else{alert("Error upload file cover");console.log(result.message)}}$closeModal.hide();return false});request.send(formData)})}})}});request.send()});$modalLogo.addEventListener("shown.bs.modal",function(){var setWidth=200;var setHeight=50;var minCroppedWidth=setHeight;var maxCroppedWidth=setWidth;var minCroppedHeight=setHeight;var maxCroppedHeight=setHeight;cropper=new Cropper(image,{data:{width:(minCroppedWidth+maxCroppedWidth)/2,height:(minCroppedHeight+maxCroppedHeight)/2},crop:function(event){var width=event.detail.width;var height=event.detail.height;if(width<minCroppedWidth||height<minCroppedHeight||width>maxCroppedWidth||height>maxCroppedHeight){cropper.setData({width:Math.max(minCroppedWidth,Math.min(maxCroppedWidth,width)),height:Math.max(minCroppedHeight,Math.min(maxCroppedHeight,height))})}}})});$modalLogo.addEventListener("hidden.bs.modal",function(){cropper.destroy();cropper=null;$modalLogo.innerHTML=""})});